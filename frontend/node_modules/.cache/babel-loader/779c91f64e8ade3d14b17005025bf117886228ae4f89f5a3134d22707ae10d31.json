{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Ammaarah\\\\EventuallyPerfect\\\\QUANTIX\\\\frontend\\\\src\\\\components\\\\services\\\\CateringService.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\nimport ReactMarkdown from 'react-markdown';\nimport { supabase } from '../../client';\nimport { FaCheckCircle, FaTimesCircle, FaInfoCircle } from 'react-icons/fa';\nimport './CateringService.css';\n\n// Simple Text Editor Component\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst SimpleTextEditor = ({\n  value,\n  onChange,\n  placeholder,\n  height = '150px'\n}) => {\n  _s();\n  const textareaRef = useRef(null);\n  const handleChange = e => {\n    onChange(e.target.value);\n  };\n  const applyFormat = format => {\n    const textarea = textareaRef.current;\n    if (!textarea) return;\n    const start = textarea.selectionStart;\n    const end = textarea.selectionEnd;\n    const selectedText = value.substring(start, end);\n    let newValue = value;\n    let newCursorPos = end;\n    switch (format) {\n      case 'bold':\n        newValue = value.substring(0, start) + `**${selectedText}**` + value.substring(end);\n        newCursorPos = selectedText ? end + 4 : start + 2;\n        break;\n      case 'italic':\n        newValue = value.substring(0, start) + `*${selectedText}*` + value.substring(end);\n        newCursorPos = selectedText ? end + 2 : start + 1;\n        break;\n      case 'bullet':\n        newValue = value.substring(0, start) + `- ${selectedText}` + value.substring(end);\n        newCursorPos = selectedText ? end + 2 : start + 2;\n        break;\n      case 'number':\n        newValue = value.substring(0, start) + `1. ${selectedText}` + value.substring(end);\n        newCursorPos = selectedText ? end + 3 : start + 3;\n        break;\n      default:\n        return;\n    }\n    onChange(newValue);\n    setTimeout(() => {\n      textarea.selectionStart = textarea.selectionEnd = newCursorPos;\n      textarea.focus();\n    }, 0);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"text-editor-wrapper\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"editor-toolbar\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: () => applyFormat('bold'),\n        title: \"Bold\",\n        className: \"format-button\",\n        children: /*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"B\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: () => applyFormat('italic'),\n        title: \"Italic\",\n        className: \"format-button\",\n        children: /*#__PURE__*/_jsxDEV(\"em\", {\n          children: \"I\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: () => applyFormat('bullet'),\n        title: \"Bullet List\",\n        className: \"format-button\",\n        children: \"\\u2022\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: () => applyFormat('number'),\n        title: \"Numbered List\",\n        className: \"format-button\",\n        children: \"1.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n      ref: textareaRef,\n      className: \"simple-textarea\",\n      value: value || '',\n      onChange: handleChange,\n      placeholder: placeholder,\n      style: {\n        minHeight: height\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 5\n  }, this);\n};\n_s(SimpleTextEditor, \"gJtT2aPnbUb4WH8ANBrFCKASbhs=\");\n_c = SimpleTextEditor;\nconst CateringService = ({\n  vendorId,\n  isReadOnly\n}) => {\n  _s2();\n  const [isEditing, setIsEditing] = useState(false);\n  const [isLoading, setIsLoading] = useState(true);\n  const [photos, setPhotos] = useState([]);\n  const [uploading, setUploading] = useState(false);\n  const [toast, setToast] = useState(null);\n  const toastTimeout = useRef(null);\n  const fileInputRef = useRef(null);\n  const [formData, setFormData] = useState({\n    service_description: '',\n    catering_types: '',\n    menu_options: '',\n    dietary_options: '',\n    base_rate: '',\n    additional_rates: ''\n  });\n\n  // Show toast notification\n  const showToast = (message, type = 'info') => {\n    if (toastTimeout.current) clearTimeout(toastTimeout.current);\n    setToast({\n      message,\n      type\n    });\n    toastTimeout.current = setTimeout(() => setToast(null), 5000);\n  };\n\n  // Close toast manually\n  const closeToast = () => {\n    if (toastTimeout.current) clearTimeout(toastTimeout.current);\n    setToast(null);\n  };\n\n  // Cleanup timeout on unmount\n  useEffect(() => {\n    return () => {\n      if (toastTimeout.current) clearTimeout(toastTimeout.current);\n    };\n  }, []);\n\n  // Fetch catering service data\n  const fetchCateringData = useCallback(async () => {\n    try {\n      const {\n        data,\n        error\n      } = await supabase.from('vendor_services').select('*').eq('vendor_id', vendorId).eq('service_type', 'catering').single();\n      if (error && error.code !== 'PGRST116') {\n        // PGRST116 is the code for no rows returned\n        throw error;\n      }\n      if (data) {\n        setFormData({\n          service_description: data.service_description || '',\n          catering_types: data.catering_types || '',\n          menu_options: data.menu_options || '',\n          dietary_options: data.dietary_options || '',\n          base_rate: data.base_rate || '',\n          additional_rates: data.additional_rates || ''\n        });\n        setPhotos(data.photos || []);\n      } else {\n        // Initialize with empty values if no data found\n        setFormData({\n          service_description: '',\n          catering_types: '',\n          menu_options: '',\n          dietary_options: '',\n          base_rate: '',\n          additional_rates: ''\n        });\n        setPhotos([]);\n      }\n    } catch (error) {\n      console.error('Error in fetchCateringData:', error);\n      showToast('Error loading catering data. Please refresh.', 'error');\n    } finally {\n      setIsLoading(false);\n    }\n  }, [vendorId]); // Add vendorId as a dependency\n\n  useEffect(() => {\n    fetchCateringData();\n  }, [vendorId, fetchCateringData]);\n  const handleChange = (value, field) => {\n    setFormData(prev => ({\n      ...prev,\n      [field]: value\n    }));\n  };\n  const handleSubmit = async e => {\n    if (e) e.preventDefault();\n    try {\n      // Prepare the data to be saved\n      const serviceData = {\n        vendor_id: vendorId,\n        service_type: 'catering',\n        service_description: formData.service_description || '',\n        catering_types: formData.catering_types || '',\n        menu_options: formData.menu_options || '',\n        dietary_options: formData.dietary_options || '',\n        base_rate: formData.base_rate || '',\n        additional_rates: formData.additional_rates || '',\n        photos: photos,\n        // Include the photos array\n        updated_at: new Date().toISOString()\n      };\n\n      // Check if the record exists\n      const {\n        data: existingService\n      } = await supabase.from('vendor_services').select('id').eq('vendor_id', vendorId).eq('service_type', 'catering').single();\n      let error;\n      if (existingService) {\n        // Update existing record\n        const {\n          error: updateError\n        } = await supabase.from('vendor_services').update(serviceData).eq('id', existingService.id).select().single();\n\n        // Data is saved, no need to store it\n        error = updateError;\n      } else {\n        // Insert new record\n        const {\n          error: saveError\n        } = await supabase.from('vendor_services').upsert([{\n          ...(existingService ? {\n            id: existingService.id\n          } : {}),\n          vendor_id: vendorId,\n          service_type: 'catering',\n          ...formData,\n          updated_at: new Date().toISOString()\n        }], {\n          onConflict: 'vendor_id,service_type'\n        });\n        error = saveError;\n      }\n      if (error) {\n        console.error('Database error:', {\n          message: error.message,\n          details: error.details,\n          hint: error.hint,\n          code: error.code\n        });\n        throw error;\n      }\n      setIsEditing(false);\n      showToast('Catering service saved successfully!', 'success');\n      fetchCateringData(); // Refresh data\n    } catch (error) {\n      console.error('Error in handleSubmit:', error);\n      showToast(`Failed to save catering service: ${error.message}`, 'error');\n    }\n  };\n  const handlePhotoUpload = async e => {\n    const file = e.target.files[0];\n    if (!file) return;\n    if (!file.type.startsWith('image/')) {\n      showToast('Please upload an image file', 'error');\n      return;\n    }\n\n    // Check file size (5MB limit)\n    if (file.size > 5 * 1024 * 1024) {\n      showToast('File size too large. Maximum size is 5MB.', 'error');\n      return;\n    }\n    setUploading(true);\n    try {\n      // Skip bucket existence check and try to upload directly\n      // The RLS policies will handle the permission check\n\n      // Get the current user\n      const {\n        data: {\n          user\n        },\n        error: userError\n      } = await supabase.auth.getUser();\n      if (userError || !user) {\n        throw new Error('You must be logged in to upload photos.');\n      }\n\n      // Create file path that matches the RLS policy\n      // The RLS expects the first folder to be the user's ID\n      const filePath = `${user.id}/catering/${Date.now()}-${file.name}`;\n\n      // Upload the file to storage with proper error handling\n      const {\n        error: uploadError\n      } = await supabase.storage.from('portfolio-photos').upload(filePath, file, {\n        cacheControl: '3600',\n        upsert: false,\n        contentType: file.type,\n        metadata: {\n          uploaded_by: user.id,\n          uploaded_at: new Date().toISOString(),\n          vendor_id: vendorId // Store the vendor ID in metadata for reference\n        }\n      });\n      if (uploadError) {\n        console.error('Upload error:', uploadError);\n        // If the error is about RLS, provide a more helpful message\n        if (uploadError.message.includes('row-level security')) {\n          throw new Error('Permission denied. Please make sure you are logged in and have the necessary permissions.');\n        }\n        throw uploadError;\n      }\n\n      // 2. Get the public URL\n      const {\n        data: {\n          publicUrl\n        }\n      } = supabase.storage.from('portfolio-photos').getPublicUrl(filePath);\n\n      // 3. Create the new photo object\n      const newPhoto = {\n        url: publicUrl,\n        path: filePath,\n        created_at: new Date().toISOString()\n      };\n\n      // 4. Get the existing service record\n      const {\n        data: existingService\n      } = await supabase.from('vendor_services').select('id, photos').eq('vendor_id', vendorId).eq('service_type', 'catering').single();\n      const currentPhotos = (existingService === null || existingService === void 0 ? void 0 : existingService.photos) || [];\n      const updatedPhotos = [...currentPhotos, newPhoto];\n\n      // 5. Update or create the service record with the new photos array\n      if (existingService) {\n        // Update existing record\n        const {\n          error: updateError\n        } = await supabase.from('vendor_services').update({\n          photos: updatedPhotos,\n          updated_at: new Date().toISOString()\n        }).eq('id', existingService.id);\n        if (updateError) throw updateError;\n      } else {\n        // Create new record\n        const {\n          error: insertError\n        } = await supabase.from('vendor_services').insert([{\n          vendor_id: vendorId,\n          service_type: 'catering',\n          photos: updatedPhotos,\n          created_at: new Date().toISOString(),\n          updated_at: new Date().toISOString()\n        }]);\n        if (insertError) throw insertError;\n      }\n\n      // 6. Update local state\n      setPhotos(updatedPhotos);\n      e.target.value = null;\n      showToast('Photo uploaded successfully!', 'success');\n    } catch (error) {\n      console.error('Error uploading photo:', error);\n      showToast('Failed to upload photo. Please try again.', 'error');\n    } finally {\n      setUploading(false);\n    }\n  };\n  const handleDeletePhoto = async photoUrl => {\n    if (!window.confirm('Are you sure you want to delete this photo?')) return;\n    try {\n      // 1. Find the photo in the current photos array to get its path\n      const photoToDelete = photos.find(p => p.url === photoUrl);\n      if (!photoToDelete) throw new Error('Photo not found');\n\n      // 2. Delete from storage\n      const {\n        error: deleteError\n      } = await supabase.storage.from('portfolio-photos').remove([photoToDelete.path]);\n      if (deleteError) throw deleteError;\n\n      // 3. Get the existing service record\n      const {\n        data: existingService,\n        error: fetchError\n      } = await supabase.from('vendor_services').select('id').eq('vendor_id', vendorId).eq('service_type', 'catering').single();\n      if (fetchError) throw fetchError;\n      if (!existingService) throw new Error('Service record not found');\n\n      // 4. Update the database to remove the photo\n      const updatedPhotos = photos.filter(p => p.url !== photoUrl);\n      const {\n        error: updateError\n      } = await supabase.from('vendor_services').update({\n        photos: updatedPhotos,\n        updated_at: new Date().toISOString()\n      }).eq('id', existingService.id);\n      if (updateError) throw updateError;\n\n      // 5. Update local state\n      setPhotos(updatedPhotos);\n      showToast('Photo deleted successfully!', 'success');\n    } catch (error) {\n      console.error('Error deleting photo:', error);\n      showToast('Failed to delete photo. Please try again.', 'error');\n    }\n  };\n\n  // Toast Notification Component\n  const ToastNotification = () => {\n    if (!toast) return null;\n    const iconMap = {\n      success: /*#__PURE__*/_jsxDEV(FaCheckCircle, {\n        className: \"toast-icon\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 434,\n        columnNumber: 16\n      }, this),\n      error: /*#__PURE__*/_jsxDEV(FaTimesCircle, {\n        className: \"toast-icon\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 435,\n        columnNumber: 14\n      }, this),\n      info: /*#__PURE__*/_jsxDEV(FaInfoCircle, {\n        className: \"toast-icon\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 436,\n        columnNumber: 13\n      }, this)\n    };\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `toast-notification ${toast.type}`,\n      children: [iconMap[toast.type], /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"toast-message\",\n        children: toast.message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 441,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: closeToast,\n        className: \"toast-close\",\n        \"aria-label\": \"Close notification\",\n        children: \"\\xD7\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 442,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 439,\n      columnNumber: 7\n    }, this);\n  };\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading\",\n      children: \"Loading catering services...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 450,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"catering-service\",\n    children: [toast && /*#__PURE__*/_jsxDEV(ToastNotification, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 455,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"service-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"service-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Catering Service\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 458,\n          columnNumber: 11\n        }, this), isEditing ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-actions\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"cancel-button\",\n            onClick: () => {\n              setIsEditing(false);\n              fetchCateringData();\n            },\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 461,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"save-button\",\n            form: \"service-form\",\n            children: \"Save Changes\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 471,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 460,\n          columnNumber: 13\n        }, this) : !isReadOnly && /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: \"edit-button\",\n          onClick: () => setIsEditing(true),\n          children: \"Edit Service\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 476,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 457,\n        columnNumber: 9\n      }, this), isEditing ? /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        id: \"service-form\",\n        className: \"service-form\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"rich-text-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Service Description\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 489,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(SimpleTextEditor, {\n            value: formData.service_description,\n            onChange: v => handleChange(v, 'service_description'),\n            placeholder: \"Describe your catering service...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 490,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 488,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"rich-text-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Catering Types\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 497,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(SimpleTextEditor, {\n            value: formData.catering_types,\n            onChange: v => handleChange(v, 'catering_types'),\n            placeholder: \"e.g., Buffet, Plated, Family Style...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 498,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 496,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"rich-text-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Menu Options\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 505,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(SimpleTextEditor, {\n            value: formData.menu_options,\n            onChange: v => handleChange(v, 'menu_options'),\n            placeholder: \"Describe your menu options and specialties...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 506,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 504,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"rich-text-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Dietary Options\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 513,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(SimpleTextEditor, {\n            value: formData.dietary_options,\n            onChange: v => handleChange(v, 'dietary_options'),\n            placeholder: \"e.g., Vegetarian, Vegan, Gluten-Free...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 514,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 512,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"rich-text-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Base Rate\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 521,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(SimpleTextEditor, {\n            value: formData.base_rate,\n            onChange: v => handleChange(v, 'base_rate'),\n            placeholder: \"e.g., $50 per person, $1000 minimum...\",\n            height: \"100px\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 522,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 520,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"rich-text-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Additional Pricing & Packages\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 530,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(SimpleTextEditor, {\n            value: formData.additional_rates,\n            onChange: v => handleChange(v, 'additional_rates'),\n            placeholder: \"List any additional rates or packages...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 531,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 529,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 487,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"service-details\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"service-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"Service Description\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 541,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"markdown-content\",\n            children: /*#__PURE__*/_jsxDEV(ReactMarkdown, {\n              children: formData.service_description || 'No description provided.'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 543,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 542,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 540,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"service-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"Catering Types\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 547,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"markdown-content\",\n            children: /*#__PURE__*/_jsxDEV(ReactMarkdown, {\n              children: formData.catering_types || 'No catering types specified.'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 549,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 548,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 546,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"service-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"Menu Options\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 553,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"markdown-content\",\n            children: /*#__PURE__*/_jsxDEV(ReactMarkdown, {\n              children: formData.menu_options || 'No menu options provided.'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 555,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 554,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 552,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"service-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"Dietary Options\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 559,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"markdown-content\",\n            children: /*#__PURE__*/_jsxDEV(ReactMarkdown, {\n              children: formData.dietary_options || 'No dietary options specified.'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 561,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 560,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 558,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"service-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"Pricing\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 565,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n            children: \"Base Rate\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 566,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"markdown-content\",\n            children: /*#__PURE__*/_jsxDEV(ReactMarkdown, {\n              children: formData.base_rate || 'No base rate specified.'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 568,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 567,\n            columnNumber: 15\n          }, this), formData.additional_rates && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n              style: {\n                marginTop: '15px'\n              },\n              children: \"Additional Rates & Packages\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 572,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"markdown-content\",\n              children: /*#__PURE__*/_jsxDEV(ReactMarkdown, {\n                children: formData.additional_rates\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 574,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 573,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 564,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 539,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 456,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"service-images\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        children: \"Food Gallery\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 584,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"portfolio-grid\",\n        children: photos && photos.length > 0 ? photos.map((photo, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"portfolio-photo\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: `${photo.url}?t=${new Date().getTime()}`,\n            alt: `Catering gallery ${index + 1}`,\n            className: \"portfolio-image\",\n            loading: \"lazy\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 589,\n            columnNumber: 17\n          }, this), isEditing && /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"delete-photo\",\n            onClick: () => handleDeletePhoto(photo.url),\n            \"aria-label\": \"Delete photo\",\n            children: \"\\xD7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 596,\n            columnNumber: 19\n          }, this)]\n        }, photo.url, true, {\n          fileName: _jsxFileName,\n          lineNumber: 588,\n          columnNumber: 15\n        }, this)) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"no-photos-container\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"no-photos\",\n            children: \"No food photos added yet\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 608,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 607,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 585,\n        columnNumber: 9\n      }, this), isEditing && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"photo-upload\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          ref: fileInputRef,\n          type: \"file\",\n          id: \"catering-photo-upload\",\n          accept: \"image/*\",\n          onChange: handlePhotoUpload,\n          disabled: uploading,\n          style: {\n            display: 'none'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 615,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"catering-photo-upload\",\n          className: \"upload-button\",\n          children: uploading ? 'Uploading...' : 'Add Photo to Gallery'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 624,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"upload-hint\",\n          children: \"Upload high-quality images of your dishes and service.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 627,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 614,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 583,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 454,\n    columnNumber: 5\n  }, this);\n};\n_s2(CateringService, \"KSDgVuIZNoaBwiR5VEk9u+h2Elw=\");\n_c2 = CateringService;\nexport default CateringService;\nvar _c, _c2;\n$RefreshReg$(_c, \"SimpleTextEditor\");\n$RefreshReg$(_c2, \"CateringService\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","ReactMarkdown","supabase","FaCheckCircle","FaTimesCircle","FaInfoCircle","jsxDEV","_jsxDEV","Fragment","_Fragment","SimpleTextEditor","value","onChange","placeholder","height","_s","textareaRef","handleChange","e","target","applyFormat","format","textarea","current","start","selectionStart","end","selectionEnd","selectedText","substring","newValue","newCursorPos","setTimeout","focus","className","children","type","onClick","title","fileName","_jsxFileName","lineNumber","columnNumber","ref","style","minHeight","_c","CateringService","vendorId","isReadOnly","_s2","isEditing","setIsEditing","isLoading","setIsLoading","photos","setPhotos","uploading","setUploading","toast","setToast","toastTimeout","fileInputRef","formData","setFormData","service_description","catering_types","menu_options","dietary_options","base_rate","additional_rates","showToast","message","clearTimeout","closeToast","fetchCateringData","data","error","from","select","eq","single","code","console","field","prev","handleSubmit","preventDefault","serviceData","vendor_id","service_type","updated_at","Date","toISOString","existingService","updateError","update","id","saveError","upsert","onConflict","details","hint","handlePhotoUpload","file","files","startsWith","size","user","userError","auth","getUser","Error","filePath","now","name","uploadError","storage","upload","cacheControl","contentType","metadata","uploaded_by","uploaded_at","includes","publicUrl","getPublicUrl","newPhoto","url","path","created_at","currentPhotos","updatedPhotos","insertError","insert","handleDeletePhoto","photoUrl","window","confirm","photoToDelete","find","p","deleteError","remove","fetchError","filter","ToastNotification","iconMap","success","info","form","onSubmit","v","marginTop","length","map","photo","index","src","getTime","alt","loading","accept","disabled","display","htmlFor","_c2","$RefreshReg$"],"sources":["C:/Users/Ammaarah/EventuallyPerfect/QUANTIX/frontend/src/components/services/CateringService.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from 'react';\r\nimport ReactMarkdown from 'react-markdown';\r\nimport { supabase } from '../../client';\r\nimport { FaCheckCircle, FaTimesCircle, FaInfoCircle } from 'react-icons/fa';\r\nimport './CateringService.css';\r\n\r\n// Simple Text Editor Component\r\nconst SimpleTextEditor = ({ value, onChange, placeholder, height = '150px' }) => {\r\n  const textareaRef = useRef(null);\r\n  \r\n  const handleChange = (e) => {\r\n    onChange(e.target.value);\r\n  };\r\n\r\n  const applyFormat = (format) => {\r\n    const textarea = textareaRef.current;\r\n    if (!textarea) return;\r\n\r\n    const start = textarea.selectionStart;\r\n    const end = textarea.selectionEnd;\r\n    const selectedText = value.substring(start, end);\r\n    let newValue = value;\r\n    let newCursorPos = end;\r\n\r\n    switch(format) {\r\n      case 'bold':\r\n        newValue = value.substring(0, start) + `**${selectedText}**` + value.substring(end);\r\n        newCursorPos = selectedText ? end + 4 : start + 2;\r\n        break;\r\n      case 'italic':\r\n        newValue = value.substring(0, start) + `*${selectedText}*` + value.substring(end);\r\n        newCursorPos = selectedText ? end + 2 : start + 1;\r\n        break;\r\n      case 'bullet':\r\n        newValue = value.substring(0, start) + `- ${selectedText}` + value.substring(end);\r\n        newCursorPos = selectedText ? end + 2 : start + 2;\r\n        break;\r\n      case 'number':\r\n        newValue = value.substring(0, start) + `1. ${selectedText}` + value.substring(end);\r\n        newCursorPos = selectedText ? end + 3 : start + 3;\r\n        break;\r\n      default:\r\n        return;\r\n    }\r\n\r\n    onChange(newValue);\r\n    \r\n    setTimeout(() => {\r\n      textarea.selectionStart = textarea.selectionEnd = newCursorPos;\r\n      textarea.focus();\r\n    }, 0);\r\n  };\r\n\r\n  return (\r\n    <div className=\"text-editor-wrapper\">\r\n      <div className=\"editor-toolbar\">\r\n        <button \r\n          type=\"button\" \r\n          onClick={() => applyFormat('bold')} \r\n          title=\"Bold\" \r\n          className=\"format-button\"\r\n        >\r\n          <strong>B</strong>\r\n        </button>\r\n        <button \r\n          type=\"button\" \r\n          onClick={() => applyFormat('italic')} \r\n          title=\"Italic\" \r\n          className=\"format-button\"\r\n        >\r\n          <em>I</em>\r\n        </button>\r\n        <button \r\n          type=\"button\" \r\n          onClick={() => applyFormat('bullet')} \r\n          title=\"Bullet List\" \r\n          className=\"format-button\"\r\n        >\r\n          •\r\n        </button>\r\n        <button \r\n          type=\"button\" \r\n          onClick={() => applyFormat('number')} \r\n          title=\"Numbered List\" \r\n          className=\"format-button\"\r\n        >\r\n          1.\r\n        </button>\r\n      </div>\r\n      <textarea\r\n        ref={textareaRef}\r\n        className=\"simple-textarea\"\r\n        value={value || ''}\r\n        onChange={handleChange}\r\n        placeholder={placeholder}\r\n        style={{ minHeight: height }}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nconst CateringService = ({ vendorId, isReadOnly }) => {\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [photos, setPhotos] = useState([]);\r\n  const [uploading, setUploading] = useState(false);\r\n  const [toast, setToast] = useState(null);\r\n  const toastTimeout = useRef(null);\r\n  const fileInputRef = useRef(null);\r\n\r\n  const [formData, setFormData] = useState({\r\n    service_description: '',\r\n    catering_types: '',\r\n    menu_options: '',\r\n    dietary_options: '',\r\n    base_rate: '',\r\n    additional_rates: ''\r\n  });\r\n\r\n  // Show toast notification\r\n  const showToast = (message, type = 'info') => {\r\n    if (toastTimeout.current) clearTimeout(toastTimeout.current);\r\n    setToast({ message, type });\r\n    toastTimeout.current = setTimeout(() => setToast(null), 5000);\r\n  };\r\n\r\n  // Close toast manually\r\n  const closeToast = () => {\r\n    if (toastTimeout.current) clearTimeout(toastTimeout.current);\r\n    setToast(null);\r\n  };\r\n\r\n  // Cleanup timeout on unmount\r\n  useEffect(() => {\r\n    return () => {\r\n      if (toastTimeout.current) clearTimeout(toastTimeout.current);\r\n    };\r\n  }, []);\r\n\r\n  // Fetch catering service data\r\n  const fetchCateringData = useCallback(async () => {\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from('vendor_services')\r\n        .select('*')\r\n        .eq('vendor_id', vendorId)\r\n        .eq('service_type', 'catering')\r\n        .single();\r\n\r\n      if (error && error.code !== 'PGRST116') { // PGRST116 is the code for no rows returned\r\n        throw error;\r\n      }\r\n\r\n      if (data) {\r\n        setFormData({\r\n          service_description: data.service_description || '',\r\n          catering_types: data.catering_types || '',\r\n          menu_options: data.menu_options || '',\r\n          dietary_options: data.dietary_options || '',\r\n          base_rate: data.base_rate || '',\r\n          additional_rates: data.additional_rates || ''\r\n        });\r\n        setPhotos(data.photos || []);\r\n      } else {\r\n        // Initialize with empty values if no data found\r\n        setFormData({\r\n          service_description: '',\r\n          catering_types: '',\r\n          menu_options: '',\r\n          dietary_options: '',\r\n          base_rate: '',\r\n          additional_rates: ''\r\n        });\r\n        setPhotos([]);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error in fetchCateringData:', error);\r\n      showToast('Error loading catering data. Please refresh.', 'error');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, [vendorId]); // Add vendorId as a dependency\r\n\r\n  useEffect(() => {\r\n    fetchCateringData();\r\n  }, [vendorId, fetchCateringData]);\r\n\r\n  const handleChange = (value, field) => {\r\n    setFormData(prev => ({ ...prev, [field]: value }));\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    if (e) e.preventDefault();\r\n    \r\n    try {\r\n      // Prepare the data to be saved\r\n      const serviceData = {\r\n        vendor_id: vendorId,\r\n        service_type: 'catering',\r\n        service_description: formData.service_description || '',\r\n        catering_types: formData.catering_types || '',\r\n        menu_options: formData.menu_options || '',\r\n        dietary_options: formData.dietary_options || '',\r\n        base_rate: formData.base_rate || '',\r\n        additional_rates: formData.additional_rates || '',\r\n        photos: photos, // Include the photos array\r\n        updated_at: new Date().toISOString()\r\n      };\r\n\r\n      // Check if the record exists\r\n      const { data: existingService } = await supabase\r\n        .from('vendor_services')\r\n        .select('id')\r\n        .eq('vendor_id', vendorId)\r\n        .eq('service_type', 'catering')\r\n        .single();\r\n\r\n      let error;\r\n\r\n      if (existingService) {\r\n        // Update existing record\r\n        const { error: updateError } = await supabase\r\n          .from('vendor_services')\r\n          .update(serviceData)\r\n          .eq('id', existingService.id)\r\n          .select()\r\n          .single();\r\n\r\n        // Data is saved, no need to store it\r\n        error = updateError;\r\n      } else {\r\n        // Insert new record\r\n        const { error: saveError } = await supabase\r\n          .from('vendor_services')\r\n          .upsert([{\r\n            ...(existingService ? { id: existingService.id } : {}),\r\n            vendor_id: vendorId,\r\n            service_type: 'catering',\r\n            ...formData,\r\n            updated_at: new Date().toISOString()\r\n          }], { onConflict: 'vendor_id,service_type' });\r\n\r\n        error = saveError;\r\n      }\r\n\r\n      if (error) {\r\n        console.error('Database error:', {\r\n          message: error.message,\r\n          details: error.details,\r\n          hint: error.hint,\r\n          code: error.code\r\n        });\r\n        throw error;\r\n      }\r\n\r\n      setIsEditing(false);\r\n      showToast('Catering service saved successfully!', 'success');\r\n      fetchCateringData(); // Refresh data\r\n    } catch (error) {\r\n      console.error('Error in handleSubmit:', error);\r\n      showToast(`Failed to save catering service: ${error.message}`, 'error');\r\n    }\r\n  };\r\n\r\n  const handlePhotoUpload = async (e) => {\r\n    const file = e.target.files[0];\r\n    if (!file) return;\r\n\r\n    if (!file.type.startsWith('image/')) {\r\n      showToast('Please upload an image file', 'error');\r\n      return;\r\n    }\r\n    \r\n    // Check file size (5MB limit)\r\n    if (file.size > 5 * 1024 * 1024) {\r\n      showToast('File size too large. Maximum size is 5MB.', 'error');\r\n      return;\r\n    }\r\n    \r\n    setUploading(true);\r\n\r\n    try {\r\n      // Skip bucket existence check and try to upload directly\r\n      // The RLS policies will handle the permission check\r\n\r\n      // Get the current user\r\n      const { data: { user }, error: userError } = await supabase.auth.getUser();\r\n      \r\n      if (userError || !user) {\r\n        throw new Error('You must be logged in to upload photos.');\r\n      }\r\n\r\n      // Create file path that matches the RLS policy\r\n      // The RLS expects the first folder to be the user's ID\r\n      const filePath = `${user.id}/catering/${Date.now()}-${file.name}`;\r\n\r\n      // Upload the file to storage with proper error handling\r\n      const { error: uploadError } = await supabase.storage\r\n        .from('portfolio-photos')\r\n        .upload(filePath, file, {\r\n          cacheControl: '3600',\r\n          upsert: false,\r\n          contentType: file.type,\r\n          metadata: {\r\n            uploaded_by: user.id,\r\n            uploaded_at: new Date().toISOString(),\r\n            vendor_id: vendorId  // Store the vendor ID in metadata for reference\r\n          }\r\n        });\r\n\r\n      if (uploadError) {\r\n        console.error('Upload error:', uploadError);\r\n        // If the error is about RLS, provide a more helpful message\r\n        if (uploadError.message.includes('row-level security')) {\r\n          throw new Error('Permission denied. Please make sure you are logged in and have the necessary permissions.');\r\n        }\r\n        throw uploadError;\r\n      }\r\n\r\n      // 2. Get the public URL\r\n      const { data: { publicUrl } } = supabase.storage\r\n        .from('portfolio-photos')\r\n        .getPublicUrl(filePath);\r\n\r\n      // 3. Create the new photo object\r\n      const newPhoto = {\r\n        url: publicUrl,\r\n        path: filePath,\r\n        created_at: new Date().toISOString()\r\n      };\r\n\r\n      // 4. Get the existing service record\r\n      const { data: existingService } = await supabase\r\n        .from('vendor_services')\r\n        .select('id, photos')\r\n        .eq('vendor_id', vendorId)\r\n        .eq('service_type', 'catering')\r\n        .single();\r\n\r\n      const currentPhotos = existingService?.photos || [];\r\n      const updatedPhotos = [...currentPhotos, newPhoto];\r\n\r\n      // 5. Update or create the service record with the new photos array\r\n      if (existingService) {\r\n        // Update existing record\r\n        const { error: updateError } = await supabase\r\n          .from('vendor_services')\r\n          .update({ \r\n            photos: updatedPhotos,\r\n            updated_at: new Date().toISOString()\r\n          })\r\n          .eq('id', existingService.id);\r\n\r\n        if (updateError) throw updateError;\r\n      } else {\r\n        // Create new record\r\n        const { error: insertError } = await supabase\r\n          .from('vendor_services')\r\n          .insert([{\r\n            vendor_id: vendorId,\r\n            service_type: 'catering',\r\n            photos: updatedPhotos,\r\n            created_at: new Date().toISOString(),\r\n            updated_at: new Date().toISOString()\r\n          }]);\r\n\r\n        if (insertError) throw insertError;\r\n      }\r\n\r\n      // 6. Update local state\r\n      setPhotos(updatedPhotos);\r\n      e.target.value = null;\r\n      showToast('Photo uploaded successfully!', 'success');\r\n    } catch (error) {\r\n      console.error('Error uploading photo:', error);\r\n      showToast('Failed to upload photo. Please try again.', 'error');\r\n    } finally {\r\n      setUploading(false);\r\n    }\r\n  };\r\n\r\n  const handleDeletePhoto = async (photoUrl) => {\r\n    if (!window.confirm('Are you sure you want to delete this photo?')) return;\r\n\r\n    try {\r\n      // 1. Find the photo in the current photos array to get its path\r\n      const photoToDelete = photos.find(p => p.url === photoUrl);\r\n      if (!photoToDelete) throw new Error('Photo not found');\r\n\r\n      // 2. Delete from storage\r\n      const { error: deleteError } = await supabase.storage\r\n        .from('portfolio-photos')\r\n        .remove([photoToDelete.path]);\r\n\r\n      if (deleteError) throw deleteError;\r\n\r\n      // 3. Get the existing service record\r\n      const { data: existingService, error: fetchError } = await supabase\r\n        .from('vendor_services')\r\n        .select('id')\r\n        .eq('vendor_id', vendorId)\r\n        .eq('service_type', 'catering')\r\n        .single();\r\n\r\n      if (fetchError) throw fetchError;\r\n      if (!existingService) throw new Error('Service record not found');\r\n\r\n      // 4. Update the database to remove the photo\r\n      const updatedPhotos = photos.filter(p => p.url !== photoUrl);\r\n      \r\n      const { error: updateError } = await supabase\r\n        .from('vendor_services')\r\n        .update({ \r\n          photos: updatedPhotos,\r\n          updated_at: new Date().toISOString()\r\n        })\r\n        .eq('id', existingService.id);\r\n\r\n      if (updateError) throw updateError;\r\n\r\n      // 5. Update local state\r\n      setPhotos(updatedPhotos);\r\n      showToast('Photo deleted successfully!', 'success');\r\n    } catch (error) {\r\n      console.error('Error deleting photo:', error);\r\n      showToast('Failed to delete photo. Please try again.', 'error');\r\n    }\r\n  };\r\n\r\n  // Toast Notification Component\r\n  const ToastNotification = () => {\r\n    if (!toast) return null;\r\n    const iconMap = {\r\n      success: <FaCheckCircle className=\"toast-icon\" />,\r\n      error: <FaTimesCircle className=\"toast-icon\" />,\r\n      info: <FaInfoCircle className=\"toast-icon\" />\r\n    };\r\n    return (\r\n      <div className={`toast-notification ${toast.type}`}>\r\n        {iconMap[toast.type]}\r\n        <span className=\"toast-message\">{toast.message}</span>\r\n        <button onClick={closeToast} className=\"toast-close\" aria-label=\"Close notification\">\r\n          &times;\r\n        </button>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  if (isLoading) {\r\n    return <div className=\"loading\">Loading catering services...</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"catering-service\">\r\n      {toast && <ToastNotification />}\r\n      <div className=\"service-content\">\r\n        <div className=\"service-header\">\r\n          <h3>Catering Service</h3>\r\n          {isEditing ? (\r\n            <div className=\"form-actions\">\r\n              <button\r\n                type=\"button\"\r\n                className=\"cancel-button\"\r\n                onClick={() => {\r\n                  setIsEditing(false);\r\n                  fetchCateringData();\r\n                }}\r\n              >\r\n                Cancel\r\n              </button>\r\n              <button type=\"submit\" className=\"save-button\" form=\"service-form\">\r\n                Save Changes\r\n              </button>\r\n            </div>\r\n          ) : !isReadOnly && (\r\n            <button\r\n              type=\"button\"\r\n              className=\"edit-button\"\r\n              onClick={() => setIsEditing(true)}\r\n            >\r\n              Edit Service\r\n            </button>\r\n          )}\r\n        </div>\r\n\r\n        {isEditing ? (\r\n          <form onSubmit={handleSubmit} id=\"service-form\" className=\"service-form\">\r\n            <div className=\"rich-text-group\">\r\n              <label>Service Description</label>\r\n              <SimpleTextEditor\r\n                value={formData.service_description}\r\n                onChange={(v) => handleChange(v, 'service_description')}\r\n                placeholder=\"Describe your catering service...\"\r\n              />\r\n            </div>\r\n            <div className=\"rich-text-group\">\r\n              <label>Catering Types</label>\r\n              <SimpleTextEditor\r\n                value={formData.catering_types}\r\n                onChange={(v) => handleChange(v, 'catering_types')}\r\n                placeholder=\"e.g., Buffet, Plated, Family Style...\"\r\n              />\r\n            </div>\r\n            <div className=\"rich-text-group\">\r\n              <label>Menu Options</label>\r\n              <SimpleTextEditor\r\n                value={formData.menu_options}\r\n                onChange={(v) => handleChange(v, 'menu_options')}\r\n                placeholder=\"Describe your menu options and specialties...\"\r\n              />\r\n            </div>\r\n            <div className=\"rich-text-group\">\r\n              <label>Dietary Options</label>\r\n              <SimpleTextEditor\r\n                value={formData.dietary_options}\r\n                onChange={(v) => handleChange(v, 'dietary_options')}\r\n                placeholder=\"e.g., Vegetarian, Vegan, Gluten-Free...\"\r\n              />\r\n            </div>\r\n            <div className=\"rich-text-group\">\r\n              <label>Base Rate</label>\r\n              <SimpleTextEditor\r\n                value={formData.base_rate}\r\n                onChange={(v) => handleChange(v, 'base_rate')}\r\n                placeholder=\"e.g., $50 per person, $1000 minimum...\"\r\n                height=\"100px\"\r\n              />\r\n            </div>\r\n            <div className=\"rich-text-group\">\r\n              <label>Additional Pricing & Packages</label>\r\n              <SimpleTextEditor\r\n                value={formData.additional_rates}\r\n                onChange={(v) => handleChange(v, 'additional_rates')}\r\n                placeholder=\"List any additional rates or packages...\"\r\n              />\r\n            </div>\r\n          </form>\r\n        ) : (\r\n          <div className=\"service-details\">\r\n            <div className=\"service-section\">\r\n              <h4>Service Description</h4>\r\n              <div className=\"markdown-content\">\r\n                <ReactMarkdown>{formData.service_description || 'No description provided.'}</ReactMarkdown>\r\n              </div>\r\n            </div>\r\n            <div className=\"service-section\">\r\n              <h4>Catering Types</h4>\r\n              <div className=\"markdown-content\">\r\n                <ReactMarkdown>{formData.catering_types || 'No catering types specified.'}</ReactMarkdown>\r\n              </div>\r\n            </div>\r\n            <div className=\"service-section\">\r\n              <h4>Menu Options</h4>\r\n              <div className=\"markdown-content\">\r\n                <ReactMarkdown>{formData.menu_options || 'No menu options provided.'}</ReactMarkdown>\r\n              </div>\r\n            </div>\r\n            <div className=\"service-section\">\r\n              <h4>Dietary Options</h4>\r\n              <div className=\"markdown-content\">\r\n                <ReactMarkdown>{formData.dietary_options || 'No dietary options specified.'}</ReactMarkdown>\r\n              </div>\r\n            </div>\r\n            <div className=\"service-section\">\r\n              <h4>Pricing</h4>\r\n              <h5>Base Rate</h5>\r\n              <div className=\"markdown-content\">\r\n                <ReactMarkdown>{formData.base_rate || 'No base rate specified.'}</ReactMarkdown>\r\n              </div>\r\n              {formData.additional_rates && (\r\n                <>\r\n                  <h5 style={{ marginTop: '15px' }}>Additional Rates & Packages</h5>\r\n                  <div className=\"markdown-content\">\r\n                    <ReactMarkdown>{formData.additional_rates}</ReactMarkdown>\r\n                  </div>\r\n                </>\r\n              )}\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      <div className=\"service-images\">\r\n        <h4>Food Gallery</h4>\r\n        <div className=\"portfolio-grid\">\r\n          {photos && photos.length > 0 ? (\r\n            photos.map((photo, index) => (\r\n              <div key={photo.url} className=\"portfolio-photo\">\r\n                <img\r\n                  src={`${photo.url}?t=${new Date().getTime()}`}\r\n                  alt={`Catering gallery ${index + 1}`}\r\n                  className=\"portfolio-image\"\r\n                  loading=\"lazy\"\r\n                />\r\n                {isEditing && (\r\n                  <button\r\n                    className=\"delete-photo\"\r\n                    onClick={() => handleDeletePhoto(photo.url)}\r\n                    aria-label=\"Delete photo\"\r\n                  >\r\n                    &times;\r\n                  </button>\r\n                )}\r\n              </div>\r\n            ))\r\n          ) : (\r\n            <div className=\"no-photos-container\">\r\n              <span className=\"no-photos\">No food photos added yet</span>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {isEditing && (\r\n          <div className=\"photo-upload\">\r\n            <input\r\n              ref={fileInputRef}\r\n              type=\"file\"\r\n              id=\"catering-photo-upload\"\r\n              accept=\"image/*\"\r\n              onChange={handlePhotoUpload}\r\n              disabled={uploading}\r\n              style={{ display: 'none' }}\r\n            />\r\n            <label htmlFor=\"catering-photo-upload\" className=\"upload-button\">\r\n              {uploading ? 'Uploading...' : 'Add Photo to Gallery'}\r\n            </label>\r\n            <p className=\"upload-hint\">Upload high-quality images of your dishes and service.</p>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CateringService;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}