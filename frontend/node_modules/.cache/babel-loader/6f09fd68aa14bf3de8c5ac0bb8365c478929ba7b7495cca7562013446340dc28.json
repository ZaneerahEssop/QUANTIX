{"ast":null,"code":"import _objectSpread from\"C:/Users/Ammaarah/EventuallyPerfect/QUANTIX/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useCallback,useEffect,useRef,useState}from\"react\";import{FaArrowLeft,FaCalendarAlt,FaCheck,FaClock,FaEdit,FaEnvelope,FaFilePdf,FaMapMarkerAlt,FaPlus,FaSave,FaSearch,FaStar,FaTimes,FaTrash,FaUpload}from\"react-icons/fa\";import{useNavigate,useParams}from\"react-router-dom\";import{supabase}from\"../client\";import\"../styling/eventDetails.css\";// --- Sub-components (EventSchedule, EventTheme) are unchanged ---\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const EventSchedule=_ref=>{let{schedule,onUpdate,isEditing}=_ref;const handleAddItem=()=>onUpdate([...(schedule||[]),{time:\"\",activity:\"\"}]);const handleRemoveItem=index=>onUpdate((schedule||[]).filter((_,i)=>i!==index));const handleItemChange=(index,field,value)=>{const newSchedule=[...(schedule||[])];newSchedule[index][field]=value;onUpdate(newSchedule);};return/*#__PURE__*/_jsxs(\"div\",{className:\"schedule-section\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"section-header\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Schedule\"})}),isEditing?/*#__PURE__*/_jsxs(_Fragment,{children:[(schedule||[]).map((item,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"schedule-item editable\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"time\",value:item.time,onChange:e=>handleItemChange(index,\"time\",e.target.value)}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:item.activity,onChange:e=>handleItemChange(index,\"activity\",e.target.value),placeholder:\"Activity\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleRemoveItem(index),className:\"remove-btn\",children:/*#__PURE__*/_jsx(FaTrash,{})})]},index)),/*#__PURE__*/_jsxs(\"button\",{onClick:handleAddItem,className:\"add-btn\",children:[/*#__PURE__*/_jsx(FaPlus,{}),\" Add Activity\"]})]}):/*#__PURE__*/_jsx(\"div\",{className:\"schedule-list\",children:schedule&&schedule.length>0?schedule.map((item,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"schedule-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"schedule-time\",children:item.time}),/*#__PURE__*/_jsx(\"span\",{className:\"schedule-activity\",children:item.activity})]},index)):/*#__PURE__*/_jsx(\"p\",{children:\"No schedule items have been added yet.\"})})]});};const EventTheme=_ref2=>{let{theme,onUpdate,isEditing=true}=_ref2;const safeTheme=typeof theme===\"string\"?(()=>{try{return JSON.parse(theme);}catch(e){return{name:\"\",colors:[],notes:\"\"};}})():theme||{name:\"\",colors:[],notes:\"\"};const handleChange=(field,value)=>{onUpdate(_objectSpread(_objectSpread({},safeTheme),{},{[field]:value}));};const handleColorChange=(index,value)=>{const newColors=[...(safeTheme.colors||[])];newColors[index]=value;onUpdate(_objectSpread(_objectSpread({},safeTheme),{},{colors:newColors}));};const addColor=()=>{onUpdate(_objectSpread(_objectSpread({},safeTheme),{},{colors:[...(safeTheme.colors||[]),\"#ffffff\"]}));};const removeColor=index=>{onUpdate(_objectSpread(_objectSpread({},safeTheme),{},{colors:(safeTheme.colors||[]).filter((_,i)=>i!==index)}));};return/*#__PURE__*/_jsxs(\"div\",{className:\"theme-section\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"section-header\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Event Theme\"})}),isEditing?/*#__PURE__*/_jsxs(\"div\",{className:\"theme-editor\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Theme Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:safeTheme.name||\"\",onChange:e=>handleChange(\"name\",e.target.value),placeholder:\"Enter theme name\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Colors\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"color-palette\",children:[safeTheme.colors&&safeTheme.colors.map((color,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"color-item\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"color\",value:color,onChange:e=>handleColorChange(index,e.target.value)}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>removeColor(index),className:\"remove-color\",children:/*#__PURE__*/_jsx(FaTimes,{})})]},index)),/*#__PURE__*/_jsxs(\"button\",{onClick:addColor,className:\"add-color\",children:[/*#__PURE__*/_jsx(FaPlus,{}),\" Add Color\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Theme Notes\"}),/*#__PURE__*/_jsx(\"textarea\",{value:safeTheme.notes||\"\",onChange:e=>handleChange(\"notes\",e.target.value),placeholder:\"Add notes about your theme...\",rows:\"3\"})]})]}):/*#__PURE__*/_jsx(\"div\",{className:\"theme-display\",children:safeTheme.name?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h3\",{children:safeTheme.name}),safeTheme.colors&&safeTheme.colors.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"color-palette-display\",children:safeTheme.colors.map((color,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"color-swatch\",style:{backgroundColor:color},title:color},index))}),safeTheme.notes&&/*#__PURE__*/_jsx(\"p\",{children:safeTheme.notes})]}):/*#__PURE__*/_jsx(\"p\",{children:\"No theme has been set for this event.\"})})]});};const GuestManagement=_ref3=>{let{guests,onUpdate,isEditing,eventData,API_URL}=_ref3;const[newGuest,setNewGuest]=useState({name:\"\",contact:\"\",dietary:\"\",rsvpStatus:\"pending\"});const handleAddGuest=()=>{if(newGuest.name.trim()!==\"\"){onUpdate([...(guests||[]),_objectSpread(_objectSpread({},newGuest),{},{id:Date.now()})]);setNewGuest({name:\"\",contact:\"\",dietary:\"\",rsvpStatus:\"pending\"});}};const handleUpdateGuest=(guestId,field,value)=>onUpdate((guests||[]).map(g=>g.id===guestId?_objectSpread(_objectSpread({},g),{},{[field]:value}):g));const handleRemoveGuest=guestId=>onUpdate((guests||[]).filter(g=>g.id!==guestId));const handleSendInvite=async guest=>{alert(\"Email functionality is temporarily disabled. Guest \".concat(guest.name,\" (\").concat(guest.contact,\") would receive an invitation to \").concat((eventData===null||eventData===void 0?void 0:eventData.name)||\"the event\",\".\"));};return/*#__PURE__*/_jsxs(\"div\",{className:\"guests-section\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"section-header\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Guest Management\"})}),isEditing&&/*#__PURE__*/_jsxs(\"div\",{className:\"add-guest-form\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Guest Name\",value:newGuest.name,onChange:e=>setNewGuest(_objectSpread(_objectSpread({},newGuest),{},{name:e.target.value}))}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"Email\",value:newGuest.contact,onChange:e=>setNewGuest(_objectSpread(_objectSpread({},newGuest),{},{contact:e.target.value}))}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Dietary Requirements\",value:newGuest.dietary,onChange:e=>setNewGuest(_objectSpread(_objectSpread({},newGuest),{},{dietary:e.target.value}))}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleAddGuest,children:[/*#__PURE__*/_jsx(FaPlus,{}),\" Add Guest\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"guest-list\",children:guests&&guests.length>0?/*#__PURE__*/_jsx(\"ul\",{children:guests.map(guest=>/*#__PURE__*/_jsxs(\"li\",{className:\"guest-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"guest-info\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:guest.name}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"small\",{children:guest.contact}),/*#__PURE__*/_jsx(\"br\",{}),guest.dietary&&/*#__PURE__*/_jsxs(\"small\",{children:[\"Dietary: \",guest.dietary]})]})}),!isEditing&&/*#__PURE__*/_jsxs(\"div\",{className:\"guest-actions view-mode\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleSendInvite(guest),title:\"Send invite\",className:\"send-invite-btn\",children:[/*#__PURE__*/_jsx(FaEnvelope,{}),\" Send Invite\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"rsvp-controls\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"RSVP:\"}),/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:guest.rsvpStatus===\"attending\",onChange:()=>{const newStatus=guest.rsvpStatus===\"attending\"?\"pending\":\"attending\";handleUpdateGuest(guest.id,\"rsvpStatus\",newStatus);}}),\" \",\"Yes\"]}),/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:guest.rsvpStatus===\"declined\",onChange:()=>{const newStatus=guest.rsvpStatus===\"declined\"?\"pending\":\"declined\";handleUpdateGuest(guest.id,\"rsvpStatus\",newStatus);}}),\" \",\"No\"]})]})]}),isEditing&&/*#__PURE__*/_jsx(\"div\",{className:\"guest-actions\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleRemoveGuest(guest.id),className:\"delete-guest\",title:\"Remove guest\",children:/*#__PURE__*/_jsx(FaTrash,{})})})]},guest.id))}):/*#__PURE__*/_jsx(\"p\",{children:\"No guests have been added yet.\"})})]});};// Main EventDetails component\nconst EventDetails=()=>{var _eventData$theme;const{id}=useParams();const searchParams=new URLSearchParams(window.location.search);const isReadOnly=searchParams.get(\"readonly\")===\"true\";const eventId=id;const navigate=useNavigate();// Function to handle vendor card click\nconst handleVendorCardClick=vendorId=>{navigate(\"/vendors/\".concat(vendorId,\"/services?readonly=true\"));};const[eventData,setEventData]=useState(null);const[isEditing,setIsEditing]=useState(false);useEffect(()=>{if(isReadOnly){setIsEditing(false);}},[isReadOnly]);const[isLoading,setIsLoading]=useState(true);const[activeView,setActiveView]=useState(\"overview\");const[formData,setFormData]=useState({name:\"\",date:\"\",time:\"\",venue:\"\",notes:\"\"});const[vendors,setVendors]=useState([]);const[searchTerm,setSearchTerm]=useState(\"\");const[selectedCategory,setSelectedCategory]=useState(\"All\");const[selectedVendors,setSelectedVendors]=useState([]);const[documents,setDocuments]=useState([]);const[schedule,setSchedule]=useState([]);const[guests,setGuests]=useState([]);const initialGuestsRef=useRef([]);const[isUploading,setIsUploading]=useState(false);const[uploadProgress,setUploadProgress]=useState(0);const[theme,setTheme]=useState({name:\"\",colors:[],notes:\"\"});const API_URL=window.location.hostname===\"production\"?\"https://soothing-manifestation-production.up.railway.app\":\"http://localhost:5000\";const formatGuestStatusForUI=dbStatus=>{if(dbStatus===\"Attending\")return\"attending\";if(dbStatus===\"Declined\")return\"declined\";return\"pending\";};const formatGuestStatusForDB=uiStatus=>{if(uiStatus===\"attending\")return\"Attending\";if(uiStatus===\"declined\")return\"Declined\";return\"Pending\";};const fetchVendors=useCallback(async()=>{try{const{data:{session}}=await supabase.auth.getSession();if(!session)return;const response=await fetch(\"\".concat(API_URL,\"/api/vendors\"),{headers:{\"Content-Type\":\"application/json\",Accept:\"application/json\",Authorization:\"Bearer \".concat(session.access_token)}});if(!response.ok){throw new Error(\"Failed to fetch vendors\");}const data=await response.json();if(Array.isArray(data)){setVendors(data);}}catch(error){console.error(\"Error fetching vendors:\",error);}},[API_URL]);useEffect(()=>{fetchVendors();},[fetchVendors]);useEffect(()=>{const fetchData=async()=>{setIsLoading(true);try{const{data:{user}}=await supabase.auth.getUser();if(!user){navigate(\"/login\");return;}const eventResponse=await fetch(\"\".concat(API_URL,\"/api/events/id/\").concat(eventId));if(!eventResponse.ok)throw new Error(\"Failed to fetch event\");const fetchedEventData=await eventResponse.json();if(!fetchedEventData){console.error(\"Event not found\");setEventData(null);return;}const guestsResponse=await fetch(\"\".concat(API_URL,\"/api/guests/\").concat(eventId));if(!guestsResponse.ok)throw new Error(\"Failed to fetch guests\");const guestsData=await guestsResponse.json();const formattedGuests=guestsData.map(g=>({id:g.guest_id,name:g.name,contact:g.email||\"\",dietary:g.dietary_info||\"\",rsvpStatus:formatGuestStatusForUI(g.rsvp_status)}));setGuests(formattedGuests);initialGuestsRef.current=formattedGuests;setEventData(fetchedEventData);setSchedule(fetchedEventData.schedule||[]);let themeData=fetchedEventData.theme;// If theme is a string, parse it\nif(typeof themeData===\"string\"){try{themeData=JSON.parse(themeData);}catch(e){console.error(\"Error parsing theme string:\",e);themeData={name:\"\",colors:[],notes:\"\"};}}// If theme is an object but corrupted, clean it\nif(themeData&&typeof themeData===\"object\"){const hasCorruptedProperties=Object.keys(themeData).some(key=>!isNaN(parseInt(key))&&themeData[key]!==undefined);if(hasCorruptedProperties){themeData={name:themeData.name||\"\",colors:Array.isArray(themeData.colors)?themeData.colors:[],notes:themeData.notes||\"\"};}}setTheme(themeData||{name:\"\",colors:[],notes:\"\"});setDocuments(fetchedEventData.documents||[]);setSelectedVendors(fetchedEventData.vendors||[]);const startTime=new Date(fetchedEventData.start_time);const date=startTime.toISOString().split(\"T\")[0];const time=startTime.toTimeString().substring(0,5);setFormData({name:fetchedEventData.name||\"\",date,time,venue:fetchedEventData.venue||\"\",notes:fetchedEventData.notes||\"\"});}catch(error){console.error(\"Error loading data:\",error);}finally{setIsLoading(false);}};fetchData();},[eventId,navigate,API_URL]);const API_BASE=process.env.REACT_APP_BASE_URL||\"http://localhost:5000\";const[vendorRequests,setVendorRequests]=useState([]);useEffect(()=>{const fetchVendorRequests=async()=>{try{if(!eventId)return;const response=await fetch(\"\".concat(API_BASE,\"/api/vendor-requests/event/\").concat(eventId));if(response.ok){const requestsData=await response.json();setVendorRequests(requestsData||[]);}}catch(error){console.error(\"Error fetching vendor requests:\",error);}};fetchVendorRequests();},[eventId,API_BASE]);const handleVendorRequestResponse=async(requestId,status)=>{try{const response=await fetch(\"\".concat(API_BASE,\"/api/vendor-requests/\").concat(requestId),{method:\"PUT\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({status})});if(response.ok){setVendorRequests(prev=>prev.map(req=>req.request_id===requestId?_objectSpread(_objectSpread({},req),{},{status}):req));if(status===\"accepted\"){const request=vendorRequests.find(req=>req.request_id===requestId);if(request&&request.vendor_id){setSelectedVendors(prev=>[...prev,request.vendor_id]);}}alert(\"Vendor request \".concat(status,\" successfully!\"));}}catch(error){console.error(\"Error updating vendor request:\",error);alert(\"Failed to update vendor request.\");}};const handleInputChange=e=>{const{name,value}=e.target;setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:value}));};const handleGuestUpdates=async()=>{const currentGuestsMap=new Map(guests.map(g=>[g.id,g]));const promises=[];for(const initialGuest of initialGuestsRef.current){if(!currentGuestsMap.has(initialGuest.id)){promises.push(fetch(\"\".concat(API_URL,\"/api/guests/\").concat(eventId,\"/\").concat(initialGuest.id),{method:\"DELETE\"}));}}for(const currentGuest of guests){const payload={name:currentGuest.name,email:currentGuest.contact,rsvp_status:formatGuestStatusForDB(currentGuest.rsvpStatus),dietary_info:currentGuest.dietary};if(typeof currentGuest.id===\"number\"){promises.push(fetch(\"\".concat(API_URL,\"/api/guests/\").concat(eventId),{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(payload)}));}else{const initialGuest=initialGuestsRef.current.find(g=>g.id===currentGuest.id);if(JSON.stringify(initialGuest)!==JSON.stringify(currentGuest)){promises.push(fetch(\"\".concat(API_URL,\"/api/guests/\").concat(eventId,\"/\").concat(currentGuest.id),{method:\"PUT\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(payload)}));}}}await Promise.all(promises);};const cleanThemeObject=theme=>{if(!theme||typeof theme!==\"object\"){return{name:\"\",colors:[],notes:\"\"};}const hasCorruptedProperties=Object.keys(theme).some(key=>!isNaN(parseInt(key))&&theme[key]!==undefined);if(hasCorruptedProperties){// Reconstruct a clean theme object\nreturn{name:theme.name||\"\",colors:Array.isArray(theme.colors)?theme.colors:[],notes:theme.notes||\"\"};}return{name:theme.name||\"\",colors:Array.isArray(theme.colors)?theme.colors:[],notes:theme.notes||\"\"};};const handleSave=async()=>{if(isReadOnly)return;try{const{data:{user}}=await supabase.auth.getUser();if(!user)return;await handleGuestUpdates();const cleanTheme=cleanThemeObject(theme);const startTime=formData.time?\"\".concat(formData.date,\"T\").concat(formData.time):\"\".concat(formData.date,\"T00:00:00\");const mainEventPayload={name:formData.name,venue:formData.venue,theme:cleanTheme,start_time:\"\".concat(formData.date,\"T\").concat(formData.time||\"00:00\",\":00\")};const response=await fetch(\"\".concat(API_URL,\"/api/events/\").concat(eventId),{method:\"PUT\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(mainEventPayload)});if(!response.ok){const errorData=await response.json();throw new Error(errorData.error||\"Failed to update event\");}const result=await response.json();console.log(\"Save response:\",result);setIsEditing(false);const guestsResponse=await fetch(\"\".concat(API_URL,\"/api/guests/\").concat(eventId));const guestsData=await guestsResponse.json();const formattedGuests=guestsData.map(g=>({id:g.guest_id,name:g.name,contact:g.email||\"\",dietary:g.dietary_info||\"\",rsvpStatus:formatGuestStatusForUI(g.rsvp_status)}));setGuests(formattedGuests);initialGuestsRef.current=formattedGuests;setEventData(prev=>_objectSpread(_objectSpread({},prev),{},{name:formData.name,start_time:startTime,venue:formData.venue,theme:theme}));alert(\"Event and guests updated successfully!\");}catch(error){console.error(\"Error updating event:\",error);alert(\"Failed to update event: \".concat(error.message));}};const handleVendorToggle=vendorId=>{if(isReadOnly)return;setSelectedVendors(prev=>prev.includes(vendorId)?prev.filter(id=>id!==vendorId):[...prev,vendorId]);};const handleExport=async()=>{try{const response=await fetch(\"\".concat(API_URL,\"/api/events/\").concat(eventId,\"/export\"),{method:\"GET\"});if(!response.ok)throw new Error(\"Failed to export event data\");const disposition=response.headers.get(\"Content-Disposition\");let filename=\"event_export_\".concat(eventId,\".zip\");if(disposition&&disposition.includes(\"filename=\")){filename=disposition.split(\"filename=\")[1].replace(/\"/g,\"\");}const blob=await response.blob();const url=window.URL.createObjectURL(blob);const a=document.createElement(\"a\");a.href=url;a.download=filename;document.body.appendChild(a);a.click();a.remove();window.URL.revokeObjectURL(url);}catch(error){alert(\"Export failed: \"+error.message);}};const handleFileUpload=async e=>{if(isReadOnly)return;const files=Array.from(e.target.files);if(files.length===0)return;setIsUploading(true);setUploadProgress(0);const newDocs=[];const totalFiles=files.length;try{const{data:{user}}=await supabase.auth.getUser();if(!user)return;for(let i=0;i<totalFiles;i++){const file=files[i];const safeEventName=formData.name.replace(/\\s+/g,\"_\").replace(/[^\\w-]/g,\"\");const filePath=\"events/\".concat(eventId,\"/\").concat(safeEventName,\"/\").concat(file.name);const{error:uploadError}=await supabase.storage.from(\"event-documents\").upload(filePath,file);if(uploadError)throw uploadError;const{data:{publicUrl}}=supabase.storage.from(\"event-documents\").getPublicUrl(filePath);newDocs.push({name:file.name,url:publicUrl,uploaded_at:new Date().toISOString()});setUploadProgress(Math.round((i+1)/totalFiles*100));}if(newDocs.length>0){const{error}=await supabase.from(\"events\").update({documents:[...documents,...newDocs],updated_at:new Date().toISOString()}).eq(\"event_id\",eventId);if(error)throw error;setDocuments(prev=>[...prev,...newDocs]);}}catch(error){console.error(\"Error uploading files:\",error);alert(\"An error occurred during upload: \".concat(error.message));}finally{setIsUploading(false);e.target.value=null;}};const handleDeleteDocument=async docToDelete=>{if(!window.confirm(\"Are you sure you want to delete this document?\"))return;try{const{data:{user}}=await supabase.auth.getUser();if(!user)return;const{error}=await supabase.from(\"events\").update({documents:documents.filter(doc=>doc.url!==docToDelete.url),updated_at:new Date().toISOString()}).eq(\"event_id\",eventId);if(error)throw error;setDocuments(prev=>prev.filter(doc=>doc.url!==docToDelete.url));}catch(error){console.error(\"Error deleting document reference:\",error);}};if(isLoading)return/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Loading event details...\"});if(!eventData)return/*#__PURE__*/_jsxs(\"div\",{className:\"error\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Event Not Found\"}),/*#__PURE__*/_jsx(\"p\",{children:\"The requested event could not be found or you don't have permission to view it.\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(\"/dashboard\"),children:\"Back to Dashboard\"})]});const formatDisplayDate=dateString=>{if(!dateString)return\"Not specified\";const date=new Date(dateString+\"T00:00:00\");return date.toLocaleDateString(\"en-US\",{year:\"numeric\",month:\"long\",day:\"numeric\"});};const toggleEdit=()=>{if(!isReadOnly){setIsEditing(!isEditing);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"event-details\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"event-header\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>navigate(-1),className:\"back-button\",children:[/*#__PURE__*/_jsx(FaArrowLeft,{}),\" Back to Dashboard\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"button-group\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveView(\"overview\"),className:\"new-button \".concat(activeView===\"overview\"?\"active\":\"\"),children:\"Event Overview\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveView(\"guests\"),className:\"new-button \".concat(activeView===\"guests\"?\"active\":\"\"),children:\"Guest Management\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveView(\"vendors\"),className:\"new-button \".concat(activeView===\"vendors\"?\"active\":\"\"),children:\"Vendor Management\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveView(\"documents\"),className:\"new-button \".concat(activeView===\"documents\"?\"active\":\"\"),children:\"Document Management\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"header-actions\",children:[isEditing?/*#__PURE__*/_jsxs(\"button\",{onClick:handleSave,className:\"save-button\",children:[/*#__PURE__*/_jsx(FaSave,{}),\" Save Changes\"]}):!isReadOnly&&/*#__PURE__*/_jsxs(\"button\",{onClick:toggleEdit,className:\"edit-button\",children:[/*#__PURE__*/_jsx(FaEdit,{}),\" Edit Event\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleExport,className:\"export-button\",children:[/*#__PURE__*/_jsx(FaUpload,{}),\" Export Event Data\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"event-info-boxes\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"info-box date-box\",children:[/*#__PURE__*/_jsxs(\"h4\",{children:[/*#__PURE__*/_jsx(FaCalendarAlt,{}),\" Date\"]}),/*#__PURE__*/_jsx(\"p\",{children:isEditing?/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"date\",value:formData.date,onChange:handleInputChange}):formatDisplayDate(formData.date)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-box time-box\",children:[/*#__PURE__*/_jsxs(\"h4\",{children:[/*#__PURE__*/_jsx(FaClock,{}),\" Time\"]}),/*#__PURE__*/_jsx(\"p\",{children:isEditing?/*#__PURE__*/_jsx(\"input\",{type:\"time\",name:\"time\",value:formData.time,onChange:handleInputChange}):formData.time||\"Not specified\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-box venue-box\",children:[/*#__PURE__*/_jsxs(\"h4\",{children:[/*#__PURE__*/_jsx(FaMapMarkerAlt,{}),\" Venue\"]}),/*#__PURE__*/_jsx(\"p\",{children:isEditing?/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"venue\",value:formData.venue,onChange:handleInputChange,placeholder:\"Venue\"}):eventData.venue||\"Not specified\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-box theme-box\",children:[/*#__PURE__*/_jsxs(\"h4\",{children:[/*#__PURE__*/_jsx(FaStar,{}),\" Theme\"]}),/*#__PURE__*/_jsx(\"p\",{children:((_eventData$theme=eventData.theme)===null||_eventData$theme===void 0?void 0:_eventData$theme.name)||\"Not specified\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"event-sections\",children:[activeView===\"overview\"&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"section\",{children:/*#__PURE__*/_jsx(EventSchedule,{schedule:schedule,onUpdate:setSchedule,isEditing:isEditing})}),/*#__PURE__*/_jsx(\"section\",{children:/*#__PURE__*/_jsx(EventTheme,{theme:theme,onUpdate:setTheme,isEditing:isEditing})})]}),activeView===\"guests\"&&/*#__PURE__*/_jsx(GuestManagement,{guests:guests,onUpdate:setGuests,isEditing:isEditing,eventData:eventData,API_URL:API_URL}),activeView===\"vendors\"&&/*#__PURE__*/_jsxs(\"section\",{className:\"vendors-section\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"section-header\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Vendors\"})}),isEditing?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"vendor-search-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"search-box\",children:[/*#__PURE__*/_jsx(FaSearch,{className:\"search-icon\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search for vendors by name or category\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),className:\"search-input\"}),searchTerm&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setSearchTerm(\"\"),className:\"clear-search\",\"aria-label\":\"Clear search\",children:/*#__PURE__*/_jsx(FaTimes,{})})]}),/*#__PURE__*/_jsxs(\"select\",{className:\"category-filter\",value:selectedCategory,onChange:e=>setSelectedCategory(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"All\",children:\"All Categories\"}),Array.from(new Set([// This gets all categories from your vendor data\n...vendors.map(v=>v.service_type.trim().toLowerCase()),// This line ensures 'photography' is always in the list\n\"photography\"].filter(Boolean))).sort().map(category=>/*#__PURE__*/_jsx(\"option\",{value:category,children:category.charAt(0).toUpperCase()+category.slice(1)},category))]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"vendor-selection\",children:vendors.filter(vendor=>{const matchesSearch=!searchTerm||vendor.business_name.toLowerCase().includes(searchTerm.toLowerCase())||vendor.service_type.toLowerCase().includes(searchTerm.toLowerCase());const matchesCategory=selectedCategory===\"All\"||vendor.service_type.trim().toLowerCase()===selectedCategory;return matchesSearch&&matchesCategory;}).map(vendor=>/*#__PURE__*/_jsxs(\"div\",{className:\"vendor-card\",onClick:e=>{// Only navigate if the click is not on the request button or its children\nif(!e.target.closest('.add-vendor-btn, .undo-request-btn')){handleVendorCardClick(vendor.vendor_id);}},style:{cursor:\"pointer\"},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"vendor-card-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"vendor-info\",children:/*#__PURE__*/_jsx(\"h4\",{children:vendor.business_name})}),/*#__PURE__*/_jsx(\"span\",{className:\"vendor-category\",children:vendor.service_type.toLowerCase()===\"venue\"?\"Venue\":vendor.service_type}),/*#__PURE__*/_jsx(\"div\",{className:\"vendor-description\",style:{textAlign:'center'},children:vendor.description||\"No description available.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"vendor-actions\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"add-vendor-btn \".concat(selectedVendors.includes(vendor.vendor_id)?\"added\":\"\"),onClick:()=>handleVendorToggle(vendor.vendor_id),disabled:!isEditing,children:selectedVendors.includes(vendor.vendor_id)?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(FaCheck,{}),\" Requested\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(FaPlus,{}),\" Request Vendor\"]})}),selectedVendors.includes(vendor.vendor_id)&&/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:\"undo-request-btn\",onClick:()=>handleVendorToggle(vendor.vendor_id),disabled:!isEditing,children:[/*#__PURE__*/_jsx(FaTimes,{}),\" Undo\"]})]})]},vendor.vendor_id))})]}):/*#__PURE__*/_jsx(\"div\",{className:\"vendors-list\",children:selectedVendors.length>0?/*#__PURE__*/_jsx(\"ul\",{children:selectedVendors.map(vendorId=>{const vendor=vendors.find(v=>v.vendor_id===vendorId);return vendor?/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:vendor.business_name}),\" -\",\" \",vendor.service_type,/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"small\",{children:vendor.contact_number})]},vendorId):null;})}):/*#__PURE__*/_jsxs(\"div\",{className:\"no-vendors-section\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"No vendors selected\"}),vendorRequests&&vendorRequests.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"vendor-requests-container\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Vendor Requests\"}),/*#__PURE__*/_jsx(\"div\",{className:\"vendor-requests-list\",children:vendorRequests.map(request=>{var _request$vendor,_request$vendor2,_request$vendor3;return/*#__PURE__*/_jsxs(\"div\",{className:\"vendor-request-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"vendor-request-info\",children:[/*#__PURE__*/_jsx(\"strong\",{children:((_request$vendor=request.vendor)===null||_request$vendor===void 0?void 0:_request$vendor.business_name)||\"Vendor\"}),/*#__PURE__*/_jsx(\"span\",{className:\"status-badge status-\".concat(request.status),children:request.status}),/*#__PURE__*/_jsxs(\"div\",{className:\"vendor-details\",children:[/*#__PURE__*/_jsxs(\"small\",{children:[\"Service:\",\" \",((_request$vendor2=request.vendor)===null||_request$vendor2===void 0?void 0:_request$vendor2.service_type)||\"Unknown\"]}),/*#__PURE__*/_jsxs(\"small\",{children:[\"Contact:\",\" \",((_request$vendor3=request.vendor)===null||_request$vendor3===void 0?void 0:_request$vendor3.contact_number)||\"Not provided\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"vendor-request-actions\",children:[request.status===\"pending\"&&isEditing&&/*#__PURE__*/_jsxs(\"div\",{className:\"action-buttons\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleVendorRequestResponse(request.request_id,\"accepted\"),className:\"accept-btn\",children:\"Accept\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleVendorRequestResponse(request.request_id,\"rejected\"),className:\"reject-btn\",children:\"Reject\"})]}),request.status===\"accepted\"&&/*#__PURE__*/_jsx(\"span\",{className:\"status-label accepted\",children:\"\\u2713 Accepted\"}),request.status===\"rejected\"&&/*#__PURE__*/_jsx(\"span\",{className:\"status-label rejected\",children:\"\\u2717 Rejected\"})]})]},request.request_id);})})]})]})})]}),activeView===\"documents\"&&/*#__PURE__*/_jsxs(\"section\",{className:\"documents-section\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"documents-header\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Documents\"})}),isEditing&&/*#__PURE__*/_jsxs(\"div\",{className:\"upload-area\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"upload-button\",children:[/*#__PURE__*/_jsx(FaUpload,{}),\" Upload Documents\",/*#__PURE__*/_jsx(\"input\",{type:\"file\",multiple:true,onChange:handleFileUpload,style:{display:\"none\"},disabled:isUploading})]}),isUploading&&/*#__PURE__*/_jsxs(\"div\",{className:\"upload-progress\",children:[/*#__PURE__*/_jsx(\"progress\",{value:uploadProgress,max:\"100\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Uploading... \",uploadProgress,\"%\"]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"documents-list\",children:documents&&documents.length>0?/*#__PURE__*/_jsx(\"ul\",{children:documents.map((doc,index)=>/*#__PURE__*/_jsxs(\"li\",{className:\"document-item\",children:[/*#__PURE__*/_jsxs(\"a\",{href:doc.url,target:\"_blank\",rel:\"noopener noreferrer\",children:[/*#__PURE__*/_jsx(FaFilePdf,{}),\" \",doc.name]}),isEditing&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeleteDocument(doc),className:\"delete-doc\",title:\"Delete document\",children:/*#__PURE__*/_jsx(FaTimes,{})})]},index))}):/*#__PURE__*/_jsx(\"p\",{children:\"No documents uploaded yet\"})})]})]})]});};export default EventDetails;","map":{"version":3,"names":["useCallback","useEffect","useRef","useState","FaArrowLeft","FaCalendarAlt","FaCheck","FaClock","FaEdit","FaEnvelope","FaFilePdf","FaMapMarkerAlt","FaPlus","FaSave","FaSearch","FaStar","FaTimes","FaTrash","FaUpload","useNavigate","useParams","supabase","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","EventSchedule","_ref","schedule","onUpdate","isEditing","handleAddItem","time","activity","handleRemoveItem","index","filter","_","i","handleItemChange","field","value","newSchedule","className","children","map","item","type","onChange","e","target","placeholder","onClick","length","EventTheme","_ref2","theme","safeTheme","JSON","parse","name","colors","notes","handleChange","_objectSpread","handleColorChange","newColors","addColor","removeColor","color","rows","style","backgroundColor","title","GuestManagement","_ref3","guests","eventData","API_URL","newGuest","setNewGuest","contact","dietary","rsvpStatus","handleAddGuest","trim","id","Date","now","handleUpdateGuest","guestId","g","handleRemoveGuest","handleSendInvite","guest","alert","concat","checked","newStatus","EventDetails","_eventData$theme","searchParams","URLSearchParams","window","location","search","isReadOnly","get","eventId","navigate","handleVendorCardClick","vendorId","setEventData","setIsEditing","isLoading","setIsLoading","activeView","setActiveView","formData","setFormData","date","venue","vendors","setVendors","searchTerm","setSearchTerm","selectedCategory","setSelectedCategory","selectedVendors","setSelectedVendors","documents","setDocuments","setSchedule","setGuests","initialGuestsRef","isUploading","setIsUploading","uploadProgress","setUploadProgress","setTheme","hostname","formatGuestStatusForUI","dbStatus","formatGuestStatusForDB","uiStatus","fetchVendors","data","session","auth","getSession","response","fetch","headers","Accept","Authorization","access_token","ok","Error","json","Array","isArray","error","console","fetchData","user","getUser","eventResponse","fetchedEventData","guestsResponse","guestsData","formattedGuests","guest_id","email","dietary_info","rsvp_status","current","themeData","hasCorruptedProperties","Object","keys","some","key","isNaN","parseInt","undefined","startTime","start_time","toISOString","split","toTimeString","substring","API_BASE","process","env","REACT_APP_BASE_URL","vendorRequests","setVendorRequests","fetchVendorRequests","requestsData","handleVendorRequestResponse","requestId","status","method","body","stringify","prev","req","request_id","request","find","vendor_id","handleInputChange","handleGuestUpdates","currentGuestsMap","Map","promises","initialGuest","has","push","currentGuest","payload","Promise","all","cleanThemeObject","handleSave","cleanTheme","mainEventPayload","errorData","result","log","message","handleVendorToggle","includes","handleExport","disposition","filename","replace","blob","url","URL","createObjectURL","a","document","createElement","href","download","appendChild","click","remove","revokeObjectURL","handleFileUpload","files","from","newDocs","totalFiles","file","safeEventName","filePath","uploadError","storage","upload","publicUrl","getPublicUrl","uploaded_at","Math","round","update","updated_at","eq","handleDeleteDocument","docToDelete","confirm","doc","formatDisplayDate","dateString","toLocaleDateString","year","month","day","toggleEdit","Set","v","service_type","toLowerCase","Boolean","sort","category","charAt","toUpperCase","slice","vendor","matchesSearch","business_name","matchesCategory","closest","cursor","textAlign","description","disabled","contact_number","_request$vendor","_request$vendor2","_request$vendor3","multiple","display","max","rel"],"sources":["C:/Users/Ammaarah/EventuallyPerfect/QUANTIX/frontend/src/pages/EventDetails.jsx"],"sourcesContent":["import { useCallback, useEffect, useRef, useState } from \"react\";\r\nimport {\r\n  FaArrowLeft,\r\n  FaCalendarAlt,\r\n  FaCheck,\r\n  FaClock,\r\n  FaEdit,\r\n  FaEnvelope,\r\n  FaFilePdf,\r\n  FaMapMarkerAlt,\r\n  FaPlus,\r\n  FaSave,\r\n  FaSearch,\r\n  FaStar,\r\n  FaTimes,\r\n  FaTrash,\r\n  FaUpload,\r\n} from \"react-icons/fa\";\r\nimport { useNavigate, useParams } from \"react-router-dom\";\r\nimport { supabase } from \"../client\";\r\nimport \"../styling/eventDetails.css\";\r\n\r\n// --- Sub-components (EventSchedule, EventTheme) are unchanged ---\r\nconst EventSchedule = ({ schedule, onUpdate, isEditing }) => {\r\n  const handleAddItem = () =>\r\n    onUpdate([...(schedule || []), { time: \"\", activity: \"\" }]);\r\n  const handleRemoveItem = (index) =>\r\n    onUpdate((schedule || []).filter((_, i) => i !== index));\r\n  const handleItemChange = (index, field, value) => {\r\n    const newSchedule = [...(schedule || [])];\r\n    newSchedule[index][field] = value;\r\n    onUpdate(newSchedule);\r\n  };\r\n  return (\r\n    <div className=\"schedule-section\">\r\n      <div className=\"section-header\">\r\n        <h2>Schedule</h2>\r\n      </div>\r\n      {isEditing ? (\r\n        <>\r\n          {(schedule || []).map((item, index) => (\r\n            <div key={index} className=\"schedule-item editable\">\r\n              <input\r\n                type=\"time\"\r\n                value={item.time}\r\n                onChange={(e) =>\r\n                  handleItemChange(index, \"time\", e.target.value)\r\n                }\r\n              />\r\n              <input\r\n                type=\"text\"\r\n                value={item.activity}\r\n                onChange={(e) =>\r\n                  handleItemChange(index, \"activity\", e.target.value)\r\n                }\r\n                placeholder=\"Activity\"\r\n              />\r\n              <button\r\n                onClick={() => handleRemoveItem(index)}\r\n                className=\"remove-btn\"\r\n              >\r\n                <FaTrash />\r\n              </button>\r\n            </div>\r\n          ))}\r\n          <button onClick={handleAddItem} className=\"add-btn\">\r\n            <FaPlus /> Add Activity\r\n          </button>\r\n        </>\r\n      ) : (\r\n        <div className=\"schedule-list\">\r\n          {schedule && schedule.length > 0 ? (\r\n            schedule.map((item, index) => (\r\n              <div key={index} className=\"schedule-item\">\r\n                <span className=\"schedule-time\">{item.time}</span>\r\n                <span className=\"schedule-activity\">{item.activity}</span>\r\n              </div>\r\n            ))\r\n          ) : (\r\n            <p>No schedule items have been added yet.</p>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst EventTheme = ({ theme, onUpdate, isEditing = true }) => {\r\n  const safeTheme =\r\n    typeof theme === \"string\"\r\n      ? (() => {\r\n          try {\r\n            return JSON.parse(theme);\r\n          } catch (e) {\r\n            return { name: \"\", colors: [], notes: \"\" };\r\n          }\r\n        })()\r\n      : theme || { name: \"\", colors: [], notes: \"\" };\r\n\r\n  const handleChange = (field, value) => {\r\n    onUpdate({ ...safeTheme, [field]: value });\r\n  };\r\n\r\n  const handleColorChange = (index, value) => {\r\n    const newColors = [...(safeTheme.colors || [])];\r\n    newColors[index] = value;\r\n    onUpdate({ ...safeTheme, colors: newColors });\r\n  };\r\n\r\n  const addColor = () => {\r\n    onUpdate({\r\n      ...safeTheme,\r\n      colors: [...(safeTheme.colors || []), \"#ffffff\"],\r\n    });\r\n  };\r\n\r\n  const removeColor = (index) => {\r\n    onUpdate({\r\n      ...safeTheme,\r\n      colors: (safeTheme.colors || []).filter((_, i) => i !== index),\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"theme-section\">\r\n      <div className=\"section-header\">\r\n        <h2>Event Theme</h2>\r\n      </div>\r\n      {isEditing ? (\r\n        <div className=\"theme-editor\">\r\n          <div className=\"form-group\">\r\n            <label>Theme Name</label>\r\n            <input\r\n              type=\"text\"\r\n              value={safeTheme.name || \"\"}\r\n              onChange={(e) => handleChange(\"name\", e.target.value)}\r\n              placeholder=\"Enter theme name\"\r\n            />\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label>Colors</label>\r\n            <div className=\"color-palette\">\r\n              {safeTheme.colors &&\r\n                safeTheme.colors.map((color, index) => (\r\n                  <div key={index} className=\"color-item\">\r\n                    <input\r\n                      type=\"color\"\r\n                      value={color}\r\n                      onChange={(e) => handleColorChange(index, e.target.value)}\r\n                    />\r\n                    <button\r\n                      onClick={() => removeColor(index)}\r\n                      className=\"remove-color\"\r\n                    >\r\n                      <FaTimes />\r\n                    </button>\r\n                  </div>\r\n                ))}\r\n              <button onClick={addColor} className=\"add-color\">\r\n                <FaPlus /> Add Color\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label>Theme Notes</label>\r\n            <textarea\r\n              value={safeTheme.notes || \"\"}\r\n              onChange={(e) => handleChange(\"notes\", e.target.value)}\r\n              placeholder=\"Add notes about your theme...\"\r\n              rows=\"3\"\r\n            />\r\n          </div>\r\n        </div>\r\n      ) : (\r\n        <div className=\"theme-display\">\r\n          {safeTheme.name ? (\r\n            <>\r\n              <h3>{safeTheme.name}</h3>\r\n              {safeTheme.colors && safeTheme.colors.length > 0 && (\r\n                <div className=\"color-palette-display\">\r\n                  {safeTheme.colors.map((color, index) => (\r\n                    <div\r\n                      key={index}\r\n                      className=\"color-swatch\"\r\n                      style={{ backgroundColor: color }}\r\n                      title={color}\r\n                    />\r\n                  ))}\r\n                </div>\r\n              )}\r\n              {safeTheme.notes && <p>{safeTheme.notes}</p>}\r\n            </>\r\n          ) : (\r\n            <p>No theme has been set for this event.</p>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\nconst GuestManagement = ({\r\n  guests,\r\n  onUpdate,\r\n  isEditing,\r\n  eventData,\r\n  API_URL,\r\n}) => {\r\n  const [newGuest, setNewGuest] = useState({\r\n    name: \"\",\r\n    contact: \"\",\r\n    dietary: \"\",\r\n    rsvpStatus: \"pending\",\r\n  });\r\n\r\n  const handleAddGuest = () => {\r\n    if (newGuest.name.trim() !== \"\") {\r\n      onUpdate([...(guests || []), { ...newGuest, id: Date.now() }]);\r\n      setNewGuest({\r\n        name: \"\",\r\n        contact: \"\",\r\n        dietary: \"\",\r\n        rsvpStatus: \"pending\",\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleUpdateGuest = (guestId, field, value) =>\r\n    onUpdate(\r\n      (guests || []).map((g) =>\r\n        g.id === guestId ? { ...g, [field]: value } : g\r\n      )\r\n    );\r\n\r\n  const handleRemoveGuest = (guestId) =>\r\n    onUpdate((guests || []).filter((g) => g.id !== guestId));\r\n\r\n  const handleSendInvite = async (guest) => {\r\n    alert(\r\n      `Email functionality is temporarily disabled. Guest ${guest.name} (${\r\n        guest.contact\r\n      }) would receive an invitation to ${eventData?.name || \"the event\"}.`\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"guests-section\">\r\n      <div className=\"section-header\">\r\n        <h2>Guest Management</h2>\r\n      </div>\r\n\r\n      {isEditing && (\r\n        <div className=\"add-guest-form\">\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Guest Name\"\r\n            value={newGuest.name}\r\n            onChange={(e) => setNewGuest({ ...newGuest, name: e.target.value })}\r\n          />\r\n          <input\r\n            type=\"email\"\r\n            placeholder=\"Email\"\r\n            value={newGuest.contact}\r\n            onChange={(e) =>\r\n              setNewGuest({ ...newGuest, contact: e.target.value })\r\n            }\r\n          />\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Dietary Requirements\"\r\n            value={newGuest.dietary}\r\n            onChange={(e) =>\r\n              setNewGuest({ ...newGuest, dietary: e.target.value })\r\n            }\r\n          />\r\n          <button onClick={handleAddGuest}>\r\n            <FaPlus /> Add Guest\r\n          </button>\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"guest-list\">\r\n        {guests && guests.length > 0 ? (\r\n          <ul>\r\n            {guests.map((guest) => (\r\n              <li key={guest.id} className=\"guest-item\">\r\n                <div className=\"guest-info\">\r\n                  <div>\r\n                    <strong>{guest.name}</strong>\r\n                    <br />\r\n                    <small>{guest.contact}</small>\r\n                    <br />\r\n                    {guest.dietary && <small>Dietary: {guest.dietary}</small>}\r\n                  </div>\r\n                </div>\r\n\r\n                {!isEditing && (\r\n                  <div className=\"guest-actions view-mode\">\r\n                    <button\r\n                      onClick={() => handleSendInvite(guest)}\r\n                      title=\"Send invite\"\r\n                      className=\"send-invite-btn\"\r\n                    >\r\n                      <FaEnvelope /> Send Invite\r\n                    </button>\r\n                    <div className=\"rsvp-controls\">\r\n                      <span>RSVP:</span>\r\n                      <label>\r\n                        <input\r\n                          type=\"checkbox\"\r\n                          checked={guest.rsvpStatus === \"attending\"}\r\n                          onChange={() => {\r\n                            const newStatus =\r\n                              guest.rsvpStatus === \"attending\"\r\n                                ? \"pending\"\r\n                                : \"attending\";\r\n                            handleUpdateGuest(\r\n                              guest.id,\r\n                              \"rsvpStatus\",\r\n                              newStatus\r\n                            );\r\n                          }}\r\n                        />{\" \"}\r\n                        Yes\r\n                      </label>\r\n                      <label>\r\n                        <input\r\n                          type=\"checkbox\"\r\n                          checked={guest.rsvpStatus === \"declined\"}\r\n                          onChange={() => {\r\n                            const newStatus =\r\n                              guest.rsvpStatus === \"declined\"\r\n                                ? \"pending\"\r\n                                : \"declined\";\r\n                            handleUpdateGuest(\r\n                              guest.id,\r\n                              \"rsvpStatus\",\r\n                              newStatus\r\n                            );\r\n                          }}\r\n                        />{\" \"}\r\n                        No\r\n                      </label>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                {isEditing && (\r\n                  <div className=\"guest-actions\">\r\n                    <button\r\n                      onClick={() => handleRemoveGuest(guest.id)}\r\n                      className=\"delete-guest\"\r\n                      title=\"Remove guest\"\r\n                    >\r\n                      <FaTrash />\r\n                    </button>\r\n                  </div>\r\n                )}\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        ) : (\r\n          <p>No guests have been added yet.</p>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Main EventDetails component\r\nconst EventDetails = () => {\r\n  const { id } = useParams();\r\n  const searchParams = new URLSearchParams(window.location.search);\r\n  const isReadOnly = searchParams.get(\"readonly\") === \"true\";\r\n  const eventId = id;\r\n  const navigate = useNavigate();\r\n  // Function to handle vendor card click\r\n  const handleVendorCardClick = (vendorId) => {\r\n    navigate(`/vendors/${vendorId}/services?readonly=true`);\r\n  };\r\n  const [eventData, setEventData] = useState(null);\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  useEffect(() => {\r\n    if (isReadOnly) {\r\n      setIsEditing(false);\r\n    }\r\n  }, [isReadOnly]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [activeView, setActiveView] = useState(\"overview\");\r\n  const [formData, setFormData] = useState({\r\n    name: \"\",\r\n    date: \"\",\r\n    time: \"\",\r\n    venue: \"\",\r\n    notes: \"\",\r\n  });\r\n  const [vendors, setVendors] = useState([]);\r\n  const [searchTerm, setSearchTerm] = useState(\"\");\r\n  const [selectedCategory, setSelectedCategory] = useState(\"All\");\r\n  const [selectedVendors, setSelectedVendors] = useState([]);\r\n  const [documents, setDocuments] = useState([]);\r\n  const [schedule, setSchedule] = useState([]);\r\n  const [guests, setGuests] = useState([]);\r\n  const initialGuestsRef = useRef([]);\r\n  const [isUploading, setIsUploading] = useState(false);\r\n  const [uploadProgress, setUploadProgress] = useState(0);\r\n  const [theme, setTheme] = useState({ name: \"\", colors: [], notes: \"\" });\r\n\r\n  const API_URL =\r\n    window.location.hostname === \"production\"\r\n      ? \"https://soothing-manifestation-production.up.railway.app\"\r\n      : \"http://localhost:5000\";\r\n\r\n  const formatGuestStatusForUI = (dbStatus) => {\r\n    if (dbStatus === \"Attending\") return \"attending\";\r\n    if (dbStatus === \"Declined\") return \"declined\";\r\n    return \"pending\";\r\n  };\r\n\r\n  const formatGuestStatusForDB = (uiStatus) => {\r\n    if (uiStatus === \"attending\") return \"Attending\";\r\n    if (uiStatus === \"declined\") return \"Declined\";\r\n    return \"Pending\";\r\n  };\r\n\r\n  const fetchVendors = useCallback(async () => {\r\n    try {\r\n      const {\r\n        data: { session },\r\n      } = await supabase.auth.getSession();\r\n      if (!session) return;\r\n\r\n      const response = await fetch(`${API_URL}/api/vendors`, {\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Accept: \"application/json\",\r\n          Authorization: `Bearer ${session.access_token}`,\r\n        },\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error(\"Failed to fetch vendors\");\r\n      }\r\n\r\n      const data = await response.json();\r\n      if (Array.isArray(data)) {\r\n        setVendors(data);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error fetching vendors:\", error);\r\n    }\r\n  }, [API_URL]);\r\n\r\n  useEffect(() => {\r\n    fetchVendors();\r\n  }, [fetchVendors]);\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      setIsLoading(true);\r\n      try {\r\n        const {\r\n          data: { user },\r\n        } = await supabase.auth.getUser();\r\n        if (!user) {\r\n          navigate(\"/login\");\r\n          return;\r\n        }\r\n\r\n        const eventResponse = await fetch(\r\n          `${API_URL}/api/events/id/${eventId}`\r\n        );\r\n        if (!eventResponse.ok) throw new Error(\"Failed to fetch event\");\r\n        const fetchedEventData = await eventResponse.json();\r\n\r\n        if (!fetchedEventData) {\r\n          console.error(\"Event not found\");\r\n          setEventData(null);\r\n          return;\r\n        }\r\n\r\n        const guestsResponse = await fetch(`${API_URL}/api/guests/${eventId}`);\r\n        if (!guestsResponse.ok) throw new Error(\"Failed to fetch guests\");\r\n        const guestsData = await guestsResponse.json();\r\n\r\n        const formattedGuests = guestsData.map((g) => ({\r\n          id: g.guest_id,\r\n          name: g.name,\r\n          contact: g.email || \"\",\r\n          dietary: g.dietary_info || \"\",\r\n          rsvpStatus: formatGuestStatusForUI(g.rsvp_status),\r\n        }));\r\n\r\n        setGuests(formattedGuests);\r\n        initialGuestsRef.current = formattedGuests;\r\n\r\n        setEventData(fetchedEventData);\r\n        setSchedule(fetchedEventData.schedule || []);\r\n        let themeData = fetchedEventData.theme;\r\n\r\n        // If theme is a string, parse it\r\n        if (typeof themeData === \"string\") {\r\n          try {\r\n            themeData = JSON.parse(themeData);\r\n          } catch (e) {\r\n            console.error(\"Error parsing theme string:\", e);\r\n            themeData = { name: \"\", colors: [], notes: \"\" };\r\n          }\r\n        }\r\n\r\n        // If theme is an object but corrupted, clean it\r\n        if (themeData && typeof themeData === \"object\") {\r\n          const hasCorruptedProperties = Object.keys(themeData).some(\r\n            (key) => !isNaN(parseInt(key)) && themeData[key] !== undefined\r\n          );\r\n\r\n          if (hasCorruptedProperties) {\r\n            themeData = {\r\n              name: themeData.name || \"\",\r\n              colors: Array.isArray(themeData.colors) ? themeData.colors : [],\r\n              notes: themeData.notes || \"\",\r\n            };\r\n          }\r\n        }\r\n        setTheme(themeData || { name: \"\", colors: [], notes: \"\" });\r\n        setDocuments(fetchedEventData.documents || []);\r\n        setSelectedVendors(fetchedEventData.vendors || []);\r\n\r\n        const startTime = new Date(fetchedEventData.start_time);\r\n        const date = startTime.toISOString().split(\"T\")[0];\r\n        const time = startTime.toTimeString().substring(0, 5);\r\n\r\n        setFormData({\r\n          name: fetchedEventData.name || \"\",\r\n          date,\r\n          time,\r\n          venue: fetchedEventData.venue || \"\",\r\n          notes: fetchedEventData.notes || \"\",\r\n        });\r\n      } catch (error) {\r\n        console.error(\"Error loading data:\", error);\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, [eventId, navigate, API_URL]);\r\n\r\n  const API_BASE = process.env.REACT_APP_BASE_URL || \"http://localhost:5000\";\r\n  const [vendorRequests, setVendorRequests] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const fetchVendorRequests = async () => {\r\n      try {\r\n        if (!eventId) return;\r\n\r\n        const response = await fetch(\r\n          `${API_BASE}/api/vendor-requests/event/${eventId}`\r\n        );\r\n\r\n        if (response.ok) {\r\n          const requestsData = await response.json();\r\n          setVendorRequests(requestsData || []);\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error fetching vendor requests:\", error);\r\n      }\r\n    };\r\n\r\n    fetchVendorRequests();\r\n  }, [eventId, API_BASE]);\r\n\r\n  const handleVendorRequestResponse = async (requestId, status) => {\r\n    try {\r\n      const response = await fetch(\r\n        `${API_BASE}/api/vendor-requests/${requestId}`,\r\n        {\r\n          method: \"PUT\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n          body: JSON.stringify({ status }),\r\n        }\r\n      );\r\n\r\n      if (response.ok) {\r\n        setVendorRequests((prev) =>\r\n          prev.map((req) =>\r\n            req.request_id === requestId ? { ...req, status } : req\r\n          )\r\n        );\r\n\r\n        if (status === \"accepted\") {\r\n          const request = vendorRequests.find(\r\n            (req) => req.request_id === requestId\r\n          );\r\n          if (request && request.vendor_id) {\r\n            setSelectedVendors((prev) => [...prev, request.vendor_id]);\r\n          }\r\n        }\r\n\r\n        alert(`Vendor request ${status} successfully!`);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error updating vendor request:\", error);\r\n      alert(\"Failed to update vendor request.\");\r\n    }\r\n  };\r\n\r\n  const handleInputChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData((prev) => ({ ...prev, [name]: value }));\r\n  };\r\n\r\n  const handleGuestUpdates = async () => {\r\n    const currentGuestsMap = new Map(guests.map((g) => [g.id, g]));\r\n    const promises = [];\r\n\r\n    for (const initialGuest of initialGuestsRef.current) {\r\n      if (!currentGuestsMap.has(initialGuest.id)) {\r\n        promises.push(\r\n          fetch(`${API_URL}/api/guests/${eventId}/${initialGuest.id}`, {\r\n            method: \"DELETE\",\r\n          })\r\n        );\r\n      }\r\n    }\r\n\r\n    for (const currentGuest of guests) {\r\n      const payload = {\r\n        name: currentGuest.name,\r\n        email: currentGuest.contact,\r\n        rsvp_status: formatGuestStatusForDB(currentGuest.rsvpStatus),\r\n        dietary_info: currentGuest.dietary,\r\n      };\r\n\r\n      if (typeof currentGuest.id === \"number\") {\r\n        promises.push(\r\n          fetch(`${API_URL}/api/guests/${eventId}`, {\r\n            method: \"POST\",\r\n            headers: { \"Content-Type\": \"application/json\" },\r\n            body: JSON.stringify(payload),\r\n          })\r\n        );\r\n      } else {\r\n        const initialGuest = initialGuestsRef.current.find(\r\n          (g) => g.id === currentGuest.id\r\n        );\r\n        if (JSON.stringify(initialGuest) !== JSON.stringify(currentGuest)) {\r\n          promises.push(\r\n            fetch(`${API_URL}/api/guests/${eventId}/${currentGuest.id}`, {\r\n              method: \"PUT\",\r\n              headers: { \"Content-Type\": \"application/json\" },\r\n              body: JSON.stringify(payload),\r\n            })\r\n          );\r\n        }\r\n      }\r\n    }\r\n\r\n    await Promise.all(promises);\r\n  };\r\n\r\n  const cleanThemeObject = (theme) => {\r\n    if (!theme || typeof theme !== \"object\") {\r\n      return { name: \"\", colors: [], notes: \"\" };\r\n    }\r\n\r\n    const hasCorruptedProperties = Object.keys(theme).some(\r\n      (key) => !isNaN(parseInt(key)) && theme[key] !== undefined\r\n    );\r\n\r\n    if (hasCorruptedProperties) {\r\n      // Reconstruct a clean theme object\r\n      return {\r\n        name: theme.name || \"\",\r\n        colors: Array.isArray(theme.colors) ? theme.colors : [],\r\n        notes: theme.notes || \"\",\r\n      };\r\n    }\r\n\r\n    return {\r\n      name: theme.name || \"\",\r\n      colors: Array.isArray(theme.colors) ? theme.colors : [],\r\n      notes: theme.notes || \"\",\r\n    };\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    if (isReadOnly) return;\r\n    try {\r\n      const {\r\n        data: { user },\r\n      } = await supabase.auth.getUser();\r\n      if (!user) return;\r\n\r\n      await handleGuestUpdates();\r\n\r\n      const cleanTheme = cleanThemeObject(theme);\r\n\r\n      const startTime = formData.time\r\n        ? `${formData.date}T${formData.time}`\r\n        : `${formData.date}T00:00:00`;\r\n\r\n      const mainEventPayload = {\r\n        name: formData.name,\r\n        venue: formData.venue,\r\n        theme: cleanTheme,\r\n        start_time: `${formData.date}T${formData.time || \"00:00\"}:00`,\r\n      };\r\n\r\n      const response = await fetch(`${API_URL}/api/events/${eventId}`, {\r\n        method: \"PUT\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify(mainEventPayload),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const errorData = await response.json();\r\n        throw new Error(errorData.error || \"Failed to update event\");\r\n      }\r\n\r\n      const result = await response.json();\r\n      console.log(\"Save response:\", result);\r\n\r\n      setIsEditing(false);\r\n\r\n      const guestsResponse = await fetch(`${API_URL}/api/guests/${eventId}`);\r\n      const guestsData = await guestsResponse.json();\r\n      const formattedGuests = guestsData.map((g) => ({\r\n        id: g.guest_id,\r\n        name: g.name,\r\n        contact: g.email || \"\",\r\n        dietary: g.dietary_info || \"\",\r\n        rsvpStatus: formatGuestStatusForUI(g.rsvp_status),\r\n      }));\r\n      setGuests(formattedGuests);\r\n      initialGuestsRef.current = formattedGuests;\r\n\r\n      setEventData((prev) => ({\r\n        ...prev,\r\n        name: formData.name,\r\n        start_time: startTime,\r\n        venue: formData.venue,\r\n        theme: theme,\r\n      }));\r\n\r\n      alert(\"Event and guests updated successfully!\");\r\n    } catch (error) {\r\n      console.error(\"Error updating event:\", error);\r\n      alert(`Failed to update event: ${error.message}`);\r\n    }\r\n  };\r\n\r\n  const handleVendorToggle = (vendorId) => {\r\n    if (isReadOnly) return;\r\n    setSelectedVendors((prev) =>\r\n      prev.includes(vendorId)\r\n        ? prev.filter((id) => id !== vendorId)\r\n        : [...prev, vendorId]\r\n    );\r\n  };\r\n\r\n  const handleExport = async () => {\r\n    try {\r\n      const response = await fetch(`${API_URL}/api/events/${eventId}/export`, {\r\n        method: \"GET\",\r\n      });\r\n      if (!response.ok) throw new Error(\"Failed to export event data\");\r\n\r\n      const disposition = response.headers.get(\"Content-Disposition\");\r\n      let filename = `event_export_${eventId}.zip`;\r\n      if (disposition && disposition.includes(\"filename=\")) {\r\n        filename = disposition.split(\"filename=\")[1].replace(/\"/g, \"\");\r\n      }\r\n\r\n      const blob = await response.blob();\r\n      const url = window.URL.createObjectURL(blob);\r\n      const a = document.createElement(\"a\");\r\n      a.href = url;\r\n      a.download = filename;\r\n      document.body.appendChild(a);\r\n      a.click();\r\n      a.remove();\r\n      window.URL.revokeObjectURL(url);\r\n    } catch (error) {\r\n      alert(\"Export failed: \" + error.message);\r\n    }\r\n  };\r\n\r\n  const handleFileUpload = async (e) => {\r\n    if (isReadOnly) return;\r\n    const files = Array.from(e.target.files);\r\n    if (files.length === 0) return;\r\n\r\n    setIsUploading(true);\r\n    setUploadProgress(0);\r\n    const newDocs = [];\r\n    const totalFiles = files.length;\r\n\r\n    try {\r\n      const {\r\n        data: { user },\r\n      } = await supabase.auth.getUser();\r\n      if (!user) return;\r\n\r\n      for (let i = 0; i < totalFiles; i++) {\r\n        const file = files[i];\r\n        const safeEventName = formData.name\r\n          .replace(/\\s+/g, \"_\")\r\n          .replace(/[^\\w-]/g, \"\");\r\n        const filePath = `events/${eventId}/${safeEventName}/${file.name}`;\r\n\r\n        const { error: uploadError } = await supabase.storage\r\n          .from(\"event-documents\")\r\n          .upload(filePath, file);\r\n\r\n        if (uploadError) throw uploadError;\r\n\r\n        const {\r\n          data: { publicUrl },\r\n        } = supabase.storage.from(\"event-documents\").getPublicUrl(filePath);\r\n\r\n        newDocs.push({\r\n          name: file.name,\r\n          url: publicUrl,\r\n          uploaded_at: new Date().toISOString(),\r\n        });\r\n        setUploadProgress(Math.round(((i + 1) / totalFiles) * 100));\r\n      }\r\n\r\n      if (newDocs.length > 0) {\r\n        const { error } = await supabase\r\n          .from(\"events\")\r\n          .update({\r\n            documents: [...documents, ...newDocs],\r\n            updated_at: new Date().toISOString(),\r\n          })\r\n          .eq(\"event_id\", eventId);\r\n\r\n        if (error) throw error;\r\n\r\n        setDocuments((prev) => [...prev, ...newDocs]);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error uploading files:\", error);\r\n      alert(`An error occurred during upload: ${error.message}`);\r\n    } finally {\r\n      setIsUploading(false);\r\n      e.target.value = null;\r\n    }\r\n  };\r\n\r\n  const handleDeleteDocument = async (docToDelete) => {\r\n    if (!window.confirm(\"Are you sure you want to delete this document?\"))\r\n      return;\r\n    try {\r\n      const {\r\n        data: { user },\r\n      } = await supabase.auth.getUser();\r\n      if (!user) return;\r\n\r\n      const { error } = await supabase\r\n        .from(\"events\")\r\n        .update({\r\n          documents: documents.filter((doc) => doc.url !== docToDelete.url),\r\n          updated_at: new Date().toISOString(),\r\n        })\r\n        .eq(\"event_id\", eventId);\r\n\r\n      if (error) throw error;\r\n\r\n      setDocuments((prev) => prev.filter((doc) => doc.url !== docToDelete.url));\r\n    } catch (error) {\r\n      console.error(\"Error deleting document reference:\", error);\r\n    }\r\n  };\r\n\r\n  if (isLoading) return <div className=\"loading\">Loading event details...</div>;\r\n  if (!eventData)\r\n    return (\r\n      <div className=\"error\">\r\n        <h2>Event Not Found</h2>\r\n        <p>\r\n          The requested event could not be found or you don't have permission to\r\n          view it.\r\n        </p>\r\n        <button onClick={() => navigate(\"/dashboard\")}>\r\n          Back to Dashboard\r\n        </button>\r\n      </div>\r\n    );\r\n\r\n  const formatDisplayDate = (dateString) => {\r\n    if (!dateString) return \"Not specified\";\r\n    const date = new Date(dateString + \"T00:00:00\");\r\n    return date.toLocaleDateString(\"en-US\", {\r\n      year: \"numeric\",\r\n      month: \"long\",\r\n      day: \"numeric\",\r\n    });\r\n  };\r\n\r\n  const toggleEdit = () => {\r\n    if (!isReadOnly) {\r\n      setIsEditing(!isEditing);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"event-details\">\r\n      <div className=\"event-header\">\r\n        <button onClick={() => navigate(-1)} className=\"back-button\">\r\n          <FaArrowLeft /> Back to Dashboard\r\n        </button>\r\n        <div className=\"button-group\">\r\n          <button\r\n            onClick={() => setActiveView(\"overview\")}\r\n            className={`new-button ${\r\n              activeView === \"overview\" ? \"active\" : \"\"\r\n            }`}\r\n          >\r\n            Event Overview\r\n          </button>\r\n          <button\r\n            onClick={() => setActiveView(\"guests\")}\r\n            className={`new-button ${activeView === \"guests\" ? \"active\" : \"\"}`}\r\n          >\r\n            Guest Management\r\n          </button>\r\n          <button\r\n            onClick={() => setActiveView(\"vendors\")}\r\n            className={`new-button ${activeView === \"vendors\" ? \"active\" : \"\"}`}\r\n          >\r\n            Vendor Management\r\n          </button>\r\n          <button\r\n            onClick={() => setActiveView(\"documents\")}\r\n            className={`new-button ${\r\n              activeView === \"documents\" ? \"active\" : \"\"\r\n            }`}\r\n          >\r\n            Document Management\r\n          </button>\r\n        </div>\r\n        <div className=\"header-actions\">\r\n          {isEditing ? (\r\n            <button onClick={handleSave} className=\"save-button\">\r\n              <FaSave /> Save Changes\r\n            </button>\r\n          ) : (\r\n            !isReadOnly && (\r\n              <button onClick={toggleEdit} className=\"edit-button\">\r\n                <FaEdit /> Edit Event\r\n              </button>\r\n            )\r\n          )}\r\n          <button onClick={handleExport} className=\"export-button\">\r\n            <FaUpload /> Export Event Data\r\n          </button>\r\n        </div>\r\n      </div>\r\n      <div className=\"event-info-boxes\">\r\n        <div className=\"info-box date-box\">\r\n          <h4>\r\n            <FaCalendarAlt /> Date\r\n          </h4>\r\n          <p>\r\n            {isEditing ? (\r\n              <input\r\n                type=\"date\"\r\n                name=\"date\"\r\n                value={formData.date}\r\n                onChange={handleInputChange}\r\n              />\r\n            ) : (\r\n              formatDisplayDate(formData.date)\r\n            )}\r\n          </p>\r\n        </div>\r\n        <div className=\"info-box time-box\">\r\n          <h4>\r\n            <FaClock /> Time\r\n          </h4>\r\n          <p>\r\n            {isEditing ? (\r\n              <input\r\n                type=\"time\"\r\n                name=\"time\"\r\n                value={formData.time}\r\n                onChange={handleInputChange}\r\n              />\r\n            ) : (\r\n              formData.time || \"Not specified\"\r\n            )}\r\n          </p>\r\n        </div>\r\n        <div className=\"info-box venue-box\">\r\n          <h4>\r\n            <FaMapMarkerAlt /> Venue\r\n          </h4>\r\n          <p>\r\n            {isEditing ? (\r\n              <input\r\n                type=\"text\"\r\n                name=\"venue\"\r\n                value={formData.venue}\r\n                onChange={handleInputChange}\r\n                placeholder=\"Venue\"\r\n              />\r\n            ) : (\r\n              eventData.venue || \"Not specified\"\r\n            )}\r\n          </p>\r\n        </div>\r\n        <div className=\"info-box theme-box\">\r\n          <h4>\r\n            <FaStar /> Theme\r\n          </h4>\r\n          <p>{eventData.theme?.name || \"Not specified\"}</p>\r\n        </div>\r\n      </div>\r\n      <div className=\"event-sections\">\r\n        {activeView === \"overview\" && (\r\n          <>\r\n            <section>\r\n              <EventSchedule\r\n                schedule={schedule}\r\n                onUpdate={setSchedule}\r\n                isEditing={isEditing}\r\n              />\r\n            </section>\r\n            <section>\r\n              <EventTheme\r\n                theme={theme}\r\n                onUpdate={setTheme}\r\n                isEditing={isEditing}\r\n              />\r\n            </section>\r\n          </>\r\n        )}\r\n        {activeView === \"guests\" && (\r\n          <GuestManagement\r\n            guests={guests}\r\n            onUpdate={setGuests}\r\n            isEditing={isEditing}\r\n            eventData={eventData}\r\n            API_URL={API_URL}\r\n          />\r\n        )}\r\n        {activeView === \"vendors\" && (\r\n          <section className=\"vendors-section\">\r\n            <div className=\"section-header\">\r\n              <h2>Vendors</h2>\r\n            </div>\r\n            {isEditing ? (\r\n              <div>\r\n                <div className=\"vendor-search-container\">\r\n                  <div className=\"search-box\">\r\n                    <FaSearch className=\"search-icon\" />\r\n                    <input\r\n                      type=\"text\"\r\n                      placeholder=\"Search for vendors by name or category\"\r\n                      value={searchTerm}\r\n                      onChange={(e) => setSearchTerm(e.target.value)}\r\n                      className=\"search-input\"\r\n                    />\r\n                    {searchTerm && (\r\n                      <button\r\n                        type=\"button\"\r\n                        onClick={() => setSearchTerm(\"\")}\r\n                        className=\"clear-search\"\r\n                        aria-label=\"Clear search\"\r\n                      >\r\n                        <FaTimes />\r\n                      </button>\r\n                    )}\r\n                  </div>\r\n                  <select\r\n                    className=\"category-filter\"\r\n                    value={selectedCategory}\r\n                    onChange={(e) => setSelectedCategory(e.target.value)}\r\n                  >\r\n                    <option value=\"All\">All Categories</option>\r\n                    {Array.from(\r\n                      new Set(\r\n                        [\r\n                          // This gets all categories from your vendor data\r\n                          ...vendors.map((v) =>\r\n                            v.service_type.trim().toLowerCase()\r\n                          ),\r\n                          // This line ensures 'photography' is always in the list\r\n                          \"photography\",\r\n                        ].filter(Boolean)\r\n                      )\r\n                    )\r\n                      .sort()\r\n                      .map((category) => (\r\n                        <option key={category} value={category}>\r\n                          {category.charAt(0).toUpperCase() + category.slice(1)}\r\n                        </option>\r\n                      ))}\r\n                  </select>\r\n                </div>\r\n                <div className=\"vendor-selection\">\r\n                  {vendors\r\n                    .filter((vendor) => {\r\n                      const matchesSearch =\r\n                        !searchTerm ||\r\n                        vendor.business_name\r\n                          .toLowerCase()\r\n                          .includes(searchTerm.toLowerCase()) ||\r\n                        vendor.service_type\r\n                          .toLowerCase()\r\n                          .includes(searchTerm.toLowerCase());\r\n                      const matchesCategory =\r\n                        selectedCategory === \"All\" ||\r\n                        vendor.service_type.trim().toLowerCase() ===\r\n                          selectedCategory;\r\n                      return matchesSearch && matchesCategory;\r\n                    })\r\n                    .map((vendor) => (\r\n                      <div\r\n                        key={vendor.vendor_id}\r\n                        className=\"vendor-card\"\r\n                        onClick={(e) => {\r\n                          // Only navigate if the click is not on the request button or its children\r\n                          if (!e.target.closest('.add-vendor-btn, .undo-request-btn')) {\r\n                            handleVendorCardClick(vendor.vendor_id);\r\n                          }\r\n                        }}\r\n                        style={{ cursor: \"pointer\" }}\r\n                      >\r\n                        <div className=\"vendor-card-content\">\r\n                          <div className=\"vendor-info\">\r\n                            <h4>{vendor.business_name}</h4>\r\n                          </div>\r\n                          <span className=\"vendor-category\">\r\n                            {vendor.service_type.toLowerCase() === \"venue\"\r\n                              ? \"Venue\"\r\n                              : vendor.service_type}\r\n                          </span>\r\n                          <div className=\"vendor-description\" style={{ textAlign: 'center' }}>\r\n                            {vendor.description || \"No description available.\"}\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"vendor-actions\">\r\n                          <button\r\n                            type=\"button\"\r\n                            className={`add-vendor-btn ${\r\n                              selectedVendors.includes(vendor.vendor_id)\r\n                                ? \"added\"\r\n                                : \"\"\r\n                            }`}\r\n                            onClick={() => handleVendorToggle(vendor.vendor_id)}\r\n                            disabled={!isEditing}\r\n                          >\r\n                            {selectedVendors.includes(vendor.vendor_id) ? (\r\n                              <>\r\n                                <FaCheck /> Requested\r\n                              </>\r\n                            ) : (\r\n                              <>\r\n                                <FaPlus /> Request Vendor\r\n                              </>\r\n                            )}\r\n                          </button>\r\n                          {selectedVendors.includes(vendor.vendor_id) && (\r\n                            <button\r\n                              type=\"button\"\r\n                              className=\"undo-request-btn\"\r\n                              onClick={() =>\r\n                                handleVendorToggle(vendor.vendor_id)\r\n                              }\r\n                              disabled={!isEditing}\r\n                            >\r\n                              <FaTimes /> Undo\r\n                            </button>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              <div className=\"vendors-list\">\r\n                {selectedVendors.length > 0 ? (\r\n                  <ul>\r\n                    {selectedVendors.map((vendorId) => {\r\n                      const vendor = vendors.find(\r\n                        (v) => v.vendor_id === vendorId\r\n                      );\r\n                      return vendor ? (\r\n                        <li key={vendorId}>\r\n                          <strong>{vendor.business_name}</strong> -{\" \"}\r\n                          {vendor.service_type}\r\n                          <br />\r\n                          <small>{vendor.contact_number}</small>\r\n                        </li>\r\n                      ) : null;\r\n                    })}\r\n                  </ul>\r\n                ) : (\r\n                  <div className=\"no-vendors-section\">\r\n                    <p>No vendors selected</p>\r\n                    {vendorRequests && vendorRequests.length > 0 && (\r\n                      <div className=\"vendor-requests-container\">\r\n                        <h4>Vendor Requests</h4>\r\n                        <div className=\"vendor-requests-list\">\r\n                          {vendorRequests.map((request) => (\r\n                            <div\r\n                              key={request.request_id}\r\n                              className=\"vendor-request-item\"\r\n                            >\r\n                              <div className=\"vendor-request-info\">\r\n                                <strong>\r\n                                  {request.vendor?.business_name || \"Vendor\"}\r\n                                </strong>\r\n                                <span\r\n                                  className={`status-badge status-${request.status}`}\r\n                                >\r\n                                  {request.status}\r\n                                </span>\r\n                                <div className=\"vendor-details\">\r\n                                  <small>\r\n                                    Service:{\" \"}\r\n                                    {request.vendor?.service_type || \"Unknown\"}\r\n                                  </small>\r\n                                  <small>\r\n                                    Contact:{\" \"}\r\n                                    {request.vendor?.contact_number ||\r\n                                      \"Not provided\"}\r\n                                  </small>\r\n                                </div>\r\n                              </div>\r\n                              <div className=\"vendor-request-actions\">\r\n                                {request.status === \"pending\" && isEditing && (\r\n                                  <div className=\"action-buttons\">\r\n                                    <button\r\n                                      onClick={() =>\r\n                                        handleVendorRequestResponse(\r\n                                          request.request_id,\r\n                                          \"accepted\"\r\n                                        )\r\n                                      }\r\n                                      className=\"accept-btn\"\r\n                                    >\r\n                                      Accept\r\n                                    </button>\r\n                                    <button\r\n                                      onClick={() =>\r\n                                        handleVendorRequestResponse(\r\n                                          request.request_id,\r\n                                          \"rejected\"\r\n                                        )\r\n                                      }\r\n                                      className=\"reject-btn\"\r\n                                    >\r\n                                      Reject\r\n                                    </button>\r\n                                  </div>\r\n                                )}\r\n                                {request.status === \"accepted\" && (\r\n                                  <span className=\"status-label accepted\">\r\n                                     Accepted\r\n                                  </span>\r\n                                )}\r\n                                {request.status === \"rejected\" && (\r\n                                  <span className=\"status-label rejected\">\r\n                                     Rejected\r\n                                  </span>\r\n                                )}\r\n                              </div>\r\n                            </div>\r\n                          ))}\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n          </section>\r\n        )}\r\n        {activeView === \"documents\" && (\r\n          <section className=\"documents-section\">\r\n            <div className=\"documents-header\">\r\n              <h2>Documents</h2>\r\n            </div>\r\n            {isEditing && (\r\n              <div className=\"upload-area\">\r\n                <label className=\"upload-button\">\r\n                  <FaUpload /> Upload Documents\r\n                  <input\r\n                    type=\"file\"\r\n                    multiple\r\n                    onChange={handleFileUpload}\r\n                    style={{ display: \"none\" }}\r\n                    disabled={isUploading}\r\n                  />\r\n                </label>\r\n                {isUploading && (\r\n                  <div className=\"upload-progress\">\r\n                    <progress value={uploadProgress} max=\"100\" />\r\n                    <span>Uploading... {uploadProgress}%</span>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n            <div className=\"documents-list\">\r\n              {documents && documents.length > 0 ? (\r\n                <ul>\r\n                  {documents.map((doc, index) => (\r\n                    <li key={index} className=\"document-item\">\r\n                      <a\r\n                        href={doc.url}\r\n                        target=\"_blank\"\r\n                        rel=\"noopener noreferrer\"\r\n                      >\r\n                        <FaFilePdf /> {doc.name}\r\n                      </a>\r\n                      {isEditing && (\r\n                        <button\r\n                          onClick={() => handleDeleteDocument(doc)}\r\n                          className=\"delete-doc\"\r\n                          title=\"Delete document\"\r\n                        >\r\n                          <FaTimes />\r\n                        </button>\r\n                      )}\r\n                    </li>\r\n                  ))}\r\n                </ul>\r\n              ) : (\r\n                <p>No documents uploaded yet</p>\r\n              )}\r\n            </div>\r\n          </section>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EventDetails;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}