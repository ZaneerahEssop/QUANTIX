{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import Navbar from\"../components/Navbar\";import{useNavigate}from\"react-router-dom\";import\"../styling/PendingApproval.css\";import{supabase}from\"../client\";import{FaClock}from\"react-icons/fa\";import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";export default function PendingApprovalPage(){const[status,setStatus]=useState(\"pending\");const[loading,setLoading]=useState(true);const[session,setSession]=useState(null);const navigate=useNavigate();useEffect(()=>{const checkStatus=async()=>{const{data:{session}}=await supabase.auth.getSession();setSession(session);if(!(session!==null&&session!==void 0&&session.user)){navigate(\"/login\");return;}// fetch vendor status\nconst{data:vendor,error}=await supabase.from(\"vendors\").select(\"status\").eq(\"vendor_id\",session.user.id).single();if(error||!vendor){console.error(\"Error fetching vendor status:\",error===null||error===void 0?void 0:error.message);setStatus(\"pending\");}else if(vendor.status===\"accepted\"){navigate(\"/vendor-dashboard\");// redirect accepted vendors\n}else if(vendor.status===\"pending\"){setStatus(\"pending\");}else if(vendor.status===\"rejected\"){setStatus(\"rejected\");}else{setStatus(\"pending\");// fallback\n}setLoading(false);};checkStatus();},[navigate]);if(loading)return/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"});return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{session:session,showOnlyLogout:true}),/*#__PURE__*/_jsx(\"div\",{className:\"pending-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"pending-card\",children:[status===\"pending\"&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(FaClock,{className:\"pulsing-clock\",size:50}),/*#__PURE__*/_jsx(\"h2\",{children:\"Application Under Review\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Thank you for registering as a vendor. Your application is currently under review by our admins.\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Once approved, you\\u2019ll gain access to your vendor dashboard and can start listing your services.\"})]}),status===\"rejected\"&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Application Rejected\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Unfortunately, your vendor application has been rejected by our admins.\"})]}),status!==\"pending\"&&status!==\"rejected\"&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Unknown Status\"}),/*#__PURE__*/_jsx(\"p\",{children:\"We couldn\\u2019t determine your application status.\"})]})]})})]});}","map":{"version":3,"names":["React","useState","useEffect","Navbar","useNavigate","supabase","FaClock","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","PendingApprovalPage","status","setStatus","loading","setLoading","session","setSession","navigate","checkStatus","data","auth","getSession","user","vendor","error","from","select","eq","id","single","console","message","children","showOnlyLogout","className","size"],"sources":["C:/Users/Ammaarah/EventuallyPerfect/QUANTIX/frontend/src/pages/PendingApproval.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport Navbar from \"../components/Navbar\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport \"../styling/PendingApproval.css\";\r\nimport { supabase } from \"../client\";\r\nimport { FaClock } from \"react-icons/fa\";\r\n\r\nexport default function PendingApprovalPage() {\r\n  const [status, setStatus] = useState(\"pending\");\r\n  const [loading, setLoading] = useState(true);\r\n  const [session,setSession] = useState(null);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    const checkStatus = async () => {\r\n      const { data: { session } } = await supabase.auth.getSession();\r\n      setSession(session);\r\n      if (!session?.user) {\r\n        navigate(\"/login\");\r\n        return;\r\n      }\r\n\r\n      // fetch vendor status\r\n      const { data: vendor, error } = await supabase\r\n        .from(\"vendors\")\r\n        .select(\"status\")\r\n        .eq(\"vendor_id\", session.user.id)\r\n        .single();\r\n\r\n      if (error || !vendor) {\r\n        console.error(\"Error fetching vendor status:\", error?.message);\r\n        setStatus(\"pending\");\r\n      } else if (vendor.status === \"accepted\") {\r\n        navigate(\"/vendor-dashboard\"); // redirect accepted vendors\r\n      } else if (vendor.status === \"pending\") {\r\n        setStatus(\"pending\");\r\n      } else if (vendor.status === \"rejected\") {\r\n        setStatus(\"rejected\");\r\n      } else {\r\n        setStatus(\"pending\"); // fallback\r\n      }\r\n\r\n      setLoading(false);\r\n    };\r\n\r\n    checkStatus();\r\n  }, [navigate]);\r\n\r\n  if (loading) return <p>Loading...</p>;\r\n\r\n  return (\r\n    <>\r\n      <Navbar session={session} showOnlyLogout={true} />\r\n      <div className=\"pending-container\">\r\n        <div className=\"pending-card\">\r\n          {status === \"pending\" && (\r\n            <>\r\n              <FaClock className=\"pulsing-clock\" size={50} />\r\n              <h2>Application Under Review</h2>\r\n              <p>\r\n                Thank you for registering as a vendor. Your application is\r\n                currently under review by our admins.\r\n              </p>\r\n              <p>\r\n                Once approved, you’ll gain access to your vendor dashboard and\r\n                can start listing your services.\r\n              </p>\r\n            </>\r\n          )}\r\n\r\n          {status === \"rejected\" && (\r\n            <>\r\n              <h2>Application Rejected</h2>\r\n              <p>\r\n                Unfortunately, your vendor application has been rejected by our\r\n                admins.\r\n              </p>\r\n            </>\r\n          )}\r\n\r\n          {status !== \"pending\" && status !== \"rejected\" && (\r\n            <>\r\n              <h2>Unknown Status</h2>\r\n              <p>\r\n                We couldn’t determine your application status. \r\n              </p>\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}