{"ast":null,"code":"import _objectSpread from\"C:/Users/Ammaarah/EventuallyPerfect/QUANTIX/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useRef,useCallback}from'react';import ReactMarkdown from'react-markdown';import{supabase}from'../../client';import{FaCheckCircle,FaTimesCircle,FaInfoCircle}from'react-icons/fa';import'./CateringService.css';// Simple Text Editor Component\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const SimpleTextEditor=_ref=>{let{value,onChange,placeholder,height='150px'}=_ref;const textareaRef=useRef(null);const handleChange=e=>{onChange(e.target.value);};const applyFormat=format=>{const textarea=textareaRef.current;if(!textarea)return;const start=textarea.selectionStart;const end=textarea.selectionEnd;const selectedText=value.substring(start,end);let newValue=value;let newCursorPos=end;switch(format){case'bold':newValue=value.substring(0,start)+\"**\".concat(selectedText,\"**\")+value.substring(end);newCursorPos=selectedText?end+4:start+2;break;case'italic':newValue=value.substring(0,start)+\"*\".concat(selectedText,\"*\")+value.substring(end);newCursorPos=selectedText?end+2:start+1;break;case'bullet':newValue=value.substring(0,start)+\"- \".concat(selectedText)+value.substring(end);newCursorPos=selectedText?end+2:start+2;break;case'number':newValue=value.substring(0,start)+\"1. \".concat(selectedText)+value.substring(end);newCursorPos=selectedText?end+3:start+3;break;default:return;}onChange(newValue);setTimeout(()=>{textarea.selectionStart=textarea.selectionEnd=newCursorPos;textarea.focus();},0);};return/*#__PURE__*/_jsxs(\"div\",{className:\"text-editor-wrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"editor-toolbar\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>applyFormat('bold'),title:\"Bold\",className:\"format-button\",children:/*#__PURE__*/_jsx(\"strong\",{children:\"B\"})}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>applyFormat('italic'),title:\"Italic\",className:\"format-button\",children:/*#__PURE__*/_jsx(\"em\",{children:\"I\"})}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>applyFormat('bullet'),title:\"Bullet List\",className:\"format-button\",children:\"\\u2022\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>applyFormat('number'),title:\"Numbered List\",className:\"format-button\",children:\"1.\"})]}),/*#__PURE__*/_jsx(\"textarea\",{ref:textareaRef,className:\"simple-textarea\",value:value||'',onChange:handleChange,placeholder:placeholder,style:{minHeight:height}})]});};const CateringService=_ref2=>{let{vendorId,isReadOnly}=_ref2;const[isEditing,setIsEditing]=useState(false);const[isLoading,setIsLoading]=useState(true);const[photos,setPhotos]=useState([]);const[uploading,setUploading]=useState(false);const[toast,setToast]=useState(null);const toastTimeout=useRef(null);const fileInputRef=useRef(null);const[formData,setFormData]=useState({service_description:'',catering_types:'',menu_options:'',dietary_options:'',base_rate:'',additional_rates:''});// Show toast notification\nconst showToast=function(message){let type=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'info';if(toastTimeout.current)clearTimeout(toastTimeout.current);setToast({message,type});toastTimeout.current=setTimeout(()=>setToast(null),5000);};// Close toast manually\nconst closeToast=()=>{if(toastTimeout.current)clearTimeout(toastTimeout.current);setToast(null);};// Cleanup timeout on unmount\nuseEffect(()=>{return()=>{if(toastTimeout.current)clearTimeout(toastTimeout.current);};},[]);// Fetch catering service data\nconst fetchCateringData=useCallback(async()=>{try{const{data,error}=await supabase.from('vendor_services').select('*').eq('vendor_id',vendorId).eq('service_type','catering').single();if(error&&error.code!=='PGRST116'){// PGRST116 is the code for no rows returned\nthrow error;}if(data){setFormData({service_description:data.service_description||'',catering_types:data.catering_types||'',menu_options:data.menu_options||'',dietary_options:data.dietary_options||'',base_rate:data.base_rate||'',additional_rates:data.additional_rates||''});setPhotos(data.photos||[]);}else{// Initialize with empty values if no data found\nsetFormData({service_description:'',catering_types:'',menu_options:'',dietary_options:'',base_rate:'',additional_rates:''});setPhotos([]);}}catch(error){console.error('Error in fetchCateringData:',error);showToast('Error loading catering data. Please refresh.','error');}finally{setIsLoading(false);}},[vendorId]);// Add vendorId as a dependency\nuseEffect(()=>{fetchCateringData();},[vendorId,fetchCateringData]);const handleChange=(value,field)=>{setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[field]:value}));};const handleSubmit=async e=>{if(e)e.preventDefault();try{// Prepare the data to be saved\nconst serviceData={vendor_id:vendorId,service_type:'catering',service_description:formData.service_description||'',catering_types:formData.catering_types||'',menu_options:formData.menu_options||'',dietary_options:formData.dietary_options||'',base_rate:formData.base_rate||'',additional_rates:formData.additional_rates||'',photos:photos,// Include the photos array\nupdated_at:new Date().toISOString()};// Check if the record exists\nconst{data:existingService}=await supabase.from('vendor_services').select('id').eq('vendor_id',vendorId).eq('service_type','catering').single();let error;if(existingService){// Update existing record\nconst{error:updateError}=await supabase.from('vendor_services').update(serviceData).eq('id',existingService.id).select().single();// Data is saved, no need to store it\nerror=updateError;}else{// Insert new record\nconst{error:saveError}=await supabase.from('vendor_services').upsert([_objectSpread(_objectSpread(_objectSpread({},existingService?{id:existingService.id}:{}),{},{vendor_id:vendorId,service_type:'catering'},formData),{},{updated_at:new Date().toISOString()})],{onConflict:'vendor_id,service_type'});error=saveError;}if(error){console.error('Database error:',{message:error.message,details:error.details,hint:error.hint,code:error.code});throw error;}setIsEditing(false);showToast('Catering service saved successfully!','success');fetchCateringData();// Refresh data\n}catch(error){console.error('Error in handleSubmit:',error);showToast(\"Failed to save catering service: \".concat(error.message),'error');}};const handlePhotoUpload=async e=>{const file=e.target.files[0];if(!file)return;if(!file.type.startsWith('image/')){showToast('Please upload an image file','error');return;}// Check file size (5MB limit)\nif(file.size>5*1024*1024){showToast('File size too large. Maximum size is 5MB.','error');return;}setUploading(true);try{// Skip bucket existence check and try to upload directly\n// The RLS policies will handle the permission check\n// Get the current user\nconst{data:{user},error:userError}=await supabase.auth.getUser();if(userError||!user){throw new Error('You must be logged in to upload photos.');}// Create file path that matches the RLS policy\n// The RLS expects the first folder to be the user's ID\nconst filePath=\"\".concat(user.id,\"/catering/\").concat(Date.now(),\"-\").concat(file.name);// Upload the file to storage with proper error handling\nconst{error:uploadError}=await supabase.storage.from('portfolio-photos').upload(filePath,file,{cacheControl:'3600',upsert:false,contentType:file.type,metadata:{uploaded_by:user.id,uploaded_at:new Date().toISOString(),vendor_id:vendorId// Store the vendor ID in metadata for reference\n}});if(uploadError){console.error('Upload error:',uploadError);// If the error is about RLS, provide a more helpful message\nif(uploadError.message.includes('row-level security')){throw new Error('Permission denied. Please make sure you are logged in and have the necessary permissions.');}throw uploadError;}// 2. Get the public URL\nconst{data:{publicUrl}}=supabase.storage.from('portfolio-photos').getPublicUrl(filePath);// 3. Create the new photo object\nconst newPhoto={url:publicUrl,path:filePath,created_at:new Date().toISOString()};// 4. Get the existing service record\nconst{data:existingService}=await supabase.from('vendor_services').select('id, photos').eq('vendor_id',vendorId).eq('service_type','catering').single();const currentPhotos=(existingService===null||existingService===void 0?void 0:existingService.photos)||[];const updatedPhotos=[...currentPhotos,newPhoto];// 5. Update or create the service record with the new photos array\nif(existingService){// Update existing record\nconst{error:updateError}=await supabase.from('vendor_services').update({photos:updatedPhotos,updated_at:new Date().toISOString()}).eq('id',existingService.id);if(updateError)throw updateError;}else{// Create new record\nconst{error:insertError}=await supabase.from('vendor_services').insert([{vendor_id:vendorId,service_type:'catering',photos:updatedPhotos,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]);if(insertError)throw insertError;}// 6. Update local state\nsetPhotos(updatedPhotos);e.target.value=null;showToast('Photo uploaded successfully!','success');}catch(error){console.error('Error uploading photo:',error);showToast('Failed to upload photo. Please try again.','error');}finally{setUploading(false);}};const handleDeletePhoto=async photoUrl=>{if(!window.confirm('Are you sure you want to delete this photo?'))return;try{// 1. Find the photo in the current photos array to get its path\nconst photoToDelete=photos.find(p=>p.url===photoUrl);if(!photoToDelete)throw new Error('Photo not found');// 2. Delete from storage\nconst{error:deleteError}=await supabase.storage.from('portfolio-photos').remove([photoToDelete.path]);if(deleteError)throw deleteError;// 3. Get the existing service record\nconst{data:existingService,error:fetchError}=await supabase.from('vendor_services').select('id').eq('vendor_id',vendorId).eq('service_type','catering').single();if(fetchError)throw fetchError;if(!existingService)throw new Error('Service record not found');// 4. Update the database to remove the photo\nconst updatedPhotos=photos.filter(p=>p.url!==photoUrl);const{error:updateError}=await supabase.from('vendor_services').update({photos:updatedPhotos,updated_at:new Date().toISOString()}).eq('id',existingService.id);if(updateError)throw updateError;// 5. Update local state\nsetPhotos(updatedPhotos);showToast('Photo deleted successfully!','success');}catch(error){console.error('Error deleting photo:',error);showToast('Failed to delete photo. Please try again.','error');}};// Toast Notification Component\nconst ToastNotification=()=>{if(!toast)return null;const iconMap={success:/*#__PURE__*/_jsx(FaCheckCircle,{className:\"toast-icon\"}),error:/*#__PURE__*/_jsx(FaTimesCircle,{className:\"toast-icon\"}),info:/*#__PURE__*/_jsx(FaInfoCircle,{className:\"toast-icon\"})};return/*#__PURE__*/_jsxs(\"div\",{className:\"toast-notification \".concat(toast.type),children:[iconMap[toast.type],/*#__PURE__*/_jsx(\"span\",{className:\"toast-message\",children:toast.message}),/*#__PURE__*/_jsx(\"button\",{onClick:closeToast,className:\"toast-close\",\"aria-label\":\"Close notification\",children:\"\\xD7\"})]});};if(isLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Loading catering services...\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"catering-service\",children:[toast&&/*#__PURE__*/_jsx(ToastNotification,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"service-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"service-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Catering Service\"}),isEditing?/*#__PURE__*/_jsxs(\"div\",{className:\"form-actions\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"cancel-button\",onClick:()=>{setIsEditing(false);fetchCateringData();},children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"save-button\",form:\"service-form\",children:\"Save Changes\"})]}):!isReadOnly&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"edit-button\",onClick:()=>setIsEditing(true),children:\"Edit Service\"})]}),isEditing?/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,id:\"service-form\",className:\"service-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"rich-text-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Service Description\"}),/*#__PURE__*/_jsx(SimpleTextEditor,{value:formData.service_description,onChange:v=>handleChange(v,'service_description'),placeholder:\"Describe your catering service...\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"rich-text-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Catering Types\"}),/*#__PURE__*/_jsx(SimpleTextEditor,{value:formData.catering_types,onChange:v=>handleChange(v,'catering_types'),placeholder:\"e.g., Buffet, Plated, Family Style...\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"rich-text-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Menu Options\"}),/*#__PURE__*/_jsx(SimpleTextEditor,{value:formData.menu_options,onChange:v=>handleChange(v,'menu_options'),placeholder:\"Describe your menu options and specialties...\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"rich-text-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Dietary Options\"}),/*#__PURE__*/_jsx(SimpleTextEditor,{value:formData.dietary_options,onChange:v=>handleChange(v,'dietary_options'),placeholder:\"e.g., Vegetarian, Vegan, Gluten-Free...\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"rich-text-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Base Rate\"}),/*#__PURE__*/_jsx(SimpleTextEditor,{value:formData.base_rate,onChange:v=>handleChange(v,'base_rate'),placeholder:\"e.g., $50 per person, $1000 minimum...\",height:\"100px\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"rich-text-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Additional Pricing & Packages\"}),/*#__PURE__*/_jsx(SimpleTextEditor,{value:formData.additional_rates,onChange:v=>handleChange(v,'additional_rates'),placeholder:\"List any additional rates or packages...\"})]})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"service-details\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"service-section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Service Description\"}),/*#__PURE__*/_jsx(\"div\",{className:\"markdown-content\",children:/*#__PURE__*/_jsx(ReactMarkdown,{children:formData.service_description||'No description provided.'})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"service-section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Catering Types\"}),/*#__PURE__*/_jsx(\"div\",{className:\"markdown-content\",children:/*#__PURE__*/_jsx(ReactMarkdown,{children:formData.catering_types||'No catering types specified.'})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"service-section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Menu Options\"}),/*#__PURE__*/_jsx(\"div\",{className:\"markdown-content\",children:/*#__PURE__*/_jsx(ReactMarkdown,{children:formData.menu_options||'No menu options provided.'})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"service-section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Dietary Options\"}),/*#__PURE__*/_jsx(\"div\",{className:\"markdown-content\",children:/*#__PURE__*/_jsx(ReactMarkdown,{children:formData.dietary_options||'No dietary options specified.'})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"service-section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Pricing\"}),/*#__PURE__*/_jsx(\"h5\",{children:\"Base Rate\"}),/*#__PURE__*/_jsx(\"div\",{className:\"markdown-content\",children:/*#__PURE__*/_jsx(ReactMarkdown,{children:formData.base_rate||'No base rate specified.'})}),formData.additional_rates&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h5\",{style:{marginTop:'15px'},children:\"Additional Rates & Packages\"}),/*#__PURE__*/_jsx(\"div\",{className:\"markdown-content\",children:/*#__PURE__*/_jsx(ReactMarkdown,{children:formData.additional_rates})})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"service-images\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Food Gallery\"}),/*#__PURE__*/_jsx(\"div\",{className:\"portfolio-grid\",children:photos&&photos.length>0?photos.map((photo,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"portfolio-photo\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(photo.url,\"?t=\").concat(new Date().getTime()),alt:\"Catering gallery \".concat(index+1),className:\"portfolio-image\",loading:\"lazy\"}),isEditing&&/*#__PURE__*/_jsx(\"button\",{className:\"delete-photo\",onClick:()=>handleDeletePhoto(photo.url),\"aria-label\":\"Delete photo\",children:\"\\xD7\"})]},photo.url)):/*#__PURE__*/_jsx(\"div\",{className:\"no-photos-container\",children:/*#__PURE__*/_jsx(\"span\",{className:\"no-photos\",children:\"No food photos added yet\"})})}),isEditing&&/*#__PURE__*/_jsxs(\"div\",{className:\"photo-upload\",children:[/*#__PURE__*/_jsx(\"input\",{ref:fileInputRef,type:\"file\",id:\"catering-photo-upload\",accept:\"image/*\",onChange:handlePhotoUpload,disabled:uploading,style:{display:'none'}}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"catering-photo-upload\",className:\"upload-button\",children:uploading?'Uploading...':'Add Photo to Gallery'}),/*#__PURE__*/_jsx(\"p\",{className:\"upload-hint\",children:\"Upload high-quality images of your dishes and service.\"})]})]})]});};export default CateringService;","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","ReactMarkdown","supabase","FaCheckCircle","FaTimesCircle","FaInfoCircle","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","SimpleTextEditor","_ref","value","onChange","placeholder","height","textareaRef","handleChange","e","target","applyFormat","format","textarea","current","start","selectionStart","end","selectionEnd","selectedText","substring","newValue","newCursorPos","concat","setTimeout","focus","className","children","type","onClick","title","ref","style","minHeight","CateringService","_ref2","vendorId","isReadOnly","isEditing","setIsEditing","isLoading","setIsLoading","photos","setPhotos","uploading","setUploading","toast","setToast","toastTimeout","fileInputRef","formData","setFormData","service_description","catering_types","menu_options","dietary_options","base_rate","additional_rates","showToast","message","arguments","length","undefined","clearTimeout","closeToast","fetchCateringData","data","error","from","select","eq","single","code","console","field","prev","_objectSpread","handleSubmit","preventDefault","serviceData","vendor_id","service_type","updated_at","Date","toISOString","existingService","updateError","update","id","saveError","upsert","onConflict","details","hint","handlePhotoUpload","file","files","startsWith","size","user","userError","auth","getUser","Error","filePath","now","name","uploadError","storage","upload","cacheControl","contentType","metadata","uploaded_by","uploaded_at","includes","publicUrl","getPublicUrl","newPhoto","url","path","created_at","currentPhotos","updatedPhotos","insertError","insert","handleDeletePhoto","photoUrl","window","confirm","photoToDelete","find","p","deleteError","remove","fetchError","filter","ToastNotification","iconMap","success","info","form","onSubmit","v","marginTop","map","photo","index","src","getTime","alt","loading","accept","disabled","display","htmlFor"],"sources":["C:/Users/Ammaarah/EventuallyPerfect/QUANTIX/frontend/src/components/services/CateringService.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from 'react';\r\nimport ReactMarkdown from 'react-markdown';\r\nimport { supabase } from '../../client';\r\nimport { FaCheckCircle, FaTimesCircle, FaInfoCircle } from 'react-icons/fa';\r\nimport './CateringService.css';\r\n\r\n// Simple Text Editor Component\r\nconst SimpleTextEditor = ({ value, onChange, placeholder, height = '150px' }) => {\r\n  const textareaRef = useRef(null);\r\n  \r\n  const handleChange = (e) => {\r\n    onChange(e.target.value);\r\n  };\r\n\r\n  const applyFormat = (format) => {\r\n    const textarea = textareaRef.current;\r\n    if (!textarea) return;\r\n\r\n    const start = textarea.selectionStart;\r\n    const end = textarea.selectionEnd;\r\n    const selectedText = value.substring(start, end);\r\n    let newValue = value;\r\n    let newCursorPos = end;\r\n\r\n    switch(format) {\r\n      case 'bold':\r\n        newValue = value.substring(0, start) + `**${selectedText}**` + value.substring(end);\r\n        newCursorPos = selectedText ? end + 4 : start + 2;\r\n        break;\r\n      case 'italic':\r\n        newValue = value.substring(0, start) + `*${selectedText}*` + value.substring(end);\r\n        newCursorPos = selectedText ? end + 2 : start + 1;\r\n        break;\r\n      case 'bullet':\r\n        newValue = value.substring(0, start) + `- ${selectedText}` + value.substring(end);\r\n        newCursorPos = selectedText ? end + 2 : start + 2;\r\n        break;\r\n      case 'number':\r\n        newValue = value.substring(0, start) + `1. ${selectedText}` + value.substring(end);\r\n        newCursorPos = selectedText ? end + 3 : start + 3;\r\n        break;\r\n      default:\r\n        return;\r\n    }\r\n\r\n    onChange(newValue);\r\n    \r\n    setTimeout(() => {\r\n      textarea.selectionStart = textarea.selectionEnd = newCursorPos;\r\n      textarea.focus();\r\n    }, 0);\r\n  };\r\n\r\n  return (\r\n    <div className=\"text-editor-wrapper\">\r\n      <div className=\"editor-toolbar\">\r\n        <button \r\n          type=\"button\" \r\n          onClick={() => applyFormat('bold')} \r\n          title=\"Bold\" \r\n          className=\"format-button\"\r\n        >\r\n          <strong>B</strong>\r\n        </button>\r\n        <button \r\n          type=\"button\" \r\n          onClick={() => applyFormat('italic')} \r\n          title=\"Italic\" \r\n          className=\"format-button\"\r\n        >\r\n          <em>I</em>\r\n        </button>\r\n        <button \r\n          type=\"button\" \r\n          onClick={() => applyFormat('bullet')} \r\n          title=\"Bullet List\" \r\n          className=\"format-button\"\r\n        >\r\n          â€¢\r\n        </button>\r\n        <button \r\n          type=\"button\" \r\n          onClick={() => applyFormat('number')} \r\n          title=\"Numbered List\" \r\n          className=\"format-button\"\r\n        >\r\n          1.\r\n        </button>\r\n      </div>\r\n      <textarea\r\n        ref={textareaRef}\r\n        className=\"simple-textarea\"\r\n        value={value || ''}\r\n        onChange={handleChange}\r\n        placeholder={placeholder}\r\n        style={{ minHeight: height }}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nconst CateringService = ({ vendorId, isReadOnly }) => {\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [photos, setPhotos] = useState([]);\r\n  const [uploading, setUploading] = useState(false);\r\n  const [toast, setToast] = useState(null);\r\n  const toastTimeout = useRef(null);\r\n  const fileInputRef = useRef(null);\r\n\r\n  const [formData, setFormData] = useState({\r\n    service_description: '',\r\n    catering_types: '',\r\n    menu_options: '',\r\n    dietary_options: '',\r\n    base_rate: '',\r\n    additional_rates: ''\r\n  });\r\n\r\n  // Show toast notification\r\n  const showToast = (message, type = 'info') => {\r\n    if (toastTimeout.current) clearTimeout(toastTimeout.current);\r\n    setToast({ message, type });\r\n    toastTimeout.current = setTimeout(() => setToast(null), 5000);\r\n  };\r\n\r\n  // Close toast manually\r\n  const closeToast = () => {\r\n    if (toastTimeout.current) clearTimeout(toastTimeout.current);\r\n    setToast(null);\r\n  };\r\n\r\n  // Cleanup timeout on unmount\r\n  useEffect(() => {\r\n    return () => {\r\n      if (toastTimeout.current) clearTimeout(toastTimeout.current);\r\n    };\r\n  }, []);\r\n\r\n  // Fetch catering service data\r\n  const fetchCateringData = useCallback(async () => {\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from('vendor_services')\r\n        .select('*')\r\n        .eq('vendor_id', vendorId)\r\n        .eq('service_type', 'catering')\r\n        .single();\r\n\r\n      if (error && error.code !== 'PGRST116') { // PGRST116 is the code for no rows returned\r\n        throw error;\r\n      }\r\n\r\n      if (data) {\r\n        setFormData({\r\n          service_description: data.service_description || '',\r\n          catering_types: data.catering_types || '',\r\n          menu_options: data.menu_options || '',\r\n          dietary_options: data.dietary_options || '',\r\n          base_rate: data.base_rate || '',\r\n          additional_rates: data.additional_rates || ''\r\n        });\r\n        setPhotos(data.photos || []);\r\n      } else {\r\n        // Initialize with empty values if no data found\r\n        setFormData({\r\n          service_description: '',\r\n          catering_types: '',\r\n          menu_options: '',\r\n          dietary_options: '',\r\n          base_rate: '',\r\n          additional_rates: ''\r\n        });\r\n        setPhotos([]);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error in fetchCateringData:', error);\r\n      showToast('Error loading catering data. Please refresh.', 'error');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, [vendorId]); // Add vendorId as a dependency\r\n\r\n  useEffect(() => {\r\n    fetchCateringData();\r\n  }, [vendorId, fetchCateringData]);\r\n\r\n  const handleChange = (value, field) => {\r\n    setFormData(prev => ({ ...prev, [field]: value }));\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    if (e) e.preventDefault();\r\n    \r\n    try {\r\n      // Prepare the data to be saved\r\n      const serviceData = {\r\n        vendor_id: vendorId,\r\n        service_type: 'catering',\r\n        service_description: formData.service_description || '',\r\n        catering_types: formData.catering_types || '',\r\n        menu_options: formData.menu_options || '',\r\n        dietary_options: formData.dietary_options || '',\r\n        base_rate: formData.base_rate || '',\r\n        additional_rates: formData.additional_rates || '',\r\n        photos: photos, // Include the photos array\r\n        updated_at: new Date().toISOString()\r\n      };\r\n\r\n      // Check if the record exists\r\n      const { data: existingService } = await supabase\r\n        .from('vendor_services')\r\n        .select('id')\r\n        .eq('vendor_id', vendorId)\r\n        .eq('service_type', 'catering')\r\n        .single();\r\n\r\n      let error;\r\n\r\n      if (existingService) {\r\n        // Update existing record\r\n        const { error: updateError } = await supabase\r\n          .from('vendor_services')\r\n          .update(serviceData)\r\n          .eq('id', existingService.id)\r\n          .select()\r\n          .single();\r\n\r\n        // Data is saved, no need to store it\r\n        error = updateError;\r\n      } else {\r\n        // Insert new record\r\n        const { error: saveError } = await supabase\r\n          .from('vendor_services')\r\n          .upsert([{\r\n            ...(existingService ? { id: existingService.id } : {}),\r\n            vendor_id: vendorId,\r\n            service_type: 'catering',\r\n            ...formData,\r\n            updated_at: new Date().toISOString()\r\n          }], { onConflict: 'vendor_id,service_type' });\r\n\r\n        error = saveError;\r\n      }\r\n\r\n      if (error) {\r\n        console.error('Database error:', {\r\n          message: error.message,\r\n          details: error.details,\r\n          hint: error.hint,\r\n          code: error.code\r\n        });\r\n        throw error;\r\n      }\r\n\r\n      setIsEditing(false);\r\n      showToast('Catering service saved successfully!', 'success');\r\n      fetchCateringData(); // Refresh data\r\n    } catch (error) {\r\n      console.error('Error in handleSubmit:', error);\r\n      showToast(`Failed to save catering service: ${error.message}`, 'error');\r\n    }\r\n  };\r\n\r\n  const handlePhotoUpload = async (e) => {\r\n    const file = e.target.files[0];\r\n    if (!file) return;\r\n\r\n    if (!file.type.startsWith('image/')) {\r\n      showToast('Please upload an image file', 'error');\r\n      return;\r\n    }\r\n    \r\n    // Check file size (5MB limit)\r\n    if (file.size > 5 * 1024 * 1024) {\r\n      showToast('File size too large. Maximum size is 5MB.', 'error');\r\n      return;\r\n    }\r\n    \r\n    setUploading(true);\r\n\r\n    try {\r\n      // Skip bucket existence check and try to upload directly\r\n      // The RLS policies will handle the permission check\r\n\r\n      // Get the current user\r\n      const { data: { user }, error: userError } = await supabase.auth.getUser();\r\n      \r\n      if (userError || !user) {\r\n        throw new Error('You must be logged in to upload photos.');\r\n      }\r\n\r\n      // Create file path that matches the RLS policy\r\n      // The RLS expects the first folder to be the user's ID\r\n      const filePath = `${user.id}/catering/${Date.now()}-${file.name}`;\r\n\r\n      // Upload the file to storage with proper error handling\r\n      const { error: uploadError } = await supabase.storage\r\n        .from('portfolio-photos')\r\n        .upload(filePath, file, {\r\n          cacheControl: '3600',\r\n          upsert: false,\r\n          contentType: file.type,\r\n          metadata: {\r\n            uploaded_by: user.id,\r\n            uploaded_at: new Date().toISOString(),\r\n            vendor_id: vendorId  // Store the vendor ID in metadata for reference\r\n          }\r\n        });\r\n\r\n      if (uploadError) {\r\n        console.error('Upload error:', uploadError);\r\n        // If the error is about RLS, provide a more helpful message\r\n        if (uploadError.message.includes('row-level security')) {\r\n          throw new Error('Permission denied. Please make sure you are logged in and have the necessary permissions.');\r\n        }\r\n        throw uploadError;\r\n      }\r\n\r\n      // 2. Get the public URL\r\n      const { data: { publicUrl } } = supabase.storage\r\n        .from('portfolio-photos')\r\n        .getPublicUrl(filePath);\r\n\r\n      // 3. Create the new photo object\r\n      const newPhoto = {\r\n        url: publicUrl,\r\n        path: filePath,\r\n        created_at: new Date().toISOString()\r\n      };\r\n\r\n      // 4. Get the existing service record\r\n      const { data: existingService } = await supabase\r\n        .from('vendor_services')\r\n        .select('id, photos')\r\n        .eq('vendor_id', vendorId)\r\n        .eq('service_type', 'catering')\r\n        .single();\r\n\r\n      const currentPhotos = existingService?.photos || [];\r\n      const updatedPhotos = [...currentPhotos, newPhoto];\r\n\r\n      // 5. Update or create the service record with the new photos array\r\n      if (existingService) {\r\n        // Update existing record\r\n        const { error: updateError } = await supabase\r\n          .from('vendor_services')\r\n          .update({ \r\n            photos: updatedPhotos,\r\n            updated_at: new Date().toISOString()\r\n          })\r\n          .eq('id', existingService.id);\r\n\r\n        if (updateError) throw updateError;\r\n      } else {\r\n        // Create new record\r\n        const { error: insertError } = await supabase\r\n          .from('vendor_services')\r\n          .insert([{\r\n            vendor_id: vendorId,\r\n            service_type: 'catering',\r\n            photos: updatedPhotos,\r\n            created_at: new Date().toISOString(),\r\n            updated_at: new Date().toISOString()\r\n          }]);\r\n\r\n        if (insertError) throw insertError;\r\n      }\r\n\r\n      // 6. Update local state\r\n      setPhotos(updatedPhotos);\r\n      e.target.value = null;\r\n      showToast('Photo uploaded successfully!', 'success');\r\n    } catch (error) {\r\n      console.error('Error uploading photo:', error);\r\n      showToast('Failed to upload photo. Please try again.', 'error');\r\n    } finally {\r\n      setUploading(false);\r\n    }\r\n  };\r\n\r\n  const handleDeletePhoto = async (photoUrl) => {\r\n    if (!window.confirm('Are you sure you want to delete this photo?')) return;\r\n\r\n    try {\r\n      // 1. Find the photo in the current photos array to get its path\r\n      const photoToDelete = photos.find(p => p.url === photoUrl);\r\n      if (!photoToDelete) throw new Error('Photo not found');\r\n\r\n      // 2. Delete from storage\r\n      const { error: deleteError } = await supabase.storage\r\n        .from('portfolio-photos')\r\n        .remove([photoToDelete.path]);\r\n\r\n      if (deleteError) throw deleteError;\r\n\r\n      // 3. Get the existing service record\r\n      const { data: existingService, error: fetchError } = await supabase\r\n        .from('vendor_services')\r\n        .select('id')\r\n        .eq('vendor_id', vendorId)\r\n        .eq('service_type', 'catering')\r\n        .single();\r\n\r\n      if (fetchError) throw fetchError;\r\n      if (!existingService) throw new Error('Service record not found');\r\n\r\n      // 4. Update the database to remove the photo\r\n      const updatedPhotos = photos.filter(p => p.url !== photoUrl);\r\n      \r\n      const { error: updateError } = await supabase\r\n        .from('vendor_services')\r\n        .update({ \r\n          photos: updatedPhotos,\r\n          updated_at: new Date().toISOString()\r\n        })\r\n        .eq('id', existingService.id);\r\n\r\n      if (updateError) throw updateError;\r\n\r\n      // 5. Update local state\r\n      setPhotos(updatedPhotos);\r\n      showToast('Photo deleted successfully!', 'success');\r\n    } catch (error) {\r\n      console.error('Error deleting photo:', error);\r\n      showToast('Failed to delete photo. Please try again.', 'error');\r\n    }\r\n  };\r\n\r\n  // Toast Notification Component\r\n  const ToastNotification = () => {\r\n    if (!toast) return null;\r\n    const iconMap = {\r\n      success: <FaCheckCircle className=\"toast-icon\" />,\r\n      error: <FaTimesCircle className=\"toast-icon\" />,\r\n      info: <FaInfoCircle className=\"toast-icon\" />\r\n    };\r\n    return (\r\n      <div className={`toast-notification ${toast.type}`}>\r\n        {iconMap[toast.type]}\r\n        <span className=\"toast-message\">{toast.message}</span>\r\n        <button onClick={closeToast} className=\"toast-close\" aria-label=\"Close notification\">\r\n          &times;\r\n        </button>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  if (isLoading) {\r\n    return <div className=\"loading\">Loading catering services...</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"catering-service\">\r\n      {toast && <ToastNotification />}\r\n      <div className=\"service-content\">\r\n        <div className=\"service-header\">\r\n          <h3>Catering Service</h3>\r\n          {isEditing ? (\r\n            <div className=\"form-actions\">\r\n              <button\r\n                type=\"button\"\r\n                className=\"cancel-button\"\r\n                onClick={() => {\r\n                  setIsEditing(false);\r\n                  fetchCateringData();\r\n                }}\r\n              >\r\n                Cancel\r\n              </button>\r\n              <button type=\"submit\" className=\"save-button\" form=\"service-form\">\r\n                Save Changes\r\n              </button>\r\n            </div>\r\n          ) : !isReadOnly && (\r\n            <button\r\n              type=\"button\"\r\n              className=\"edit-button\"\r\n              onClick={() => setIsEditing(true)}\r\n            >\r\n              Edit Service\r\n            </button>\r\n          )}\r\n        </div>\r\n\r\n        {isEditing ? (\r\n          <form onSubmit={handleSubmit} id=\"service-form\" className=\"service-form\">\r\n            <div className=\"rich-text-group\">\r\n              <label>Service Description</label>\r\n              <SimpleTextEditor\r\n                value={formData.service_description}\r\n                onChange={(v) => handleChange(v, 'service_description')}\r\n                placeholder=\"Describe your catering service...\"\r\n              />\r\n            </div>\r\n            <div className=\"rich-text-group\">\r\n              <label>Catering Types</label>\r\n              <SimpleTextEditor\r\n                value={formData.catering_types}\r\n                onChange={(v) => handleChange(v, 'catering_types')}\r\n                placeholder=\"e.g., Buffet, Plated, Family Style...\"\r\n              />\r\n            </div>\r\n            <div className=\"rich-text-group\">\r\n              <label>Menu Options</label>\r\n              <SimpleTextEditor\r\n                value={formData.menu_options}\r\n                onChange={(v) => handleChange(v, 'menu_options')}\r\n                placeholder=\"Describe your menu options and specialties...\"\r\n              />\r\n            </div>\r\n            <div className=\"rich-text-group\">\r\n              <label>Dietary Options</label>\r\n              <SimpleTextEditor\r\n                value={formData.dietary_options}\r\n                onChange={(v) => handleChange(v, 'dietary_options')}\r\n                placeholder=\"e.g., Vegetarian, Vegan, Gluten-Free...\"\r\n              />\r\n            </div>\r\n            <div className=\"rich-text-group\">\r\n              <label>Base Rate</label>\r\n              <SimpleTextEditor\r\n                value={formData.base_rate}\r\n                onChange={(v) => handleChange(v, 'base_rate')}\r\n                placeholder=\"e.g., $50 per person, $1000 minimum...\"\r\n                height=\"100px\"\r\n              />\r\n            </div>\r\n            <div className=\"rich-text-group\">\r\n              <label>Additional Pricing & Packages</label>\r\n              <SimpleTextEditor\r\n                value={formData.additional_rates}\r\n                onChange={(v) => handleChange(v, 'additional_rates')}\r\n                placeholder=\"List any additional rates or packages...\"\r\n              />\r\n            </div>\r\n          </form>\r\n        ) : (\r\n          <div className=\"service-details\">\r\n            <div className=\"service-section\">\r\n              <h4>Service Description</h4>\r\n              <div className=\"markdown-content\">\r\n                <ReactMarkdown>{formData.service_description || 'No description provided.'}</ReactMarkdown>\r\n              </div>\r\n            </div>\r\n            <div className=\"service-section\">\r\n              <h4>Catering Types</h4>\r\n              <div className=\"markdown-content\">\r\n                <ReactMarkdown>{formData.catering_types || 'No catering types specified.'}</ReactMarkdown>\r\n              </div>\r\n            </div>\r\n            <div className=\"service-section\">\r\n              <h4>Menu Options</h4>\r\n              <div className=\"markdown-content\">\r\n                <ReactMarkdown>{formData.menu_options || 'No menu options provided.'}</ReactMarkdown>\r\n              </div>\r\n            </div>\r\n            <div className=\"service-section\">\r\n              <h4>Dietary Options</h4>\r\n              <div className=\"markdown-content\">\r\n                <ReactMarkdown>{formData.dietary_options || 'No dietary options specified.'}</ReactMarkdown>\r\n              </div>\r\n            </div>\r\n            <div className=\"service-section\">\r\n              <h4>Pricing</h4>\r\n              <h5>Base Rate</h5>\r\n              <div className=\"markdown-content\">\r\n                <ReactMarkdown>{formData.base_rate || 'No base rate specified.'}</ReactMarkdown>\r\n              </div>\r\n              {formData.additional_rates && (\r\n                <>\r\n                  <h5 style={{ marginTop: '15px' }}>Additional Rates & Packages</h5>\r\n                  <div className=\"markdown-content\">\r\n                    <ReactMarkdown>{formData.additional_rates}</ReactMarkdown>\r\n                  </div>\r\n                </>\r\n              )}\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      <div className=\"service-images\">\r\n        <h4>Food Gallery</h4>\r\n        <div className=\"portfolio-grid\">\r\n          {photos && photos.length > 0 ? (\r\n            photos.map((photo, index) => (\r\n              <div key={photo.url} className=\"portfolio-photo\">\r\n                <img\r\n                  src={`${photo.url}?t=${new Date().getTime()}`}\r\n                  alt={`Catering gallery ${index + 1}`}\r\n                  className=\"portfolio-image\"\r\n                  loading=\"lazy\"\r\n                />\r\n                {isEditing && (\r\n                  <button\r\n                    className=\"delete-photo\"\r\n                    onClick={() => handleDeletePhoto(photo.url)}\r\n                    aria-label=\"Delete photo\"\r\n                  >\r\n                    &times;\r\n                  </button>\r\n                )}\r\n              </div>\r\n            ))\r\n          ) : (\r\n            <div className=\"no-photos-container\">\r\n              <span className=\"no-photos\">No food photos added yet</span>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {isEditing && (\r\n          <div className=\"photo-upload\">\r\n            <input\r\n              ref={fileInputRef}\r\n              type=\"file\"\r\n              id=\"catering-photo-upload\"\r\n              accept=\"image/*\"\r\n              onChange={handlePhotoUpload}\r\n              disabled={uploading}\r\n              style={{ display: 'none' }}\r\n            />\r\n            <label htmlFor=\"catering-photo-upload\" className=\"upload-button\">\r\n              {uploading ? 'Uploading...' : 'Add Photo to Gallery'}\r\n            </label>\r\n            <p className=\"upload-hint\">Upload high-quality images of your dishes and service.</p>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CateringService;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}