{"ast":null,"code":"import _objectSpread from\"C:/Users/Ammaarah/EventuallyPerfect/QUANTIX/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useCallback,useEffect,useLayoutEffect,useState}from\"react\";import{useNavigate}from\"react-router-dom\";import{supabase}from\"../client\";import{FaPlus,FaTrash,FaCheck,FaUser,FaClock}from\"react-icons/fa\";import Calendar from\"react-calendar\";import\"react-calendar/dist/Calendar.css\";import Navbar from\"../components/Navbar\";import ChatUI from\"../components/ChatUI\";import chatService from\"../services/chatService\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function PlannerDashboard(_ref){let{session}=_ref;const navigate=useNavigate();const[userName,setUserName]=useState(\"Planner\");const[preview,setPreview]=useState(null);const[showImageModal,setShowImageModal]=useState(false);// Tasks state\nconst[tasks,setTasks]=useState([]);const[events,setEvents]=useState([]);const[newTask,setNewTask]=useState(\"\");const[date,setDate]=useState(new Date());const[loading,setLoading]=useState(true);const[selectedVendor,setSelectedVendor]=useState(null);const[chatMessages,setChatMessages]=useState({});const[,setConversations]=useState([]);const[currentConversation,setCurrentConversation]=useState(null);const[unreadCount,setUnreadCount]=useState(0);console.log(\"API URL:\",process.env.REACT_APP_BASE_URL);// Load conversations for the planner\nconst loadConversations=useCallback(async()=>{if(!(session!==null&&session!==void 0&&session.user))return;try{const conversations=await chatService.getUserConversations(session.user.id);setConversations(conversations);}catch(error){console.error('Error loading conversations:',error);}},[session===null||session===void 0?void 0:session.user]);// Load unread message count\nconst loadUnreadCount=useCallback(async()=>{if(!(session!==null&&session!==void 0&&session.user))return;try{const count=await chatService.getUnreadCount(session.user.id);setUnreadCount(count);}catch(error){console.error('Error loading unread count:',error);}},[session===null||session===void 0?void 0:session.user]);// Initialize chat service and set up real-time listeners\nuseEffect(()=>{if(session!==null&&session!==void 0&&session.user){// Connect to chat service\nchatService.connect(session.user.id);// Set up real-time listeners\nchatService.onNewMessage(message=>{console.log('New message received:',message);// Update messages for the conversation\nsetChatMessages(prev=>{var _message$sender;const conversationId=message.conversation_id;return _objectSpread(_objectSpread({},prev),{},{[conversationId]:[...(prev[conversationId]||[]),{id:message.message_id,text:message.message_text,timestamp:message.created_at,isCurrentUser:message.sender_id===session.user.id,sender:((_message$sender=message.sender)===null||_message$sender===void 0?void 0:_message$sender.name)||'Unknown',conversationId:message.conversation_id}]});});});chatService.onMessageError(error=>{console.error('Message error:',error);// You could show a toast notification here\n});chatService.onMessageNotification(notification=>{console.log('Message notification:',notification);// Update unread count or show notification\nsetUnreadCount(prev=>prev+1);});// Load conversations and unread count\nloadConversations();loadUnreadCount();}return()=>{chatService.removeAllListeners();};},[session===null||session===void 0?void 0:session.user,loadConversations,loadUnreadCount]);// Handle sending a message\nconst handleSendMessage=async message=>{if(!currentConversation||!(session!==null&&session!==void 0&&session.user))return;try{// Send message via WebSocket for real-time delivery\nchatService.sendMessage(currentConversation.conversation_id,session.user.id,message.text,'text');// Also send via API as backup\nawait chatService.sendMessageAPI(currentConversation.conversation_id,session.user.id,message.text,'text');// Update local state immediately for better UX\nsetChatMessages(prev=>_objectSpread(_objectSpread({},prev),{},{[currentConversation.conversation_id]:[...(prev[currentConversation.conversation_id]||[]),_objectSpread(_objectSpread({},message),{},{conversationId:currentConversation.conversation_id})]}));}catch(error){console.error('Error sending message:',error);}};// Handle vendor selection and load conversation\nconst handleSelectVendor=async vendor=>{if(!(session!==null&&session!==void 0&&session.user))return;setSelectedVendor(vendor);try{// Get or create conversation with the vendor\nconst conversation=await chatService.getOrCreateConversation(session.user.id,vendor.id);setCurrentConversation(conversation);// Join the conversation room for real-time updates\nchatService.joinConversation(conversation.conversation_id);// Load messages for this conversation\nconst messages=await chatService.getConversationMessages(conversation.conversation_id);// Transform messages to match ChatUI format\nconst formattedMessages=messages.map(msg=>{var _msg$sender;return{id:msg.message_id,text:msg.message_text,timestamp:msg.created_at,isCurrentUser:msg.sender_id===session.user.id,sender:((_msg$sender=msg.sender)===null||_msg$sender===void 0?void 0:_msg$sender.name)||'Unknown'};});setChatMessages(prev=>_objectSpread(_objectSpread({},prev),{},{[conversation.conversation_id]:formattedMessages}));// Mark messages as read\nawait chatService.markMessagesAsRead(conversation.conversation_id,session.user.id);}catch(error){console.error('Error selecting vendor:',error);}};const API_URL=window.location.hostname===\"localhost\"||window.location.hostname===\"127.0.0.1\"?\"http://localhost:5000\":\"https://quantix-production.up.railway.app\";console.log(\"Current hostname:\",window.location.hostname);console.log(\"Using API_URL:\",API_URL);// Prevent scrolling until page is fully loaded\nuseLayoutEffect(()=>{// Add a class to the body to prevent scrolling via CSS\ndocument.body.classList.add(\"dashboard-loading\");// Lock scroll on mount\ndocument.documentElement.style.overflow=\"hidden\";document.body.style.overflow=\"hidden\";// Scroll to top immediately\nwindow.scrollTo(0,0);// Re-enable scrolling after a longer delay (1000ms)\nconst timer=setTimeout(()=>{document.documentElement.style.overflow=\"auto\";document.body.style.overflow=\"auto\";document.body.classList.remove(\"dashboard-loading\");window.scrollTo(0,0);},1000);// Cleanup\nreturn()=>{clearTimeout(timer);document.documentElement.style.overflow=\"auto\";document.body.style.overflow=\"auto\";document.body.classList.remove(\"dashboard-loading\");};},[]);useEffect(()=>{if(!(session!==null&&session!==void 0&&session.user)){setLoading(false);return;}const fetchUserData=async()=>{try{setLoading(true);const response=await fetch(\"\".concat(API_URL,\"/api/planners/\").concat(session.user.id),{headers:{Accept:\"application/json\"}});const contentType=response.headers.get(\"content-type\");if(!contentType||!contentType.includes(\"application/json\")){const textResponse=await response.text();console.error(\"Server returned HTML instead of JSON:\",textResponse.substring(0,200));throw new Error(\"Server returned non-JSON response\");}if(!response.ok)throw new Error(\"Failed to fetch planner data\");const data=await response.json();setUserName(data.name||session.user.email.split(\"@\")[0]);setPreview(data.profile_picture||null);}catch(err){var _session$user$email;console.error(\"Error fetching user data:\",err);setUserName(((_session$user$email=session.user.email)===null||_session$user$email===void 0?void 0:_session$user$email.split(\"@\")[0])||\"Planner\");setPreview(null);}};const fetchEventsFromAPI=async()=>{try{const response=await fetch(\"\".concat(API_URL,\"/api/events?planner_id=\").concat(session.user.id),{cache:\"no-store\",headers:{Accept:\"application/json\"}});const contentType=response.headers.get(\"content-type\");if(!contentType||!contentType.includes(\"application/json\")){throw new Error(\"Server returned non-JSON response\");}if(!response.ok)throw new Error(\"Failed to fetch events\");const data=await response.json();setEvents(data);}catch(err){console.error(\"Error fetching events from API:\",err);}};const fetchTasks=async()=>{try{const{data,error}=await supabase.from(\"tasks\").select(\"*\").eq(\"planner_id\",session.user.id).order(\"created_at\",{ascending:false});if(error)throw error;const formattedTasks=data.map(task=>({id:task.task_id,text:task.item,completed:task.completed||false,created_at:task.created_at}));setTasks(formattedTasks);}catch(error){console.error(\"Error fetching tasks:\",error);}finally{setLoading(false);}};fetchUserData();fetchEventsFromAPI();fetchTasks();},[session,API_URL]);// Added API_URL to dependency array\nconst handleAddTask=async e=>{var _session$user;e.preventDefault();if(!newTask.trim()||!(session!==null&&session!==void 0&&(_session$user=session.user)!==null&&_session$user!==void 0&&_session$user.id)){var _session$user2;console.error(\"Missing required fields:\",{hasText:!!newTask.trim(),hasUserId:!!(session!==null&&session!==void 0&&(_session$user2=session.user)!==null&&_session$user2!==void 0&&_session$user2.id)});return;}try{// Get current auth session to verify user is authenticated\nconst{data:{user},error:authError}=await supabase.auth.getUser();if(authError||!user){console.error(\"Authentication error:\",authError||\"No user found\");throw new Error(\"Not authenticated\");}console.log(\"Current user:\",{id:user.id,email:user.email});const taskData={planner_id:user.id,// Use the ID from the auth session\nitem:newTask.trim(),completed:false};console.log(\"Attempting to add task with data:\",taskData);// Verify table access by making a test query\nconst{error:testError}=await supabase.from(\"tasks\").select(\"*\").limit(1);if(testError){console.error(\"Test query failed:\",testError);throw testError;}// Proceed with insert\nconst{data,error}=await supabase.from(\"tasks\").insert([taskData])// Note: Changed to array format which is required by Supabase\n.select();if(error){console.error(\"Supabase insert error details:\",{message:error.message,details:error.details,hint:error.hint,code:error.code});throw error;}console.log(\"Task added successfully:\",data);if(data&&data.length>0){const newTaskItem={id:data[0].id||data[0].task_id,// Try both possible ID fields\ntext:data[0].item,completed:data[0].completed||false,created_at:data[0].created_at||new Date().toISOString()};setTasks(prevTasks=>[newTaskItem,...prevTasks]);setNewTask(\"\");}}catch(error){console.error(\"Error adding task:\",error);}};const toggleTaskCompletion=async(taskId,completed)=>{try{const{error}=await supabase.from(\"tasks\").update({completed:!completed}).eq(\"task_id\",taskId);if(error)throw error;setTasks(tasks.map(task=>task.id===taskId?_objectSpread(_objectSpread({},task),{},{completed:!completed}):task));}catch(error){console.error(\"Error updating task:\",error);}};const deleteTask=async taskId=>{try{const{error}=await supabase.from(\"tasks\").delete().eq(\"task_id\",taskId);if(error)throw error;setTasks(tasks.filter(task=>task.id!==taskId));}catch(error){console.error(\"Error deleting task:\",error);}};const handleAddEvent=e=>{e.preventDefault();navigate(\"/add-event\");};// Loading state\nif(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"dashboard-container \".concat(loading?\"dashboard-loading\":\"\"),style:{padding:\"1.5rem\",maxWidth:\"1200px\",margin:\"0 auto\",minHeight:\"100vh\",position:\"relative\",overflow:\"hidden\"},children:/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:\"center\",padding:\"2rem\",borderRadius:\"8px\",backgroundColor:\"white\",boxShadow:\"0 2px 8px rgba(0,0,0,0.1)\"},children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner\",style:{width:\"40px\",height:\"40px\",margin:\"0 auto 1rem\",border:\"4px solid #FFF0F5\",borderTop:\"4px solid #FFB6C1\",borderRadius:\"50%\",animation:\"spin 1s linear infinite\"}}),/*#__PURE__*/_jsx(\"h3\",{style:{color:\"#FFB6C1\"},children:\"Loading your dashboard...\"})]})});}const formatTime=dateString=>{if(!dateString)return\"Time not set\";const date=new Date(dateString);return date.toLocaleTimeString(undefined,{hour:\"2-digit\",minute:\"2-digit\"});};// Format date to display in a readable format\nconst formatDate=dateString=>{const options={year:\"numeric\",month:\"long\",day:\"numeric\"};return new Date(dateString).toLocaleDateString(undefined,options);};// Add this function to check if an event is in the future\nconst isFutureEvent=eventDate=>{const now=new Date();const eventDateTime=new Date(eventDate);return eventDateTime>now;};// Get only future events\nconst getUpcomingEvents=()=>{return events.filter(event=>event.start_time&&isFutureEvent(event.start_time));};// Get events for the selected date\nconst getEventsForDate=date=>{return events.filter(event=>{const eventDate=new Date(event.start_time);return eventDate.toDateString()===date.toDateString();});};return/*#__PURE__*/_jsxs(\"div\",{className:\"planner-dashboard\",style:{minHeight:\"100vh\",background:\"radial-gradient(circle at 100% 0%, #FFE4C4, #FFB6C1)\",padding:\"80px 0 0 0\",boxSizing:\"border-box\"},children:[/*#__PURE__*/_jsx(Navbar,{session:session}),/*#__PURE__*/_jsx(\"div\",{style:{backgroundColor:\"white\",minHeight:\"calc(100vh - 100px)\",maxWidth:\"1200px\",margin:\"20px auto 0\",borderTopLeftRadius:\"30px\",borderTopRightRadius:\"30px\",padding:\"2rem\",boxShadow:\"0 5px 20px rgba(0,0,0,0.1)\",boxSizing:\"border-box\"},children:/*#__PURE__*/_jsxs(\"div\",{className:\"planner-dashboard-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-main\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:\"2rem\",display:\"flex\",alignItems:\"center\",gap:\"1.5rem\"},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:\"80px\",height:\"80px\",borderRadius:\"50%\",backgroundColor:preview?\"transparent\":\"#FFDAB9\",display:\"flex\",alignItems:\"center\",justifyContent:\"center\",overflow:\"hidden\",border:\"3px solid white\",boxShadow:\"0 2px 8px rgba(0,0,0,0.1)\",cursor:\"pointer\",transition:\"transform 0.2s\"},onClick:()=>preview&&setShowImageModal(true),onMouseOver:e=>e.currentTarget.style.transform=\"scale(1.05)\",onMouseOut:e=>e.currentTarget.style.transform=\"scale(1)\",children:preview?/*#__PURE__*/_jsx(\"img\",{src:preview,alt:\"Profile\",style:{width:\"100%\",height:\"100%\",objectFit:\"cover\"}}):/*#__PURE__*/_jsx(\"div\",{style:{width:\"100%\",height:\"100%\",display:\"flex\",alignItems:\"center\",justifyContent:\"center\",backgroundColor:\"#FFDAB9\"},children:/*#__PURE__*/_jsx(FaUser,{style:{fontSize:\"2.5rem\",color:\"#FFFFFF\",filter:\"drop-shadow(0 1px 2px rgba(0,0,0,0.1))\",width:\"100%\",height:\"100%\",padding:\"0.5rem\"}})})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h1\",{style:{fontSize:\"2rem\",color:\"#333\",margin:\"0 0 0.5rem 0\"},children:[\"Welcome back, \",userName,\"!\"]}),/*#__PURE__*/_jsx(\"p\",{style:{color:\"#666\",margin:0,fontSize:\"1rem\"},children:\"Here's what's happening with your plans today.\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"grid\",gridTemplateColumns:\"1fr 1fr\",gap:\"2rem\",marginBottom:\"2rem\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:\"#f8f9fa\",borderRadius:\"12px\",padding:\"1.5rem\",boxShadow:\"0 2px 8px rgba(0,0,0,0.1)\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",justifyContent:\"space-between\",alignItems:\"center\",marginBottom:\"1.5rem\"},children:[/*#__PURE__*/_jsx(\"h2\",{style:{margin:0},children:\"Upcoming Events\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleAddEvent,style:{backgroundColor:\"#E8B180\",border:\"none\",color:\"white\",padding:\"0.4rem 1rem\",borderRadius:\"6px\",cursor:\"pointer\",fontWeight:\"500\",transition:\"all 0.2s\",fontSize:\"0.9rem\",display:\"flex\",alignItems:\"center\",gap:\"0.5rem\"},onMouseOver:e=>{e.currentTarget.style.backgroundColor=\"#D89F73\";e.currentTarget.style.transform=\"translateY(-1px)\";},onMouseOut:e=>{e.currentTarget.style.backgroundColor=\"#E8B180\";e.currentTarget.style.transform=\"translateY(0)\";},children:[/*#__PURE__*/_jsx(FaPlus,{size:14}),\"Add Event\"]})]}),/*#__PURE__*/_jsx(\"div\",{style:{maxHeight:\"500px\",minHeight:\"400px\",overflowY:\"hidden\",paddingRight:\"0.5rem\",transition:\"all 0.3s ease\",scrollbarWidth:\"thin\",scrollbarColor:\"transparent transparent\",msOverflowStyle:\"none\"},onMouseEnter:e=>{e.currentTarget.style.overflowY=\"auto\";e.currentTarget.style.scrollbarColor=\"#E8B180 transparent\";},onMouseLeave:e=>{e.currentTarget.style.overflowY=\"hidden\";e.currentTarget.style.scrollbarColor=\"transparent transparent\";},className:\"events-scroll-container\",children:getUpcomingEvents().length===0?/*#__PURE__*/_jsx(\"div\",{style:{textAlign:\"center\",padding:\"2rem\",color:\"#666\"},children:\"No upcoming events. Add one to get started!\"}):/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",flexDirection:\"column\",gap:\"1rem\"},children:getUpcomingEvents().map(event=>/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:\"white\",borderRadius:\"8px\",padding:\"1rem\",boxShadow:\"0 1px 3px rgba(0,0,0,0.1)\",transition:\"transform 0.2s, box-shadow 0.2s\"},onMouseOver:e=>{e.currentTarget.style.transform=\"translateY(-2px)\";e.currentTarget.style.boxShadow=\"0 4px 6px rgba(0,0,0,0.1)\";},onMouseOut:e=>{e.currentTarget.style.transform=\"translateY(0)\";e.currentTarget.style.boxShadow=\"0 1px 3px rgba(0,0,0,0.1)\";},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",justifyContent:\"space-between\",alignItems:\"flex-start\",marginBottom:\"0.5rem\"},children:[/*#__PURE__*/_jsx(\"h3\",{style:{margin:0,fontSize:\"1rem\",color:\"#333\"},children:event.name}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'0.5rem'},children:[/*#__PURE__*/_jsxs(\"button\",{onClick:e=>{e.stopPropagation();navigate(\"/viewEvent/\".concat(event.event_id));},style:{backgroundColor:\"#FFB6C1\",border:\"none\",color:\"white\",padding:\"0.25rem 0.75rem\",borderRadius:\"4px\",cursor:\"pointer\",fontSize:\"0.8rem\",fontWeight:\"500\",transition:\"all 0.2s\",display:\"flex\",alignItems:\"center\",gap:\"0.25rem\"},onMouseOver:e=>{e.currentTarget.style.backgroundColor=\"#FF9EAF\";e.currentTarget.style.transform=\"translateY(-1px)\";},onMouseOut:e=>{e.currentTarget.style.backgroundColor=\"#FFB6C1\";e.currentTarget.style.transform=\"translateY(0)\";},children:[/*#__PURE__*/_jsx(\"span\",{children:\"View Details\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u2192\"})]}),/*#__PURE__*/_jsx(\"button\",{style:{backgroundColor:\"transparent\",border:\"none\",padding:\"0.25rem\",cursor:\"pointer\",display:\"flex\",alignItems:\"center\",justifyContent:\"center\"},title:\"Delete Event\",children:/*#__PURE__*/_jsx(FaTrash,{size:16,color:\"#ff6b6b\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:\"center\",color:\"#6c757d\",fontSize:\"0.8rem\",marginBottom:\"0.2rem\"},children:[/*#__PURE__*/_jsx(\"span\",{style:{marginRight:\"0.5rem\"},children:\"\\uD83D\\uDCC5\"}),formatDate(event.start_time)]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:\"center\",color:\"#6c757d\",fontSize:\"0.8rem\",marginBottom:\"0.2rem\"},children:[/*#__PURE__*/_jsx(\"span\",{style:{marginRight:\"0.5rem\"},children:\"\\uD83D\\uDD52\"}),formatTime(event.start_time)||\"TBD\"]}),event.location&&/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:\"center\",color:\"#6c757d\",fontSize:\"0.8rem\",marginBottom:\"0.2rem\"},children:[/*#__PURE__*/_jsx(\"span\",{style:{marginRight:\"0.5rem\"},children:\"\\uD83D\\uDCCD\"}),event.venue||\"TBD\"]})]},event.id))})})]}),/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:\"#f8f9fa\",borderRadius:\"12px\",padding:\"1.5rem\",boxShadow:\"0 2px 8px rgba(0,0,0,0.1)\"},children:[/*#__PURE__*/_jsx(\"h2\",{style:{marginTop:0,marginBottom:\"1.5rem\"},children:\"Calendar\"}),/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:\"white\",borderRadius:\"16px\",padding:\"1rem\",boxShadow:\"0 4px 12px rgba(0,0,0,0.05)\"},children:[/*#__PURE__*/_jsx(\"style\",{children:\"\\n                    .dashboard-calendar {\\n                      width: 100%;\\n                      border: none;\\n                      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\\n                    }\\n                    .react-calendar__navigation {\\n                      display: flex;\\n                      margin-bottom: 1em;\\n                    }\\n                    .react-calendar__navigation button {\\n                      color: #ff6b8b;\\n                      background: none;\\n                      border: none;\\n                      font-size: 1rem;\\n                      font-weight: 600;\\n                      cursor: pointer;\\n                      padding: 0.5rem;\\n                      border-radius: 8px;\\n                      transition: all 0.2s;\\n                    }\\n                    .react-calendar__navigation button:hover {\\n                      background-color: #ffebee;\\n                    }\\n                    .react-calendar__navigation button:disabled {\\n                      background-color: transparent;\\n                      color: #ccc;\\n                    }\\n                    .react-calendar__month-view__weekdays {\\n                      text-align: center;\\n                      text-transform: uppercase;\\n                      font-weight: 600;\\n                      color: #ff6b8b;\\n                      font-size: 0.75rem;\\n                      margin-bottom: 0.5rem;\\n                    }\\n                    .react-calendar__month-view__weekdays__weekday abbr {\\n                      text-decoration: none;\\n                    }\\n                    .react-calendar__month-view__weekdays__weekday--weekend abbr {\\n                      color: #ff6b8b;\\n                    }\\n                    .react-calendar__month-view__days__day--weekend {\\n                      color: #ff6b8b;\\n                    }\\n                    .react-calendar__tile {\\n                      max-width: 100%;\\n                      text-align: center;\\n                      padding: 0.75em 0.5em;\\n                      background: none;\\n                      border: 2px solid transparent;\\n                      border-radius: 50%;\\n                      color: #333;\\n                      font-weight: 500;\\n                      transition: all 0.2s;\\n                      position: relative;\\n                      overflow: visible;\\n                    }\\n                    .react-calendar__tile > div {\\n                      opacity: 1 !important;\\n                      visibility: visible !important;\\n                    }\\n                    .react-calendar__tile:enabled:hover,\\n                    .react-calendar__tile:enabled:focus {\\n                      background-color: #ffebee;\\n                      border-color: #ffb6c1;\\n                      transform: scale(1.1);\\n                    }\\n                    .react-calendar__tile--now {\\n                      background: #ffebee;\\n                      border: 2px solid #ffb6c1;\\n                      color: #ff6b8b;\\n                      font-weight: 600;\\n                    }\\n                    .react-calendar__tile--now:enabled:hover,\\n                    .react-calendar__tile--now:enabled:focus {\\n                      background: #ffd6de;\\n                      border-color: #ff8fa3;\\n                    }\\n                    .react-calendar__tile--active {\\n                      background: #ffb6c1 !important;\\n                      color: white !important;\\n                      border-color: #ffb6c1 !important;\\n                      font-weight: 600;\\n                    }\\n                    .react-calendar__tile--active:enabled:hover,\\n                    .react-calendar__tile--active:enabled:focus {\\n                      background: #ffc0cb !important;\\n                      border-color: #ffc0cb !important;\\n                    }\\n                    .react-calendar__month-view__days__day--neighboringMonth {\\n                      color: #ccc;\\n                    }\\n                    \"}),/*#__PURE__*/_jsx(Calendar,{onChange:setDate,value:date,className:\"dashboard-calendar\",tileContent:_ref2=>{let{date,view}=_ref2;const dateEvents=getEventsForDate(date);return/*#__PURE__*/_jsx(\"div\",{style:{position:\"absolute\",bottom:\"4px\",left:\"50%\",transform:\"translateX(-50%)\",display:\"flex\",gap:\"2px\",opacity:1,visibility:\"visible\"},children:[...Array(Math.min(3,dateEvents.length))].map((_,i)=>{var _dateEvents$i;return/*#__PURE__*/_jsx(\"div\",{style:{width:\"6px\",height:\"6px\",borderRadius:\"50%\",backgroundColor:isFutureEvent((_dateEvents$i=dateEvents[i])===null||_dateEvents$i===void 0?void 0:_dateEvents$i.start_time)?\"#4caf50\":\"#ff6b6b\"}},i);})});},formatShortWeekday:(locale,date)=>[\"S\",\"M\",\"T\",\"W\",\"T\",\"F\",\"S\"][date.getDay()],next2Label:null,prev2Label:null,minDetail:\"month\",showNeighboringMonth:false})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:\"1.5rem\"},children:[/*#__PURE__*/_jsxs(\"h3\",{style:{marginTop:0,marginBottom:\"1rem\"},children:[\"Events on \",date.toLocaleDateString()]}),getEventsForDate(date).length===0?/*#__PURE__*/_jsx(\"p\",{style:{color:\"#6c757d\",textAlign:\"center\"},children:\"No events scheduled for this day.\"}):/*#__PURE__*/_jsx(\"ul\",{style:{listStyle:\"none\",padding:0,margin:0},children:getEventsForDate(date).map(event=>{const isPast=!isFutureEvent(event.start_time);return/*#__PURE__*/_jsx(\"li\",{style:{backgroundColor:isPast?\"#f8f9fa\":\"white\",padding:\"0.75rem 1rem\",borderRadius:\"6px\",marginBottom:\"0.5rem\",boxShadow:\"0 1px 3px rgba(0,0,0,0.1)\",borderLeft:isPast?\"3px solid #ff6b6b\":\"3px solid #4caf50\",opacity:isPast?0.8:1},children:/*#__PURE__*/_jsxs(\"div\",{style:{width:\"100%\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'0.5rem',marginBottom:'0.25rem'},children:[isPast&&/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'0.65rem',backgroundColor:'#ffebee',color:'#d32f2f',padding:'0.15rem 0.5rem',borderRadius:'10px',fontWeight:'500',flexShrink:0},children:\"Past Event\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:\"600\",color:isPast?\"#6c757d\":\"#333\",flex:1,overflow:'hidden',textOverflow:'ellipsis',whiteSpace:'nowrap'},children:event.name||event.title})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',marginTop:'0.25rem'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'0.8rem',color:isPast?\"#adb5bd\":\"#6c757d\",display:'flex',alignItems:'center',gap:'0.5rem',flex:1},children:[/*#__PURE__*/_jsx(FaClock,{size:12}),formatTime(event.start_time)||'Time not set']}),isPast&&/*#__PURE__*/_jsx(\"button\",{onClick:e=>{e.stopPropagation();navigate(\"/viewEvent/\".concat(event.event_id||event.id,\"?readonly=true\"));},style:{fontSize:'0.7rem',backgroundColor:'transparent',color:'#e91e63',border:'1px solid #e91e63',padding:'0.15rem 0.5rem',borderRadius:'4px',cursor:'pointer',display:'flex',alignItems:'center',gap:'0.25rem',transition:'all 0.2s'},onMouseOver:e=>{e.currentTarget.style.backgroundColor='#fce4ec';},onMouseOut:e=>{e.currentTarget.style.backgroundColor='transparent';},children:\"View Details\"})]}),event.venue&&/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:\"0.8rem\",color:isPast?\"#adb5bd\":\"#6c757d\",marginTop:\"0.25rem\",display:\"flex\",alignItems:\"center\",gap:\"0.5rem\"},children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\uD83D\\uDCCD\"}),event.venue]})]})},event.id);})})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:\"#f8f9fa\",borderRadius:\"12px\",padding:\"1.5rem\",boxShadow:\"0 2px 8px rgba(0,0,0,0.1)\"},children:[/*#__PURE__*/_jsx(\"h2\",{style:{marginTop:0,marginBottom:\"1.5rem\"},children:\"My To-Do List\"}),/*#__PURE__*/_jsx(\"form\",{onSubmit:handleAddTask,style:{marginBottom:\"1.5rem\"},children:/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",gap:\"0.5rem\"},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newTask,onChange:e=>setNewTask(e.target.value),placeholder:\"Add a new task...\",style:{flex:1,padding:\"0.75rem\",border:\"1px solid #ddd\",borderRadius:\"6px\",fontSize:\"1rem\"}}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",style:{backgroundColor:\"#E8B180\",color:\"white\",border:\"none\",padding:\"0 1.5rem\",borderRadius:\"6px\",cursor:\"pointer\",fontWeight:\"500\",transition:\"background-color 0.2s\"},onMouseOver:e=>e.currentTarget.style.backgroundColor=\"#D89F73\",onMouseOut:e=>e.currentTarget.style.backgroundColor=\"#E8B180\",children:\"Add\"})]})}),/*#__PURE__*/_jsx(\"div\",{style:{maxHeight:\"400px\",overflowY:\"auto\",paddingRight:\"0.5rem\"},children:tasks.length===0?/*#__PURE__*/_jsx(\"p\",{style:{color:\"#6c757d\",textAlign:\"center\",margin:\"2rem 0\"},children:\"No tasks yet. Add one above!\"}):/*#__PURE__*/_jsx(\"ul\",{style:{listStyle:\"none\",padding:0,margin:0},children:tasks.map(task=>/*#__PURE__*/_jsxs(\"li\",{style:{display:\"flex\",alignItems:\"center\",padding:\"0.75rem\",backgroundColor:task.completed?\"#e8f5e9\":\"white\",borderRadius:\"6px\",marginBottom:\"0.5rem\",boxShadow:\"0 1px 3px rgba(0,0,0,0.1)\"},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>toggleTaskCompletion(task.id,task.completed),style:{width:\"24px\",height:\"24px\",borderRadius:\"50%\",border:\"2px solid \".concat(task.completed?\"#4caf50\":\"#ccc\"),backgroundColor:task.completed?\"#4caf50\":\"transparent\",display:\"flex\",alignItems:\"center\",justifyContent:\"center\",marginRight:\"1rem\",cursor:\"pointer\",flexShrink:0},children:task.completed&&/*#__PURE__*/_jsx(FaCheck,{color:\"white\",size:12})}),/*#__PURE__*/_jsx(\"span\",{style:{flex:1,textDecoration:task.completed?\"line-through\":\"none\",color:task.completed?\"#6c757d\":\"#212529\",wordBreak:\"break-word\"},children:task.text}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteTask(task.id),style:{background:\"none\",border:\"none\",color:\"#dc3545\",cursor:\"pointer\",marginLeft:\"0.5rem\",display:\"flex\",alignItems:\"center\",justifyContent:\"center\",padding:\"0.25rem\",borderRadius:\"4px\",transition:\"background-color 0.2s\"},onMouseOver:e=>e.currentTarget.style.backgroundColor=\"#f1f1f1\",onMouseOut:e=>e.currentTarget.style.backgroundColor=\"transparent\",children:/*#__PURE__*/_jsx(FaTrash,{size:14})})]},task.id))})})]})]}),/*#__PURE__*/_jsx(\"div\",{style:{backgroundColor:\"#f8f9fa\",borderRadius:\"12px\",padding:\"1.5rem\",boxShadow:\"0 2px 8px rgba(0,0,0,0.1)\",marginTop:\"2rem\"},children:/*#__PURE__*/_jsx(ChatUI,{listTitle:\"Vendors\",onSendMessage:handleSendMessage,onSelectVendor:handleSelectVendor,selectedVendor:selectedVendor,messages:currentConversation?chatMessages[currentConversation.conversation_id]||[]:[],unreadCount:unreadCount})})]})}),showImageModal&&/*#__PURE__*/_jsx(\"div\",{style:{position:\"fixed\",top:0,left:0,right:0,bottom:0,backgroundColor:\"rgba(0, 0, 0, 0.8)\",display:\"flex\",justifyContent:\"center\",alignItems:\"center\",zIndex:1000},onClick:()=>setShowImageModal(false),children:/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:\"90%\",maxHeight:\"90%\",position:\"relative\"},onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsx(\"img\",{src:preview,alt:\"Profile Preview\",style:{maxWidth:\"100%\",maxHeight:\"80vh\",borderRadius:\"8px\",boxShadow:\"0 4px 20px rgba(0,0,0,0.3)\"}}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowImageModal(false),style:{position:\"absolute\",top:\"-40px\",right:\"0\",background:\"none\",border:\"none\",color:\"white\",fontSize:\"24px\",cursor:\"pointer\",padding:\"8px\"},children:\"\\u2715\"})]})})]});}","map":{"version":3,"names":["React","useCallback","useEffect","useLayoutEffect","useState","useNavigate","supabase","FaPlus","FaTrash","FaCheck","FaUser","FaClock","Calendar","Navbar","ChatUI","chatService","jsx","_jsx","jsxs","_jsxs","PlannerDashboard","_ref","session","navigate","userName","setUserName","preview","setPreview","showImageModal","setShowImageModal","tasks","setTasks","events","setEvents","newTask","setNewTask","date","setDate","Date","loading","setLoading","selectedVendor","setSelectedVendor","chatMessages","setChatMessages","setConversations","currentConversation","setCurrentConversation","unreadCount","setUnreadCount","console","log","process","env","REACT_APP_BASE_URL","loadConversations","user","conversations","getUserConversations","id","error","loadUnreadCount","count","getUnreadCount","connect","onNewMessage","message","prev","_message$sender","conversationId","conversation_id","_objectSpread","message_id","text","message_text","timestamp","created_at","isCurrentUser","sender_id","sender","name","onMessageError","onMessageNotification","notification","removeAllListeners","handleSendMessage","sendMessage","sendMessageAPI","handleSelectVendor","vendor","conversation","getOrCreateConversation","joinConversation","messages","getConversationMessages","formattedMessages","map","msg","_msg$sender","markMessagesAsRead","API_URL","window","location","hostname","document","body","classList","add","documentElement","style","overflow","scrollTo","timer","setTimeout","remove","clearTimeout","fetchUserData","response","fetch","concat","headers","Accept","contentType","get","includes","textResponse","substring","Error","ok","data","json","email","split","profile_picture","err","_session$user$email","fetchEventsFromAPI","cache","fetchTasks","from","select","eq","order","ascending","formattedTasks","task","task_id","item","completed","handleAddTask","e","_session$user","preventDefault","trim","_session$user2","hasText","hasUserId","authError","auth","getUser","taskData","planner_id","testError","limit","insert","details","hint","code","length","newTaskItem","toISOString","prevTasks","toggleTaskCompletion","taskId","update","deleteTask","delete","filter","handleAddEvent","className","padding","maxWidth","margin","minHeight","position","children","textAlign","borderRadius","backgroundColor","boxShadow","width","height","border","borderTop","animation","color","formatTime","dateString","toLocaleTimeString","undefined","hour","minute","formatDate","options","year","month","day","toLocaleDateString","isFutureEvent","eventDate","now","eventDateTime","getUpcomingEvents","event","start_time","getEventsForDate","toDateString","background","boxSizing","borderTopLeftRadius","borderTopRightRadius","marginBottom","display","alignItems","gap","justifyContent","cursor","transition","onClick","onMouseOver","currentTarget","transform","onMouseOut","src","alt","objectFit","fontSize","gridTemplateColumns","fontWeight","size","maxHeight","overflowY","paddingRight","scrollbarWidth","scrollbarColor","msOverflowStyle","onMouseEnter","onMouseLeave","flexDirection","stopPropagation","event_id","title","marginRight","venue","marginTop","onChange","value","tileContent","_ref2","view","dateEvents","bottom","left","opacity","visibility","Array","Math","min","_","i","_dateEvents$i","formatShortWeekday","locale","getDay","next2Label","prev2Label","minDetail","showNeighboringMonth","listStyle","isPast","borderLeft","flexShrink","flex","textOverflow","whiteSpace","onSubmit","type","target","placeholder","textDecoration","wordBreak","marginLeft","listTitle","onSendMessage","onSelectVendor","top","right","zIndex"],"sources":["C:/Users/Ammaarah/EventuallyPerfect/QUANTIX/frontend/src/pages/PlannerDashboard.jsx"],"sourcesContent":["import React, { useCallback, useEffect, useLayoutEffect, useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { supabase } from \"../client\";\r\nimport { FaPlus, FaTrash, FaCheck, FaUser, FaClock } from \"react-icons/fa\";\r\nimport Calendar from \"react-calendar\";\r\nimport \"react-calendar/dist/Calendar.css\";\r\nimport Navbar from \"../components/Navbar\";\r\nimport ChatUI from \"../components/ChatUI\";\r\nimport chatService from \"../services/chatService\";\r\n\r\nexport default function PlannerDashboard({ session }) {\r\n  const navigate = useNavigate();\r\n  const [userName, setUserName] = useState(\"Planner\");\r\n  const [preview, setPreview] = useState(null);\r\n  const [showImageModal, setShowImageModal] = useState(false);\r\n  // Tasks state\r\n  const [tasks, setTasks] = useState([]);\r\n  const [events, setEvents] = useState([]);\r\n  const [newTask, setNewTask] = useState(\"\");\r\n  const [date, setDate] = useState(new Date());\r\n  const [loading, setLoading] = useState(true);\r\n  const [selectedVendor, setSelectedVendor] = useState(null);\r\n  const [chatMessages, setChatMessages] = useState({});\r\n  const [, setConversations] = useState([]);\r\n  const [currentConversation, setCurrentConversation] = useState(null);\r\n  const [unreadCount, setUnreadCount] = useState(0);\r\n\r\n  console.log(\"API URL:\", process.env.REACT_APP_BASE_URL);\r\n\r\n  // Load conversations for the planner\r\n  const loadConversations = useCallback(async () => {\r\n    if (!session?.user) return;\r\n\r\n    try {\r\n      const conversations = await chatService.getUserConversations(session.user.id);\r\n      setConversations(conversations);\r\n    } catch (error) {\r\n      console.error('Error loading conversations:', error);\r\n    }\r\n  }, [session?.user]);\r\n\r\n  // Load unread message count\r\n  const loadUnreadCount = useCallback(async () => {\r\n    if (!session?.user) return;\r\n\r\n    try {\r\n      const count = await chatService.getUnreadCount(session.user.id);\r\n      setUnreadCount(count);\r\n    } catch (error) {\r\n      console.error('Error loading unread count:', error);\r\n    }\r\n  }, [session?.user]);\r\n\r\n  // Initialize chat service and set up real-time listeners\r\n  useEffect(() => {\r\n    if (session?.user) {\r\n      // Connect to chat service\r\n      chatService.connect(session.user.id);\r\n\r\n      // Set up real-time listeners\r\n      chatService.onNewMessage((message) => {\r\n        console.log('New message received:', message);\r\n        \r\n        // Update messages for the conversation\r\n        setChatMessages(prev => {\r\n          const conversationId = message.conversation_id;\r\n          return {\r\n            ...prev,\r\n            [conversationId]: [\r\n              ...(prev[conversationId] || []),\r\n              {\r\n                id: message.message_id,\r\n                text: message.message_text,\r\n                timestamp: message.created_at,\r\n                isCurrentUser: message.sender_id === session.user.id,\r\n                sender: message.sender?.name || 'Unknown',\r\n                conversationId: message.conversation_id\r\n              }\r\n            ]\r\n          };\r\n        });\r\n      });\r\n\r\n      chatService.onMessageError((error) => {\r\n        console.error('Message error:', error);\r\n        // You could show a toast notification here\r\n      });\r\n\r\n      chatService.onMessageNotification((notification) => {\r\n        console.log('Message notification:', notification);\r\n        // Update unread count or show notification\r\n        setUnreadCount(prev => prev + 1);\r\n      });\r\n\r\n      // Load conversations and unread count\r\n      loadConversations();\r\n      loadUnreadCount();\r\n    }\r\n\r\n    return () => {\r\n      chatService.removeAllListeners();\r\n    };\r\n  }, [session?.user, loadConversations, loadUnreadCount]);\r\n\r\n  // Handle sending a message\r\n  const handleSendMessage = async (message) => {\r\n    if (!currentConversation || !session?.user) return;\r\n\r\n    try {\r\n      // Send message via WebSocket for real-time delivery\r\n      chatService.sendMessage(\r\n        currentConversation.conversation_id,\r\n        session.user.id,\r\n        message.text,\r\n        'text'\r\n      );\r\n\r\n      // Also send via API as backup\r\n      await chatService.sendMessageAPI(\r\n        currentConversation.conversation_id,\r\n        session.user.id,\r\n        message.text,\r\n        'text'\r\n      );\r\n\r\n      // Update local state immediately for better UX\r\n      setChatMessages(prev => ({\r\n        ...prev,\r\n        [currentConversation.conversation_id]: [\r\n          ...(prev[currentConversation.conversation_id] || []),\r\n          {\r\n            ...message,\r\n            conversationId: currentConversation.conversation_id\r\n          }\r\n        ]\r\n      }));\r\n    } catch (error) {\r\n      console.error('Error sending message:', error);\r\n    }\r\n  };\r\n\r\n  // Handle vendor selection and load conversation\r\n  const handleSelectVendor = async (vendor) => {\r\n    if (!session?.user) return;\r\n\r\n    setSelectedVendor(vendor);\r\n\r\n    try {\r\n      // Get or create conversation with the vendor\r\n      const conversation = await chatService.getOrCreateConversation(\r\n        session.user.id,\r\n        vendor.id\r\n      );\r\n\r\n      setCurrentConversation(conversation);\r\n\r\n      // Join the conversation room for real-time updates\r\n      chatService.joinConversation(conversation.conversation_id);\r\n\r\n      // Load messages for this conversation\r\n      const messages = await chatService.getConversationMessages(conversation.conversation_id);\r\n      \r\n      // Transform messages to match ChatUI format\r\n      const formattedMessages = messages.map(msg => ({\r\n        id: msg.message_id,\r\n        text: msg.message_text,\r\n        timestamp: msg.created_at,\r\n        isCurrentUser: msg.sender_id === session.user.id,\r\n        sender: msg.sender?.name || 'Unknown'\r\n      }));\r\n\r\n      setChatMessages(prev => ({\r\n        ...prev,\r\n        [conversation.conversation_id]: formattedMessages\r\n      }));\r\n\r\n      // Mark messages as read\r\n      await chatService.markMessagesAsRead(conversation.conversation_id, session.user.id);\r\n    } catch (error) {\r\n      console.error('Error selecting vendor:', error);\r\n    }\r\n  };\r\n\r\n  const API_URL =\r\n    window.location.hostname === \"localhost\" ||\r\n    window.location.hostname === \"127.0.0.1\"\r\n      ? \"http://localhost:5000\"\r\n      : \"https://quantix-production.up.railway.app\";\r\n\r\n  console.log(\"Current hostname:\", window.location.hostname);\r\n  console.log(\"Using API_URL:\", API_URL);\r\n  // Prevent scrolling until page is fully loaded\r\n  useLayoutEffect(() => {\r\n    // Add a class to the body to prevent scrolling via CSS\r\n    document.body.classList.add(\"dashboard-loading\");\r\n\r\n    // Lock scroll on mount\r\n    document.documentElement.style.overflow = \"hidden\";\r\n    document.body.style.overflow = \"hidden\";\r\n\r\n    // Scroll to top immediately\r\n    window.scrollTo(0, 0);\r\n\r\n    // Re-enable scrolling after a longer delay (1000ms)\r\n    const timer = setTimeout(() => {\r\n      document.documentElement.style.overflow = \"auto\";\r\n      document.body.style.overflow = \"auto\";\r\n      document.body.classList.remove(\"dashboard-loading\");\r\n      window.scrollTo(0, 0);\r\n    }, 1000);\r\n\r\n    // Cleanup\r\n    return () => {\r\n      clearTimeout(timer);\r\n      document.documentElement.style.overflow = \"auto\";\r\n      document.body.style.overflow = \"auto\";\r\n      document.body.classList.remove(\"dashboard-loading\");\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!session?.user) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    const fetchUserData = async () => {\r\n      try {\r\n        setLoading(true);\r\n        const response = await fetch(\r\n          `${API_URL}/api/planners/${session.user.id}`,\r\n          {\r\n            headers: {\r\n              Accept: \"application/json\",\r\n            },\r\n          }\r\n        );\r\n\r\n        const contentType = response.headers.get(\"content-type\");\r\n        if (!contentType || !contentType.includes(\"application/json\")) {\r\n          const textResponse = await response.text();\r\n          console.error(\r\n            \"Server returned HTML instead of JSON:\",\r\n            textResponse.substring(0, 200)\r\n          );\r\n          throw new Error(\"Server returned non-JSON response\");\r\n        }\r\n\r\n        if (!response.ok) throw new Error(\"Failed to fetch planner data\");\r\n\r\n        const data = await response.json();\r\n        setUserName(data.name || session.user.email.split(\"@\")[0]);\r\n        setPreview(data.profile_picture || null);\r\n      } catch (err) {\r\n        console.error(\"Error fetching user data:\", err);\r\n        setUserName(session.user.email?.split(\"@\")[0] || \"Planner\");\r\n        setPreview(null);\r\n      }\r\n    };\r\n\r\n    const fetchEventsFromAPI = async () => {\r\n      try {\r\n        const response = await fetch(\r\n          `${API_URL}/api/events?planner_id=${session.user.id}`,\r\n          {\r\n            cache: \"no-store\",\r\n            headers: {\r\n              Accept: \"application/json\",\r\n            },\r\n          }\r\n        );\r\n\r\n        const contentType = response.headers.get(\"content-type\");\r\n        if (!contentType || !contentType.includes(\"application/json\")) {\r\n          throw new Error(\"Server returned non-JSON response\");\r\n        }\r\n\r\n        if (!response.ok) throw new Error(\"Failed to fetch events\");\r\n\r\n        const data = await response.json();\r\n        setEvents(data);\r\n      } catch (err) {\r\n        console.error(\"Error fetching events from API:\", err);\r\n      }\r\n    };\r\n\r\n    const fetchTasks = async () => {\r\n      try {\r\n        const { data, error } = await supabase\r\n          .from(\"tasks\")\r\n          .select(\"*\")\r\n          .eq(\"planner_id\", session.user.id)\r\n          .order(\"created_at\", { ascending: false });\r\n\r\n        if (error) throw error;\r\n\r\n        const formattedTasks = data.map((task) => ({\r\n          id: task.task_id,\r\n          text: task.item,\r\n          completed: task.completed || false,\r\n          created_at: task.created_at,\r\n        }));\r\n\r\n        setTasks(formattedTasks);\r\n      } catch (error) {\r\n        console.error(\"Error fetching tasks:\", error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchUserData();\r\n    fetchEventsFromAPI();\r\n    fetchTasks();\r\n  }, [session, API_URL]); // Added API_URL to dependency array\r\n\r\n  const handleAddTask = async (e) => {\r\n    e.preventDefault();\r\n    if (!newTask.trim() || !session?.user?.id) {\r\n      console.error(\"Missing required fields:\", {\r\n        hasText: !!newTask.trim(),\r\n        hasUserId: !!session?.user?.id,\r\n      });\r\n      return;\r\n    }\r\n\r\n    try {\r\n      // Get current auth session to verify user is authenticated\r\n      const {\r\n        data: { user },\r\n        error: authError,\r\n      } = await supabase.auth.getUser();\r\n\r\n      if (authError || !user) {\r\n        console.error(\"Authentication error:\", authError || \"No user found\");\r\n        throw new Error(\"Not authenticated\");\r\n      }\r\n\r\n      console.log(\"Current user:\", { id: user.id, email: user.email });\r\n\r\n      const taskData = {\r\n        planner_id: user.id, // Use the ID from the auth session\r\n        item: newTask.trim(),\r\n        completed: false,\r\n      };\r\n\r\n      console.log(\"Attempting to add task with data:\", taskData);\r\n\r\n      // Verify table access by making a test query\r\n      const { error: testError } = await supabase\r\n        .from(\"tasks\")\r\n        .select(\"*\")\r\n        .limit(1);\r\n\r\n      if (testError) {\r\n        console.error(\"Test query failed:\", testError);\r\n        throw testError;\r\n      }\r\n\r\n      // Proceed with insert\r\n      const { data, error } = await supabase\r\n        .from(\"tasks\")\r\n        .insert([taskData]) // Note: Changed to array format which is required by Supabase\r\n        .select();\r\n\r\n      if (error) {\r\n        console.error(\"Supabase insert error details:\", {\r\n          message: error.message,\r\n          details: error.details,\r\n          hint: error.hint,\r\n          code: error.code,\r\n        });\r\n        throw error;\r\n      }\r\n\r\n      console.log(\"Task added successfully:\", data);\r\n\r\n      if (data && data.length > 0) {\r\n        const newTaskItem = {\r\n          id: data[0].id || data[0].task_id, // Try both possible ID fields\r\n          text: data[0].item,\r\n          completed: data[0].completed || false,\r\n          created_at: data[0].created_at || new Date().toISOString(),\r\n        };\r\n\r\n        setTasks((prevTasks) => [newTaskItem, ...prevTasks]);\r\n        setNewTask(\"\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error adding task:\", error);\r\n    }\r\n  };\r\n\r\n  const toggleTaskCompletion = async (taskId, completed) => {\r\n    try {\r\n      const { error } = await supabase\r\n        .from(\"tasks\")\r\n        .update({ completed: !completed })\r\n        .eq(\"task_id\", taskId);\r\n\r\n      if (error) throw error;\r\n\r\n      setTasks(\r\n        tasks.map((task) =>\r\n          task.id === taskId ? { ...task, completed: !completed } : task\r\n        )\r\n      );\r\n    } catch (error) {\r\n      console.error(\"Error updating task:\", error);\r\n    }\r\n  };\r\n\r\n  const deleteTask = async (taskId) => {\r\n    try {\r\n      const { error } = await supabase\r\n        .from(\"tasks\")\r\n        .delete()\r\n        .eq(\"task_id\", taskId);\r\n\r\n      if (error) throw error;\r\n\r\n      setTasks(tasks.filter((task) => task.id !== taskId));\r\n    } catch (error) {\r\n      console.error(\"Error deleting task:\", error);\r\n    }\r\n  };\r\n\r\n  const handleAddEvent = (e) => {\r\n    e.preventDefault();\r\n    navigate(\"/add-event\");\r\n  };\r\n\r\n  // Loading state\r\n  if (loading) {\r\n    return (\r\n      <div\r\n        className={`dashboard-container ${loading ? \"dashboard-loading\" : \"\"}`}\r\n        style={{\r\n          padding: \"1.5rem\",\r\n          maxWidth: \"1200px\",\r\n          margin: \"0 auto\",\r\n          minHeight: \"100vh\",\r\n          position: \"relative\",\r\n          overflow: \"hidden\",\r\n        }}\r\n      >\r\n        <div\r\n          style={{\r\n            textAlign: \"center\",\r\n            padding: \"2rem\",\r\n            borderRadius: \"8px\",\r\n            backgroundColor: \"white\",\r\n            boxShadow: \"0 2px 8px rgba(0,0,0,0.1)\",\r\n          }}\r\n        >\r\n          <div\r\n            className=\"spinner\"\r\n            style={{\r\n              width: \"40px\",\r\n              height: \"40px\",\r\n              margin: \"0 auto 1rem\",\r\n              border: \"4px solid #FFF0F5\",\r\n              borderTop: \"4px solid #FFB6C1\",\r\n              borderRadius: \"50%\",\r\n              animation: \"spin 1s linear infinite\",\r\n            }}\r\n          />\r\n          <h3 style={{ color: \"#FFB6C1\" }}>Loading your dashboard...</h3>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const formatTime = (dateString) => {\r\n    if (!dateString) return \"Time not set\";\r\n    const date = new Date(dateString);\r\n    return date.toLocaleTimeString(undefined, {\r\n      hour: \"2-digit\",\r\n      minute: \"2-digit\",\r\n    });\r\n  };\r\n\r\n  // Format date to display in a readable format\r\n  const formatDate = (dateString) => {\r\n    const options = { year: \"numeric\", month: \"long\", day: \"numeric\" };\r\n    return new Date(dateString).toLocaleDateString(undefined, options);\r\n  };\r\n\r\n  // Add this function to check if an event is in the future\r\n  const isFutureEvent = (eventDate) => {\r\n    const now = new Date();\r\n    const eventDateTime = new Date(eventDate);\r\n    return eventDateTime > now;\r\n  };\r\n\r\n  // Get only future events\r\n  const getUpcomingEvents = () => {\r\n    return events.filter(event => event.start_time && isFutureEvent(event.start_time));\r\n  };\r\n\r\n  // Get events for the selected date\r\n  const getEventsForDate = (date) => {\r\n    return events.filter((event) => {\r\n      const eventDate = new Date(event.start_time);\r\n      return eventDate.toDateString() === date.toDateString();\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className=\"planner-dashboard\"\r\n      style={{\r\n        minHeight: \"100vh\",\r\n        background: \"radial-gradient(circle at 100% 0%, #FFE4C4, #FFB6C1)\",\r\n        padding: \"80px 0 0 0\",\r\n        boxSizing: \"border-box\",\r\n      }}\r\n    >\r\n      <Navbar session={session} />\r\n      <div\r\n        style={{\r\n          backgroundColor: \"white\",\r\n          minHeight: \"calc(100vh - 100px)\",\r\n          maxWidth: \"1200px\",\r\n          margin: \"20px auto 0\",\r\n          borderTopLeftRadius: \"30px\",\r\n          borderTopRightRadius: \"30px\",\r\n          padding: \"2rem\",\r\n          boxShadow: \"0 5px 20px rgba(0,0,0,0.1)\",\r\n          boxSizing: \"border-box\",\r\n        }}\r\n      >\r\n        <div className=\"planner-dashboard-content\">\r\n          <div className=\"dashboard-main\">\r\n            {/* Welcome Section */}\r\n            <div\r\n              style={{\r\n                marginBottom: \"2rem\",\r\n                display: \"flex\",\r\n                alignItems: \"center\",\r\n                gap: \"1.5rem\",\r\n              }}\r\n            >\r\n              <div\r\n                style={{\r\n                  width: \"80px\",\r\n                  height: \"80px\",\r\n                  borderRadius: \"50%\",\r\n                  backgroundColor: preview ? \"transparent\" : \"#FFDAB9\",\r\n                  display: \"flex\",\r\n                  alignItems: \"center\",\r\n                  justifyContent: \"center\",\r\n                  overflow: \"hidden\",\r\n                  border: \"3px solid white\",\r\n                  boxShadow: \"0 2px 8px rgba(0,0,0,0.1)\",\r\n                  cursor: \"pointer\",\r\n                  transition: \"transform 0.2s\",\r\n                }}\r\n                onClick={() => preview && setShowImageModal(true)}\r\n                onMouseOver={(e) =>\r\n                  (e.currentTarget.style.transform = \"scale(1.05)\")\r\n                }\r\n                onMouseOut={(e) =>\r\n                  (e.currentTarget.style.transform = \"scale(1)\")\r\n                }\r\n              >\r\n                {preview ? (\r\n                  <img\r\n                    src={preview}\r\n                    alt=\"Profile\"\r\n                    style={{\r\n                      width: \"100%\",\r\n                      height: \"100%\",\r\n                      objectFit: \"cover\",\r\n                    }}\r\n                  />\r\n                ) : (\r\n                  <div\r\n                    style={{\r\n                      width: \"100%\",\r\n                      height: \"100%\",\r\n                      display: \"flex\",\r\n                      alignItems: \"center\",\r\n                      justifyContent: \"center\",\r\n                      backgroundColor: \"#FFDAB9\",\r\n                    }}\r\n                  >\r\n                    <FaUser\r\n                      style={{\r\n                        fontSize: \"2.5rem\",\r\n                        color: \"#FFFFFF\",\r\n                        filter: \"drop-shadow(0 1px 2px rgba(0,0,0,0.1))\",\r\n                        width: \"100%\",\r\n                        height: \"100%\",\r\n                        padding: \"0.5rem\",\r\n                      }}\r\n                    />\r\n                  </div>\r\n                )}\r\n              </div>\r\n              <div>\r\n                <h1\r\n                  style={{\r\n                    fontSize: \"2rem\",\r\n                    color: \"#333\",\r\n                    margin: \"0 0 0.5rem 0\",\r\n                  }}\r\n                >\r\n                  Welcome back, {userName}!\r\n                </h1>\r\n                <p\r\n                  style={{\r\n                    color: \"#666\",\r\n                    margin: 0,\r\n                    fontSize: \"1rem\",\r\n                  }}\r\n                >\r\n                  Here's what's happening with your plans today.\r\n                </p>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Upcoming Events and Calendar Row */}\r\n            <div\r\n              style={{\r\n                display: \"grid\",\r\n                gridTemplateColumns: \"1fr 1fr\",\r\n                gap: \"2rem\",\r\n                marginBottom: \"2rem\",\r\n              }}\r\n            >\r\n              {/* Upcoming Events Section */}\r\n              <div\r\n                style={{\r\n                  backgroundColor: \"#f8f9fa\",\r\n                  borderRadius: \"12px\",\r\n                  padding: \"1.5rem\",\r\n                  boxShadow: \"0 2px 8px rgba(0,0,0,0.1)\",\r\n                }}\r\n              >\r\n                <div\r\n                  style={{\r\n                    display: \"flex\",\r\n                    justifyContent: \"space-between\",\r\n                    alignItems: \"center\",\r\n                    marginBottom: \"1.5rem\",\r\n                  }}\r\n                >\r\n                  <h2 style={{ margin: 0 }}>Upcoming Events</h2>\r\n                  <button\r\n                    onClick={handleAddEvent}\r\n                    style={{\r\n                      backgroundColor: \"#E8B180\",\r\n                      border: \"none\",\r\n                      color: \"white\",\r\n                      padding: \"0.4rem 1rem\",\r\n                      borderRadius: \"6px\",\r\n                      cursor: \"pointer\",\r\n                      fontWeight: \"500\",\r\n                      transition: \"all 0.2s\",\r\n                      fontSize: \"0.9rem\",\r\n                      display: \"flex\",\r\n                      alignItems: \"center\",\r\n                      gap: \"0.5rem\",\r\n                    }}\r\n                    onMouseOver={(e) => {\r\n                      e.currentTarget.style.backgroundColor = \"#D89F73\";\r\n                      e.currentTarget.style.transform = \"translateY(-1px)\";\r\n                    }}\r\n                    onMouseOut={(e) => {\r\n                      e.currentTarget.style.backgroundColor = \"#E8B180\";\r\n                      e.currentTarget.style.transform = \"translateY(0)\";\r\n                    }}\r\n                  >\r\n                    <FaPlus size={14} />\r\n                    Add Event\r\n                  </button>\r\n                </div>\r\n\r\n                <div\r\n                  style={{\r\n                    maxHeight: \"500px\",\r\n                    minHeight: \"400px\",\r\n                    overflowY: \"hidden\",\r\n                    paddingRight: \"0.5rem\",\r\n                    transition: \"all 0.3s ease\",\r\n                    scrollbarWidth: \"thin\",\r\n                    scrollbarColor: \"transparent transparent\",\r\n                    msOverflowStyle: \"none\"\r\n                  }}\r\n                  onMouseEnter={(e) => {\r\n                    e.currentTarget.style.overflowY = \"auto\";\r\n                    e.currentTarget.style.scrollbarColor = \"#E8B180 transparent\";\r\n                  }}\r\n                  onMouseLeave={(e) => {\r\n                    e.currentTarget.style.overflowY = \"hidden\";\r\n                    e.currentTarget.style.scrollbarColor = \"transparent transparent\";\r\n                  }}\r\n                  className=\"events-scroll-container\"\r\n                >\r\n                  {getUpcomingEvents().length === 0 ? (\r\n                    <div\r\n                      style={{\r\n                        textAlign: \"center\",\r\n                        padding: \"2rem\",\r\n                        color: \"#666\",\r\n                      }}\r\n                    >\r\n                      No upcoming events. Add one to get started!\r\n                    </div>\r\n                  ) : (\r\n                    <div\r\n                      style={{\r\n                        display: \"flex\",\r\n                        flexDirection: \"column\",\r\n                        gap: \"1rem\"\r\n                      }}\r\n                    >\r\n                      {getUpcomingEvents().map((event) => (\r\n                        <div\r\n                          key={event.id}\r\n                          style={{\r\n                            backgroundColor: \"white\",\r\n                            borderRadius: \"8px\",\r\n                            padding: \"1rem\",\r\n                            boxShadow: \"0 1px 3px rgba(0,0,0,0.1)\",\r\n                            transition: \"transform 0.2s, box-shadow 0.2s\",\r\n                          }}\r\n                          onMouseOver={(e) => {\r\n                            e.currentTarget.style.transform =\r\n                              \"translateY(-2px)\";\r\n                            e.currentTarget.style.boxShadow =\r\n                              \"0 4px 6px rgba(0,0,0,0.1)\";\r\n                          }}\r\n                          onMouseOut={(e) => {\r\n                            e.currentTarget.style.transform = \"translateY(0)\";\r\n                            e.currentTarget.style.boxShadow =\r\n                              \"0 1px 3px rgba(0,0,0,0.1)\";\r\n                          }}\r\n                        >\r\n                          <div\r\n                            style={{\r\n                              display: \"flex\",\r\n                              justifyContent: \"space-between\",\r\n                              alignItems: \"flex-start\",\r\n                              marginBottom: \"0.5rem\",\r\n                            }}\r\n                          >\r\n                            <h3\r\n                              style={{\r\n                                margin: 0,\r\n                                fontSize: \"1rem\",\r\n                                color: \"#333\",\r\n                              }}\r\n                            >\r\n                              {event.name}\r\n                            </h3>\r\n                            <div style={{ display: 'flex', gap: '0.5rem' }}>\r\n                              <button\r\n                                onClick={(e) => {\r\n                                  e.stopPropagation();\r\n                                  navigate(`/viewEvent/${event.event_id}`);\r\n                                }}\r\n                                style={{\r\n                                  backgroundColor: \"#FFB6C1\",\r\n                                  border: \"none\",\r\n                                  color: \"white\",\r\n                                  padding: \"0.25rem 0.75rem\",\r\n                                  borderRadius: \"4px\",\r\n                                  cursor: \"pointer\",\r\n                                  fontSize: \"0.8rem\",\r\n                                  fontWeight: \"500\",\r\n                                  transition: \"all 0.2s\",\r\n                                  display: \"flex\",\r\n                                  alignItems: \"center\",\r\n                                  gap: \"0.25rem\",\r\n                                }}\r\n                                onMouseOver={(e) => {\r\n                                  e.currentTarget.style.backgroundColor =\r\n                                    \"#FF9EAF\";\r\n                                  e.currentTarget.style.transform =\r\n                                    \"translateY(-1px)\";\r\n                                }}\r\n                                onMouseOut={(e) => {\r\n                                  e.currentTarget.style.backgroundColor =\r\n                                    \"#FFB6C1\";\r\n                                  e.currentTarget.style.transform =\r\n                                    \"translateY(0)\";\r\n                                }}\r\n                              >\r\n                                <span>View Details</span>\r\n                                <span>→</span>\r\n                              </button>\r\n                              <button\r\n                                style={{\r\n                                  backgroundColor: \"transparent\",\r\n                                  border: \"none\",\r\n                                  padding: \"0.25rem\",\r\n                                  cursor: \"pointer\",\r\n                                  display: \"flex\",\r\n                                  alignItems: \"center\",\r\n                                  justifyContent: \"center\"\r\n                                }}\r\n                                title=\"Delete Event\"\r\n                              >\r\n                                <FaTrash size={16} color=\"#ff6b6b\" />\r\n                              </button>\r\n                            </div>\r\n                          </div>\r\n                          <div\r\n                            style={{\r\n                              display: \"flex\",\r\n                              alignItems: \"center\",\r\n                              color: \"#6c757d\",\r\n                              fontSize: \"0.8rem\",\r\n                              marginBottom: \"0.2rem\",\r\n                            }}\r\n                          >\r\n                            <span style={{ marginRight: \"0.5rem\" }}>📅</span>\r\n                            {formatDate(event.start_time)}\r\n                          </div>\r\n                          <div\r\n                            style={{\r\n                              display: \"flex\",\r\n                              alignItems: \"center\",\r\n                              color: \"#6c757d\",\r\n                              fontSize: \"0.8rem\",\r\n                              marginBottom: \"0.2rem\",\r\n                            }}\r\n                          >\r\n                            <span style={{ marginRight: \"0.5rem\" }}>🕒</span>\r\n                            {formatTime(event.start_time) || \"TBD\"}\r\n                          </div>\r\n                          {event.location && (\r\n                            <div\r\n                              style={{\r\n                                display: \"flex\",\r\n                                alignItems: \"center\",\r\n                                color: \"#6c757d\",\r\n                                fontSize: \"0.8rem\",\r\n                                marginBottom: \"0.2rem\",\r\n                              }}\r\n                            >\r\n                              <span style={{ marginRight: \"0.5rem\" }}>📍</span>\r\n                              {event.venue || \"TBD\"}\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Calendar Section */}\r\n              <div\r\n                style={{\r\n                  backgroundColor: \"#f8f9fa\",\r\n                  borderRadius: \"12px\",\r\n                  padding: \"1.5rem\",\r\n                  boxShadow: \"0 2px 8px rgba(0,0,0,0.1)\",\r\n                }}\r\n              >\r\n                <h2 style={{ marginTop: 0, marginBottom: \"1.5rem\" }}>\r\n                  Calendar\r\n                </h2>\r\n                <div\r\n                  style={{\r\n                    backgroundColor: \"white\",\r\n                    borderRadius: \"16px\",\r\n                    padding: \"1rem\",\r\n                    boxShadow: \"0 4px 12px rgba(0,0,0,0.05)\",\r\n                  }}\r\n                >\r\n                  <style>\r\n                    {`\r\n                    .dashboard-calendar {\r\n                      width: 100%;\r\n                      border: none;\r\n                      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\r\n                    }\r\n                    .react-calendar__navigation {\r\n                      display: flex;\r\n                      margin-bottom: 1em;\r\n                    }\r\n                    .react-calendar__navigation button {\r\n                      color: #ff6b8b;\r\n                      background: none;\r\n                      border: none;\r\n                      font-size: 1rem;\r\n                      font-weight: 600;\r\n                      cursor: pointer;\r\n                      padding: 0.5rem;\r\n                      border-radius: 8px;\r\n                      transition: all 0.2s;\r\n                    }\r\n                    .react-calendar__navigation button:hover {\r\n                      background-color: #ffebee;\r\n                    }\r\n                    .react-calendar__navigation button:disabled {\r\n                      background-color: transparent;\r\n                      color: #ccc;\r\n                    }\r\n                    .react-calendar__month-view__weekdays {\r\n                      text-align: center;\r\n                      text-transform: uppercase;\r\n                      font-weight: 600;\r\n                      color: #ff6b8b;\r\n                      font-size: 0.75rem;\r\n                      margin-bottom: 0.5rem;\r\n                    }\r\n                    .react-calendar__month-view__weekdays__weekday abbr {\r\n                      text-decoration: none;\r\n                    }\r\n                    .react-calendar__month-view__weekdays__weekday--weekend abbr {\r\n                      color: #ff6b8b;\r\n                    }\r\n                    .react-calendar__month-view__days__day--weekend {\r\n                      color: #ff6b8b;\r\n                    }\r\n                    .react-calendar__tile {\r\n                      max-width: 100%;\r\n                      text-align: center;\r\n                      padding: 0.75em 0.5em;\r\n                      background: none;\r\n                      border: 2px solid transparent;\r\n                      border-radius: 50%;\r\n                      color: #333;\r\n                      font-weight: 500;\r\n                      transition: all 0.2s;\r\n                      position: relative;\r\n                      overflow: visible;\r\n                    }\r\n                    .react-calendar__tile > div {\r\n                      opacity: 1 !important;\r\n                      visibility: visible !important;\r\n                    }\r\n                    .react-calendar__tile:enabled:hover,\r\n                    .react-calendar__tile:enabled:focus {\r\n                      background-color: #ffebee;\r\n                      border-color: #ffb6c1;\r\n                      transform: scale(1.1);\r\n                    }\r\n                    .react-calendar__tile--now {\r\n                      background: #ffebee;\r\n                      border: 2px solid #ffb6c1;\r\n                      color: #ff6b8b;\r\n                      font-weight: 600;\r\n                    }\r\n                    .react-calendar__tile--now:enabled:hover,\r\n                    .react-calendar__tile--now:enabled:focus {\r\n                      background: #ffd6de;\r\n                      border-color: #ff8fa3;\r\n                    }\r\n                    .react-calendar__tile--active {\r\n                      background: #ffb6c1 !important;\r\n                      color: white !important;\r\n                      border-color: #ffb6c1 !important;\r\n                      font-weight: 600;\r\n                    }\r\n                    .react-calendar__tile--active:enabled:hover,\r\n                    .react-calendar__tile--active:enabled:focus {\r\n                      background: #ffc0cb !important;\r\n                      border-color: #ffc0cb !important;\r\n                    }\r\n                    .react-calendar__month-view__days__day--neighboringMonth {\r\n                      color: #ccc;\r\n                    }\r\n                    `}\r\n                  </style>\r\n                  <Calendar\r\n                    onChange={setDate}\r\n                    value={date}\r\n                    className=\"dashboard-calendar\"\r\n                    tileContent={({ date, view }) => {\r\n                      const dateEvents = getEventsForDate(date);\r\n                      return (\r\n                        <div\r\n                          style={{\r\n                            position: \"absolute\",\r\n                            bottom: \"4px\",\r\n                            left: \"50%\",\r\n                            transform: \"translateX(-50%)\",\r\n                            display: \"flex\",\r\n                            gap: \"2px\",\r\n                            opacity: 1,\r\n                            visibility: \"visible\",\r\n                          }}\r\n                        >\r\n                          {[...Array(Math.min(3, dateEvents.length))].map(\r\n                            (_, i) => (\r\n                              <div\r\n                                key={i}\r\n                                style={{\r\n                                  width: \"6px\",\r\n                                  height: \"6px\",\r\n                                  borderRadius: \"50%\",\r\n                                  backgroundColor: isFutureEvent(dateEvents[i]?.start_time) ? \"#4caf50\" : \"#ff6b6b\",\r\n                                }}\r\n                              />\r\n                            )\r\n                          )}\r\n                        </div>\r\n                      );\r\n                    }}\r\n                    formatShortWeekday={(locale, date) =>\r\n                      [\"S\", \"M\", \"T\", \"W\", \"T\", \"F\", \"S\"][date.getDay()]\r\n                    }\r\n                    next2Label={null}\r\n                    prev2Label={null}\r\n                    minDetail=\"month\"\r\n                    showNeighboringMonth={false}\r\n                  />\r\n                </div>\r\n\r\n                <div style={{ marginTop: \"1.5rem\" }}>\r\n                  <h3 style={{ marginTop: 0, marginBottom: \"1rem\" }}>\r\n                    Events on {date.toLocaleDateString()}\r\n                  </h3>\r\n                  {getEventsForDate(date).length === 0 ? (\r\n                    <p style={{ color: \"#6c757d\", textAlign: \"center\" }}>\r\n                      No events scheduled for this day.\r\n                    </p>\r\n                  ) : (\r\n                    <ul style={{ listStyle: \"none\", padding: 0, margin: 0 }}>\r\n                      {getEventsForDate(date).map((event) => {\r\n                        const isPast = !isFutureEvent(event.start_time);\r\n                        return (\r\n                          <li\r\n                            key={event.id}\r\n                            style={{\r\n                              backgroundColor: isPast ? \"#f8f9fa\" : \"white\",\r\n                              padding: \"0.75rem 1rem\",\r\n                              borderRadius: \"6px\",\r\n                              marginBottom: \"0.5rem\",\r\n                              boxShadow: \"0 1px 3px rgba(0,0,0,0.1)\",\r\n                              borderLeft: isPast ? \"3px solid #ff6b6b\" : \"3px solid #4caf50\",\r\n                              opacity: isPast ? 0.8 : 1,\r\n                            }}\r\n                          >\r\n                            <div style={{ width: \"100%\" }}>\r\n                              <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem', marginBottom: '0.25rem' }}>\r\n                                {isPast && (\r\n                                  <span style={{\r\n                                    fontSize: '0.65rem',\r\n                                    backgroundColor: '#ffebee',\r\n                                    color: '#d32f2f',\r\n                                    padding: '0.15rem 0.5rem',\r\n                                    borderRadius: '10px',\r\n                                    fontWeight: '500',\r\n                                    flexShrink: 0,\r\n                                  }}>\r\n                                    Past Event\r\n                                  </span>\r\n                                )}\r\n                                <div style={{ \r\n                                  fontWeight: \"600\", \r\n                                  color: isPast ? \"#6c757d\" : \"#333\",\r\n                                  flex: 1,\r\n                                  overflow: 'hidden',\r\n                                  textOverflow: 'ellipsis',\r\n                                  whiteSpace: 'nowrap'\r\n                                }}>\r\n                                  {event.name || event.title}\r\n                                </div>\r\n                              </div>\r\n                              \r\n                              <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginTop: '0.25rem' }}>\r\n                                <div style={{ \r\n                                  fontSize: '0.8rem', \r\n                                  color: isPast ? \"#adb5bd\" : \"#6c757d\",\r\n                                  display: 'flex',\r\n                                  alignItems: 'center',\r\n                                  gap: '0.5rem',\r\n                                  flex: 1,\r\n                                }}>\r\n                                  <FaClock size={12} />\r\n                                  {formatTime(event.start_time) || 'Time not set'}\r\n                                </div>\r\n                                \r\n                                {isPast && (\r\n                                  <button\r\n                                    onClick={(e) => {\r\n                                      e.stopPropagation();\r\n                                      navigate(`/viewEvent/${event.event_id || event.id}?readonly=true`);\r\n                                    }}\r\n                                    style={{\r\n                                      fontSize: '0.7rem',\r\n                                      backgroundColor: 'transparent',\r\n                                      color: '#e91e63',\r\n                                      border: '1px solid #e91e63',\r\n                                      padding: '0.15rem 0.5rem',\r\n                                      borderRadius: '4px',\r\n                                      cursor: 'pointer',\r\n                                      display: 'flex',\r\n                                      alignItems: 'center',\r\n                                      gap: '0.25rem',\r\n                                      transition: 'all 0.2s',\r\n                                    }}\r\n                                    onMouseOver={(e) => {\r\n                                      e.currentTarget.style.backgroundColor = '#fce4ec';\r\n                                    }}\r\n                                    onMouseOut={(e) => {\r\n                                      e.currentTarget.style.backgroundColor = 'transparent';\r\n                                    }}\r\n                                  >\r\n                                    View Details\r\n                                  </button>\r\n                                )}\r\n                              </div>\r\n                              \r\n                              {event.venue && (\r\n                                <div style={{ \r\n                                  fontSize: \"0.8rem\", \r\n                                  color: isPast ? \"#adb5bd\" : \"#6c757d\",\r\n                                  marginTop: \"0.25rem\",\r\n                                  display: \"flex\",\r\n                                  alignItems: \"center\",\r\n                                  gap: \"0.5rem\"\r\n                                }}>\r\n                                  <span>📍</span>\r\n                                  {event.venue}\r\n                                </div>\r\n                              )}\r\n                            </div>\r\n                          </li>\r\n                        );\r\n                      })}\r\n                    </ul>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Tasks Section */}\r\n            <div\r\n              style={{\r\n                backgroundColor: \"#f8f9fa\",\r\n                borderRadius: \"12px\",\r\n                padding: \"1.5rem\",\r\n                boxShadow: \"0 2px 8px rgba(0,0,0,0.1)\",\r\n              }}\r\n            >\r\n              <h2 style={{ marginTop: 0, marginBottom: \"1.5rem\" }}>\r\n                My To-Do List\r\n              </h2>\r\n\r\n              <form onSubmit={handleAddTask} style={{ marginBottom: \"1.5rem\" }}>\r\n                <div\r\n                  style={{\r\n                    display: \"flex\",\r\n                    gap: \"0.5rem\",\r\n                  }}\r\n                >\r\n                  <input\r\n                    type=\"text\"\r\n                    value={newTask}\r\n                    onChange={(e) => setNewTask(e.target.value)}\r\n                    placeholder=\"Add a new task...\"\r\n                    style={{\r\n                      flex: 1,\r\n                      padding: \"0.75rem\",\r\n                      border: \"1px solid #ddd\",\r\n                      borderRadius: \"6px\",\r\n                      fontSize: \"1rem\",\r\n                    }}\r\n                  />\r\n                  <button\r\n                    type=\"submit\"\r\n                    style={{\r\n                      backgroundColor: \"#E8B180\",\r\n                      color: \"white\",\r\n                      border: \"none\",\r\n                      padding: \"0 1.5rem\",\r\n                      borderRadius: \"6px\",\r\n                      cursor: \"pointer\",\r\n                      fontWeight: \"500\",\r\n                      transition: \"background-color 0.2s\",\r\n                    }}\r\n                    onMouseOver={(e) =>\r\n                      (e.currentTarget.style.backgroundColor = \"#D89F73\")\r\n                    }\r\n                    onMouseOut={(e) =>\r\n                      (e.currentTarget.style.backgroundColor = \"#E8B180\")\r\n                    }\r\n                  >\r\n                    Add\r\n                  </button>\r\n                </div>\r\n              </form>\r\n\r\n              <div\r\n                style={{\r\n                  maxHeight: \"400px\",\r\n                  overflowY: \"auto\",\r\n                  paddingRight: \"0.5rem\",\r\n                }}\r\n              >\r\n                {tasks.length === 0 ? (\r\n                  <p\r\n                    style={{\r\n                      color: \"#6c757d\",\r\n                      textAlign: \"center\",\r\n                      margin: \"2rem 0\",\r\n                    }}\r\n                  >\r\n                    No tasks yet. Add one above!\r\n                  </p>\r\n                ) : (\r\n                  <ul style={{ listStyle: \"none\", padding: 0, margin: 0 }}>\r\n                    {tasks.map((task) => (\r\n                      <li\r\n                        key={task.id}\r\n                        style={{\r\n                          display: \"flex\",\r\n                          alignItems: \"center\",\r\n                          padding: \"0.75rem\",\r\n                          backgroundColor: task.completed ? \"#e8f5e9\" : \"white\",\r\n                          borderRadius: \"6px\",\r\n                          marginBottom: \"0.5rem\",\r\n                          boxShadow: \"0 1px 3px rgba(0,0,0,0.1)\",\r\n                        }}\r\n                      >\r\n                        <button\r\n                          onClick={() =>\r\n                            toggleTaskCompletion(task.id, task.completed)\r\n                          }\r\n                          style={{\r\n                            width: \"24px\",\r\n                            height: \"24px\",\r\n                            borderRadius: \"50%\",\r\n                            border: `2px solid ${\r\n                              task.completed ? \"#4caf50\" : \"#ccc\"\r\n                            }`,\r\n                            backgroundColor: task.completed\r\n                              ? \"#4caf50\"\r\n                              : \"transparent\",\r\n                            display: \"flex\",\r\n                            alignItems: \"center\",\r\n                            justifyContent: \"center\",\r\n                            marginRight: \"1rem\",\r\n                            cursor: \"pointer\",\r\n                            flexShrink: 0,\r\n                          }}\r\n                        >\r\n                          {task.completed && (\r\n                            <FaCheck color=\"white\" size={12} />\r\n                          )}\r\n                        </button>\r\n                        <span\r\n                          style={{\r\n                            flex: 1,\r\n                            textDecoration: task.completed\r\n                              ? \"line-through\"\r\n                              : \"none\",\r\n                            color: task.completed ? \"#6c757d\" : \"#212529\",\r\n                            wordBreak: \"break-word\",\r\n                          }}\r\n                        >\r\n                          {task.text}\r\n                        </span>\r\n                        <button\r\n                          onClick={() => deleteTask(task.id)}\r\n                          style={{\r\n                            background: \"none\",\r\n                            border: \"none\",\r\n                            color: \"#dc3545\",\r\n                            cursor: \"pointer\",\r\n                            marginLeft: \"0.5rem\",\r\n                            display: \"flex\",\r\n                            alignItems: \"center\",\r\n                            justifyContent: \"center\",\r\n                            padding: \"0.25rem\",\r\n                            borderRadius: \"4px\",\r\n                            transition: \"background-color 0.2s\",\r\n                          }}\r\n                          onMouseOver={(e) =>\r\n                            (e.currentTarget.style.backgroundColor = \"#f1f1f1\")\r\n                          }\r\n                          onMouseOut={(e) =>\r\n                            (e.currentTarget.style.backgroundColor =\r\n                              \"transparent\")\r\n                          }\r\n                        >\r\n                          <FaTrash size={14} />\r\n                        </button>\r\n                      </li>\r\n                    ))}\r\n                  </ul>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Chat Section */}\r\n          <div\r\n            style={{\r\n              backgroundColor: \"#f8f9fa\",\r\n              borderRadius: \"12px\",\r\n              padding: \"1.5rem\",\r\n              boxShadow: \"0 2px 8px rgba(0,0,0,0.1)\",\r\n              marginTop: \"2rem\",\r\n            }}\r\n          >\r\n            <ChatUI\r\n              listTitle=\"Vendors\"\r\n              onSendMessage={handleSendMessage}\r\n              onSelectVendor={handleSelectVendor}\r\n              selectedVendor={selectedVendor}\r\n              messages={currentConversation ? chatMessages[currentConversation.conversation_id] || [] : []}\r\n              unreadCount={unreadCount}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Profile Picture Modal */}\r\n      {showImageModal && (\r\n        <div\r\n          style={{\r\n            position: \"fixed\",\r\n            top: 0,\r\n            left: 0,\r\n            right: 0,\r\n            bottom: 0,\r\n            backgroundColor: \"rgba(0, 0, 0, 0.8)\",\r\n            display: \"flex\",\r\n            justifyContent: \"center\",\r\n            alignItems: \"center\",\r\n            zIndex: 1000,\r\n          }}\r\n          onClick={() => setShowImageModal(false)}\r\n        >\r\n          <div\r\n            style={{\r\n              maxWidth: \"90%\",\r\n              maxHeight: \"90%\",\r\n              position: \"relative\",\r\n            }}\r\n            onClick={(e) => e.stopPropagation()}\r\n          >\r\n            <img\r\n              src={preview}\r\n              alt=\"Profile Preview\"\r\n              style={{\r\n                maxWidth: \"100%\",\r\n                maxHeight: \"80vh\",\r\n                borderRadius: \"8px\",\r\n                boxShadow: \"0 4px 20px rgba(0,0,0,0.3)\",\r\n              }}\r\n            />\r\n            <button\r\n              onClick={() => setShowImageModal(false)}\r\n              style={{\r\n                position: \"absolute\",\r\n                top: \"-40px\",\r\n                right: \"0\",\r\n                background: \"none\",\r\n                border: \"none\",\r\n                color: \"white\",\r\n                fontSize: \"24px\",\r\n                cursor: \"pointer\",\r\n                padding: \"8px\",\r\n              }}\r\n            >\r\n              ✕\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}